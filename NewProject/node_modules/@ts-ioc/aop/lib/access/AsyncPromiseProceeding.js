"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var core_1 = require("@ts-ioc/core");
var IAdvisorProceeding_1 = require("./IAdvisorProceeding");
var ReturningType_1 = require("./ReturningType");
var NonePointcut_1 = require("../decorators/NonePointcut");
var AsyncPromiseProceeding = /** @class */ (function () {
    function AsyncPromiseProceeding() {
    }
    AsyncPromiseProceeding.prototype.proceeding = function (joinPoint) {
        var actions = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            actions[_i - 1] = arguments[_i];
        }
        if (joinPoint.returning) {
            actions.forEach((function (action) {
                joinPoint.returning = joinPoint.returning.then(function (val) {
                    joinPoint.returningValue = val;
                    return Promise.resolve(action(joinPoint))
                        .then(function () {
                        return joinPoint.returningValue;
                    });
                });
            }));
        }
    };
    AsyncPromiseProceeding.getClassAnnations = function () {
        return { "name": "AsyncPromiseProceeding", "params": { "constructor": [], "proceeding": ["joinPoint", "actions"] } };
    };
    AsyncPromiseProceeding = tslib_1.__decorate([
        NonePointcut_1.NonePointcut(),
        core_1.Singleton(IAdvisorProceeding_1.AdvisorProceedingToken, ReturningType_1.ReturningType.promise),
        tslib_1.__metadata("design:paramtypes", [])
    ], AsyncPromiseProceeding);
    return AsyncPromiseProceeding;
}());
exports.AsyncPromiseProceeding = AsyncPromiseProceeding;

//# sourceMappingURL=../sourcemaps/access/AsyncPromiseProceeding.js.map
