{"version":3,"sources":["core/actions/ActionComposite.ts"],"names":[],"mappings":";;;AACA,2CAA0C;AAI1C,+CAA8C;AAE9C;;;;;;;GAOG;AACH;IAAqC,2CAA2B;IAI5D,yBAAY,IAAY;QAAxB,YACI,kBAAM,IAAI,CAAC,SAEd;QADG,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;;IACvB,CAAC;IAED,gCAAM,GAAN,UAAO,IAAqB,EAAE,KAAa;QACvC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,KAAK,GAAG,CAAC,EAAE;YACX,KAAK,GAAG,CAAC,CAAC;SACb;aAAM,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;YACtC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;SACpC;QACD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACrC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,iCAAO,GAAP,UAAQ,SAAqB,EAAE,IAA0B,EAAE,IAAa;QACpE,IAAI,IAAI,EAAE;YACN,IAAI,CAAC,IAAI,CAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,IAAI,KAAK,IAAI,EAAhB,CAAgB,CAAC;iBAC5B,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;SACjC;aAAM;YACH,IAAI,CAAC,KAAK,CAAC,UAAA,MAAM;gBACb,IAAI,MAAM,YAAY,eAAe,EAAE;oBACnC,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;iBACnC;YACL,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAED,+BAAK,GAAL;QACI,OAAO,uBAAU,CAAC;IACtB,CAAC;IAES,iCAAO,GAAjB,UAAkB,SAAqB,EAAE,IAAqB;QAC1D,cAAc;IAClB,CAAC;IAG0B,iCAAiB,GAAxB;QACI,OAAO,EAAC,MAAM,EAAC,iBAAiB,EAAC,QAAQ,EAAC,EAAC,aAAa,EAAC,CAAC,MAAM,CAAC,EAAC,QAAQ,EAAC,CAAC,MAAM,EAAC,OAAO,CAAC,EAAC,SAAS,EAAC,CAAC,WAAW,EAAC,MAAM,EAAC,MAAM,CAAC,EAAC,OAAO,EAAC,EAAE,EAAC,SAAS,EAAC,CAAC,WAAW,EAAC,MAAM,CAAC,EAAC,EAAC,CAAC;IAClL,CAAC;IACN,sBAAC;AAAD,CA7CnB,AA6CoB,CA7CiB,uBAAU,GA6C3B;AA7CP,0CAAe","file":"../../../core/actions/ActionComposite.js","sourcesContent":["import { ActionData } from '../ActionData';\r\nimport { NullAction } from './NullAction';\r\nimport { ActionComponent } from './ActionComponent';\r\nimport { Metadate } from '../metadatas';\r\nimport { IContainer } from '../../IContainer';\r\nimport { GComposite } from '../../components';\r\n\r\n/**\r\n * action composite\r\n *\r\n * @export\r\n * @class ActionComposite\r\n * @extends {GComposite<ActionComponent>}\r\n * @implements {ActionComponent}\r\n */\r\nexport class ActionComposite extends GComposite<ActionComponent> implements ActionComponent {\r\n\r\n    parent: ActionComponent;\r\n    protected children: ActionComponent[];\r\n    constructor(name: string) {\r\n        super(name);\r\n        this.children = [];\r\n    }\r\n\r\n    insert(node: ActionComponent, index: number): this {\r\n        node.parent = this;\r\n        if (index < 0) {\r\n            index = 0;\r\n        } else if (index >= this.children.length) {\r\n            index = this.children.length - 1;\r\n        }\r\n        this.children.splice(index, 0, node);\r\n        return this;\r\n    }\r\n\r\n    execute(container: IContainer, data: ActionData<Metadate>, name?: string) {\r\n        if (name) {\r\n            this.find(it => it.name === name)\r\n                .execute(container, data);\r\n        } else {\r\n            this.trans(action => {\r\n                if (action instanceof ActionComposite) {\r\n                    action.working(container, data);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    empty() {\r\n        return NullAction;\r\n    }\r\n\r\n    protected working(container: IContainer, data: ActionData<any>) {\r\n        // do nothing.\r\n    }\r\n\r\n\n                        static getClassAnnations():any  {\n                            return {\"name\":\"ActionComposite\",\"params\":{\"constructor\":[\"name\"],\"insert\":[\"node\",\"index\"],\"execute\":[\"container\",\"data\",\"name\"],\"empty\":[],\"working\":[\"container\",\"data\"]}};\n                        }\n                   }\r\n"]}