{"version":3,"sources":["core.umd.min.js"],"names":["global","factory","exports","module","require","define","amd","core","umd","js","tslib","Reflect","this","tslib_1","reflectMetadata","commonjsRequire","Error","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","lang_1","defineProperty","value","MapBase","map","Map","get","size","enumerable","configurable","clear","delete","key","has","set","keys","Array","from","values","getClassAnnations","name","params","constructor","MapSet","_super","__extends","forEach","callbackfn","thisArg","lang","target","typeCheck","isObject","isFunction","forIn","iterator","isArray","some","it","idx","classAnnations","getClass","isNullOrUndefined","isClass","getParentClass","p","getPrototypeOf","forInClassChain","express","isClassType","assert","param","msg","assertExp","n","assign","source1","source2","sources","length","unshift","apply","concat","omit","fields","_i","arguments","result_1","indexOf","hasField","find","item","first","list","last","hasClassAnnations","isString","getClassName","classType","test","getClassChain","types","type","push","isExtendsClass","baseClass","isExtnds","t","classCheck","isNodejsEnv","navigator","userAgent","caller","e","process","versions","node","isToken","isSymbol","Registration_1","Registration","isBaseObject","isMetadataObject","props","ps","isUndefined","undefined","isNull","toString","isBaseType","Boolean","String","Number","Date","isAbstractClass","hasOwnMetadata","isPromise","isObservable","isRefTarget","isClassMetadata","extendsProps","isProvideMetadata","isBoolean","isNumber","isTypeObject","isDate","isRegExp","RegExp","PromiseUtil_1","Defer","_this","promise","Promise","resolve","reject","create","then","defer","PromiseUtil","promises","defVal","pf","v","data","catch","err","step","result","filter","val","runInChain","handles","ctx","next","index","dispatch","handle","bind","utils","__exportStar","isRegistrationClass","isIocRegClass","provideType","desc","init","getProvide","getDesc","format","reg","name_1","join","InjectToken_1","InjectToken","IContainer","ResoveWay","ContainerToken","RefTagLevel","IocState","Mode","IMethodAccessor","MethodAccessorToken","NullComponent_1","NullComponent","isEmpty","add","action","remove","mode","NullNode","each","trans","transAfter","routeUp","equals","empty","GComposite_1","GComposite","children","parent","component","cmp","splice","nodes","iterate","r","traverse","route","eachChildren","traverseLast","i","Composite_1","Composite","components","NullAction","NullActionClass","insert","execute","container","ActionComposite_1","ActionComposite","working","LifeState_1","LifeState","CoreActions_1","CoreActions","ArgsIterator_1","ArgsIterator","args","metadata","isCompeted","end","arg","isMetadata","match","setMetadata","getArgs","getMetadata","DecoratorType_1","DecoratorType","DecoratorFactory","storeMetadata","metaName","metadataExtends","annotations","getOwnTypeMetadata","slice","typeMetadata","decorator","setParamerterNames","defineMetadata","setTypeMetadata","setPropertyMetadata","propertyKey","parameterIndex","parameters","getOwnParamMetadata","paramMeadata","getOwnMetadata","paramsMetadataExt","setParamMetadata","propertyKey_3","descriptor","meta","getOwnMethodMetadata","methodMeadata","methodMetadataExt","setMethodMetadata","ParamerterName","createDecorator","adapter","argsToMetadata","decoratorType","All","getClassDecorators","getOwnMetadataKeys","d","getMethodDecorators","getMetadataKeys","replace","getPropDecorators","getParamDecorators","getTypeMetadata","hasClassMetadata","hasMetadata","hasOwnClassMetadata","getMethodMetadata","hasOwnMethodMetadata","hasMethodMetadata","propertyMetadataExt","getPropertyMetadata","getOwnPropertyMetadata","propmetadata","hasPropertyMetadata","getParamerterNames","descriptors","getOwnPropertyDescriptors","isUglify","anName","getParamNames","getParamMetadata","hasParamMetadata","hasOwnParamMetadata","getOwnParamerterNames","STRIP_COMMENTS","ARGUMENT_NAMES","func","fnStr","ClassDecoratorFactory","createClassDecorator","provide","alias","singleton","expires","refs","Class","MethodDecoratorFactory","createMethodDecorator","providers","Method","ParamDecoratorFactory","createParamDecorator","provider","Parameter","PropertyDecoratorFactory","createPropDecorator","Property","ParamPropDecoratorFactory","createParamPropDecorator","ClassMethodDecoratorFactory","createClassMethodDecorator","MethodPropDecoratorFactory","createMethodPropDecorator","MethodPropParamDecoratorFactory","createMethodPropParamDecorator","factories","InjectReference_1","RefRegistration","InjectReference","isInjectReference","InjectClassProvidesToken","BindProviderAction_1","BindProviderAction","bindProvider","targetType","raiseContainer","matchs","getLifeScope","surm","actions","includes","clpds","classPds","resolveValue","provides","decors","c","getToken","bindRefProvider","tk","bindProviders","refKey","execResult","BindParameterTypeAction_1","BindParameterTypeAction","bindParameterType","designParams","lifeScope","dtype","isVaildDependence","register","getParameterDecorators","parm","token","getTokenKey","BindPropertyTypeAction_1","BindPropertyTypeAction","bindPropertyType","getPropertyDecorators","propMetadata","prop","Provider_1","Provider","createExtends","extendsTarget","ExtendsProvider","createInvoke","method","InvokeProvider","createParam","ParamProvider","syncInvoke","extends","ProviderMap_1","ProviderMapToken","ProviderMap","k","getTokenImpl","resway","unregister","_a","way","current","fac","copy","isProviderMap","IProviderParser","ProviderParserToken","ProviderParser_1","ProviderParser","parse","pr_1","isobjMap","deps","useValue","useClass","useFactory","useExisting","isProvider","InjectPropertyAction_1","InjectPropertyAction","injectProperty","act","providerMap_1","providerMap","injecteds","pdrMap","writable","BindParameterProviderAction_1","BindParameterProviderAction","bindParameterProviders","metadatas","ComponentBeforeInitAction_1","ComponentBeforeInitAction","componentBeforeInit","hasDecorator","beforeInit","ComponentInitAction_1","ComponentInitAction","componentInit","onInit","ComponentAfterInitAction_1","ComponentAfterInitAction","componentAfterInit","afterInit","ICacheManager","CacheManagerToken","CacheAction_1","CacheAction","cache","cacheManager","hasCache","cacheMetadata","getCacheMetadata","SingletonAction","SingletionAction","singletion","tokenKey","registerValue","AutoRun","Autorun","autorun","order","IocExt","IocModule","AutorunAction_1","AutorunAction","getDecorator","metas","instance","basic","getOwnPropertyDescriptor","sealed","seal","Component","Injectable","Refs","Providers","Inject","AutoWried","AutoWired","Param","Singleton","Abstract","decorators","IRecognizer","RecognizerToken","MethodAutorun_1","MethodAutorun","methodAutorun","lastmetas_1","idx_1","mm","m","sort","au1","au2","aut","ActionFactory_1","ActionFactory","IMetaAccessor","InjectMetaAccessorToken","MetaAccessorToken","DefaultLifeScope_1","DefaultLifeScope","buildAction","addAction","nodepaths","pathname","registerDecorator","actions$$2","getDecoratorType","registerCustomDecorator","types$$2","toActionName","names","itm","routeExecute","dec","decirator","getAtionByName","getClassAction","getMethodAction","getPropertyAction","getParameterAction","getConstructorParameters","getParameters","getMethodParameters","paramNames","isSingletonType","getMethodMetadatas","filerDecorators","typ","getTypeDecorators","decType","flag","design","runtime","beforeCreateArgs","beforeConstructor","afterConstructor","AfterInit","MetaAccessor_1","MetaAccessor","getDecorators","extConfig","decorFilter","cfg","classmeta_1","decor","config","getTokenInConfig","validateToken","getBootToken","getBootTokenInConfig","bootstrap","MethodAccessor_1","MethodAccessor","invoke","providers$$2","__awaiter","targetClass","actionData","paramInstances","__generator","_b","label","createParams","sent","createSyncParams","getProviderParser","all","CacheManager_1","CacheManager","cacheTokens","isChecking","timeout","now","checkExpires","destroy","clearTimeout","timeoutCaches_1","setTimeout","onDestroy","console","error","IContainerBuilder","ContainerBuilderToken","LifeScope","LifeScopeToken","ResolverChain_1","ResolverChainToken","ResolverChain","resolvers","resolver","hasResolver","hasRegister","bubble","unregisterValue","getTokenProvider","aliasOrway","toArray","resolves","registerCores_1","registerCores","registerSingleton","NaN","Container_1","SingletonRegToken","Container","getRoot","root","parser","getBuilder","getResolvers","providers$$1","resolveFirst","tokens","inst","getService","toRefToken","defaultToken","fac_1","tokens_1","defToken","prds","getRefService","service","isPrivate","a","refToken","tag","forInRefTarget","stk","getRefToken","rtk","resolveRef","getServices","both","services","iteratorServices","pds","withTag","matchExp","rway","withBoth","type_1","tags_1","tg","priMapTk","priMap_1","ptk","ref","pdrmap","registerFactory","getSingleton","provideKey","provideTypes","onceBinded","tgt","complete","prods","maps","clearCache","level","self","use","inChain","chain","inProviders","ty","prdKey","ppdkey_1","pmapKey_1","getTokenClassChain","modules","syncLoadModule","loadModule","cacheDecorator","classFactory","ClassT","bindTypeFactory","createCustomFactory","isExtensible","lifecycleData","IModuleLoader","ModuleLoaderToken","DefaultModuleLoader_1","DefaultModuleLoader","getLoader","_loader","createLoader","load","mdty","isFile","loadFile","loadPathModule","allms","rmodules","ms","loadTypes","mdls","getTypes","regModules","getContentTypes","files","basePath","loader","f","rms","str","moduleName","pmd","allmoduls","nmd","modulepath","regModule","IModuleValidate","InjectModuleValidateToken","ModuleValidateToken","ModuleValidate","ModuelValidate","valid","IocExtModuleValidateToken","IocExtModuleValidate","IModuleInjector","InjectModuleInjectorToken","ModuleInjectorToken","ModuleInjector_1","ModuleInjector","validate","skipNext","inject","setup","getNext","injected","syncInject","syncSetup","filtered","__decorate","__param","__metadata","IModuleInjectorChain","ModuleInjectorChainToken","ModuleInjectorChain_1","ModuleInjectorChain","_injectors","injector","isInjector","injectors","jtor","mds","ijRt","completed","ContainerBuilder_1","ContainerBuilder","build","injTypes","injChain_1","getInjectorChain","typs","ityps","syncBuild","injChain_2"],"mappings":"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","file":"../core.umd.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('tslib'), require('reflect-metadata')) :\n\ttypeof define === 'function' && define.amd ? define(['tslib', 'reflect-metadata'], factory) :\n\t(global.core = global.core || {}, global.core.umd = global.core.umd || {}, global.core.umd.js = factory(global.tslib,global.Reflect));\n}(this, (function (tslib_1,reflectMetadata) { 'use strict';\n\ntslib_1 = tslib_1 && tslib_1.hasOwnProperty('default') ? tslib_1['default'] : tslib_1;\nreflectMetadata = reflectMetadata && reflectMetadata.hasOwnProperty('default') ? reflectMetadata['default'] : reflectMetadata;\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar lang_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n// use core-js in browser.\n/**\n * map base.\n *\n * @export\n * @class MapBase\n * @template K\n * @template V\n */\nvar MapBase = /** @class */ (function () {\n    function MapBase() {\n        this.map = new Map();\n    }\n    Object.defineProperty(MapBase.prototype, \"size\", {\n        get: function () {\n            return this.map.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MapBase.prototype.clear = function () {\n        this.map.clear();\n    };\n    MapBase.prototype.delete = function (key) {\n        return this.map.delete(key);\n    };\n    MapBase.prototype.get = function (key) {\n        return this.map.get(key);\n    };\n    MapBase.prototype.has = function (key) {\n        return this.map.has(key);\n    };\n    MapBase.prototype.set = function (key, value) {\n        this.map.set(key, value);\n        return this;\n    };\n    MapBase.prototype.keys = function () {\n        return Array.from(this.map.keys());\n    };\n    MapBase.prototype.values = function () {\n        return Array.from(this.map.values());\n    };\n    MapBase.getClassAnnations = function () {\n        return { \"name\": \"MapBase\", \"params\": { \"constructor\": [], \"clear\": [], \"delete\": [\"key\"], \"get\": [\"key\"], \"has\": [\"key\"], \"set\": [\"key\", \"value\"], \"keys\": [], \"values\": [] } };\n    };\n    return MapBase;\n}());\nexports.MapBase = MapBase;\n/**\n * map set  for tsioc old version.\n *\n * @export\n * @class MapSet\n * @template K\n * @template V\n */\nvar MapSet = /** @class */ (function (_super) {\n    tslib_1.__extends(MapSet, _super);\n    function MapSet() {\n        return _super.call(this) || this;\n    }\n    MapSet.prototype.forEach = function (callbackfn, thisArg) {\n        this.map.forEach(callbackfn, thisArg);\n    };\n    MapSet.getClassAnnations = function () {\n        return { \"name\": \"MapSet\", \"params\": { \"constructor\": [], \"forEach\": [\"callbackfn\", \"thisArg\"] } };\n    };\n    return MapSet;\n}(MapBase));\nexports.MapSet = MapSet;\n/**\n * lang utils\n */\nvar lang;\n(function (lang) {\n    /**\n     * assert param is right or not.\n     *\n     * @export\n     * @param {*} param\n     * @param {(string | Function)} msg\n     */\n    function assert(param, msg) {\n        if (typeCheck.isNullOrUndefined(param)) {\n            throw new Error(typeCheck.isFunction(msg) ? msg(param) : msg);\n        }\n    }\n    lang.assert = assert;\n    /**\n     * check assert param invalid by express\n     *\n     * @export\n     * @param {(boolean | (() => boolean))} express\n     * @param {(string | Function)} msg\n     */\n    function assertExp(express, msg) {\n        if (!(typeCheck.isFunction(express) ? express() : express)) {\n            throw new Error(typeCheck.isFunction(msg) ? msg() : msg);\n        }\n    }\n    lang.assertExp = assertExp;\n    /**\n     * get object keys.\n     *\n     * @param {*} target\n     * @returns {string[]}\n     */\n    function keys(target) {\n        if (typeCheck.isObject(target)) {\n            if (typeCheck.isFunction(Object.keys)) {\n                return Object.keys(target);\n            }\n        }\n        return [];\n    }\n    lang.keys = keys;\n    /**\n     * values of target object.\n     *\n     * @export\n     * @param {*} target\n     * @returns {any[]}\n     */\n    function values(target) {\n        if (typeCheck.isObject(target)) {\n            if (typeCheck.isFunction(Object.values)) {\n                return Object.values(target);\n            }\n            else {\n                return keys(target).map(function (n) { return target[n]; });\n            }\n        }\n        return [];\n    }\n    lang.values = values;\n    /**\n     * assign\n     *\n     * @export\n     * @template T\n     * @param {T} target\n     * @param {...any[]} source\n     * @returns {T}\n     */\n    function assign(target, source1, source2, sources) {\n        if (sources && sources.length) {\n            sources.unshift(source2 || {});\n            sources.unshift(source1 || {});\n            return Object.assign.apply(Object, [target].concat(sources));\n        }\n        else if (source2) {\n            return Object.assign(target, source1 || {}, source2);\n        }\n        else {\n            return Object.assign(target, source1 || {});\n        }\n    }\n    lang.assign = assign;\n    /**\n     * create an new object from target object omit some field.\n     *\n     * @export\n     * @param {ObjectMap<any>} target\n     * @param {...string[]} fields\n     * @returns {*}\n     */\n    function omit(target) {\n        var fields = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            fields[_i - 1] = arguments[_i];\n        }\n        if (typeCheck.isObject(target)) {\n            var result_1 = {};\n            keys(target).forEach(function (key) {\n                if (fields.indexOf(key) < 0) {\n                    result_1[key] = target[key];\n                }\n            });\n            return result_1;\n        }\n        else {\n            return target;\n        }\n    }\n    lang.omit = omit;\n    /**\n     * object has field or not.\n     *\n     * @export\n     * @param {ObjectMap<any>} target\n     * @returns\n     */\n    function hasField(target) {\n        return keys(target).length > 0;\n    }\n    lang.hasField = hasField;\n    /**\n     * for in opter for object or array.\n     *\n     * @export\n     * @template T\n     * @param {(ObjectMap<T> | T[])} target\n     * @param {(item: T, idx?: number|string) => void|boolean} iterator\n     */\n    function forIn(target, iterator) {\n        if (typeCheck.isArray(target)) {\n            target.some(function (it, idx) { return iterator(it, idx) === false; });\n        }\n        else if (typeCheck.isObject(target)) {\n            keys(target).some(function (key, idx) { return iterator(target[key], key) === false; });\n        }\n    }\n    lang.forIn = forIn;\n    /**\n     * find\n     *\n     * @template T\n     * @param {(ObjectMap<T> | T[])} target\n     * @param {((item: T, idx?: number | string) => boolean)} express\n     */\n    function find(target, express) {\n        var item;\n        forIn(target, function (it, idx) {\n            if (!item) {\n                if (express(it, idx)) {\n                    item = it;\n                    return false;\n                }\n                return true;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    lang.find = find;\n    /**\n     * first.\n     *\n     * @export\n     * @template T\n     * @param {T[]} list\n     * @returns {T}\n     */\n    function first(list) {\n        if (typeCheck.isArray(list) && list.length) {\n            return list[0];\n        }\n        return null;\n    }\n    lang.first = first;\n    /**\n     * last.\n     *\n     * @export\n     * @template T\n     * @param {T[]} list\n     * @returns {T}\n     */\n    function last(list) {\n        if (typeCheck.isArray(list) && list.length) {\n            return list[list.length - 1];\n        }\n        return null;\n    }\n    lang.last = last;\n    /**\n     * get class annations.\n     *\n     * @export\n     * @param {ClassType<any>} target\n     * @returns\n     */\n    function getClassAnnations(target) {\n        return typeCheck.isFunction(target.getClassAnnations) ? target.getClassAnnations() : target.classAnnations;\n    }\n    lang.getClassAnnations = getClassAnnations;\n    /**\n     * target has class annations or not.\n     *\n     * @export\n     * @param {ClassType<any>} target\n     * @returns {boolean}\n     */\n    function hasClassAnnations(target) {\n        if (typeCheck.isFunction(target.getClassAnnations)) {\n            return true;\n        }\n        return target.classAnnations && typeCheck.isString(target.classAnnations.name) && target.classAnnations.name.length > 0;\n    }\n    lang.hasClassAnnations = hasClassAnnations;\n    /**\n     * get calss of object.\n     *\n     * @export\n     * @param {*} target\n     * @returns {Type<any>}\n     */\n    function getClass(target) {\n        if (typeCheck.isNullOrUndefined(target)) {\n            return null;\n        }\n        if (typeCheck.isClass(target)) {\n            return target;\n        }\n        return target.constructor || target.prototype.constructor;\n    }\n    lang.getClass = getClass;\n    /**\n     * get class name.\n     *\n     * @export\n     * @param {AbstractType<any>} target\n     * @returns {string}\n     */\n    function getClassName(target) {\n        var classType = typeCheck.isFunction(target) ? target : getClass(target);\n        if (!typeCheck.isFunction(classType)) {\n            return '';\n        }\n        if (/^[a-z]$/.test(classType.name)) {\n            var classAnnations = getClassAnnations(classType);\n            return classAnnations ? classAnnations.name : classType.name;\n        }\n        return classType.name;\n    }\n    lang.getClassName = getClassName;\n    /**\n     * get target type parent class.\n     *\n     * @export\n     * @param {ClassType<any>} target\n     * @returns {ClassType<any>}\n     */\n    function getParentClass(target) {\n        var p = Reflect.getPrototypeOf(target.prototype);\n        return typeCheck.isClass(p) ? p : p.constructor;\n    }\n    lang.getParentClass = getParentClass;\n    /**\n     * get all parent class in chain.\n     *\n     * @export\n     * @param {ClassType<any>} target\n     * @returns {ClassType<any>[]}\n     */\n    function getClassChain(target) {\n        var types = [];\n        forInClassChain(target, function (type) {\n            types.push(type);\n        });\n        return types;\n    }\n    lang.getClassChain = getClassChain;\n    /**\n     * iterate base classes of target in chain. return false will break iterate.\n     *\n     * @export\n     * @param {Type<any>} target\n     * @param {(token: Type<any>) => any} express\n     */\n    function forInClassChain(target, express) {\n        while (typeCheck.isClassType(target) && target !== Object) {\n            if (express(target) === false) {\n                break;\n            }\n            target = getParentClass(target);\n        }\n    }\n    lang.forInClassChain = forInClassChain;\n    /**\n     * target is extends class of baseClass or not.\n     *\n     * @export\n     * @param {Token<any>} target\n     * @param {(ClassType<any> | ((type: ClassType<any>) => boolean))} baseClass\n     * @returns {boolean}\n     */\n    function isExtendsClass(target, baseClass) {\n        var isExtnds = false;\n        if (typeCheck.isClassType(target)) {\n            forInClassChain(target, function (t) {\n                if (typeCheck.isClassType(baseClass)) {\n                    isExtnds = t === baseClass;\n                }\n                else {\n                    isExtnds = baseClass(t);\n                }\n                return !isExtnds;\n            });\n        }\n        return isExtnds;\n    }\n    lang.isExtendsClass = isExtendsClass;\n})(lang = exports.lang || (exports.lang = {}));\n\n\n});\n\nunwrapExports(lang_1);\nvar lang_2 = lang_1.MapBase;\nvar lang_3 = lang_1.MapSet;\nvar lang_4 = lang_1.lang;\n\nvar typeCheck = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * check target is function or not.\n *\n * @export\n * @param {*} target\n * @returns\n */\nfunction isFunction(target) {\n    if (!target) {\n        return false;\n    }\n    return typeof target === 'function';\n}\nexports.isFunction = isFunction;\n/**\n * check Abstract class with @Abstract or not\n *\n * @export\n * @param {*} target\n * @returns {target is AbstractType<any>}\n */\nfunction isAbstractClass(target) {\n    return classCheck(target) && Reflect.hasOwnMetadata('@Abstract', target);\n}\nexports.isAbstractClass = isAbstractClass;\n/**\n * check target is class or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Type<any>}\n */\nfunction isClass(target) {\n    return classCheck(target) && (!Reflect.hasOwnMetadata('@Abstract', target));\n}\nexports.isClass = isClass;\nfunction isClassType(target) {\n    return classCheck(target);\n}\nexports.isClassType = isClassType;\nfunction classCheck(target) {\n    if (!isFunction(target)) {\n        return false;\n    }\n    if (target.prototype) {\n        if (!target.name || target.name === 'Object') {\n            return false;\n        }\n        var type = target;\n        // for uglify\n        if (/^[a-z]$/.test(type.name)) {\n            if (lang_1.lang.hasClassAnnations(type)) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            if (lang_1.lang.hasClassAnnations(type)) {\n                return true;\n            }\n            if (!/^[A-Z@]/.test(target.name)) {\n                return false;\n            }\n        }\n        // for IE 8, 9\n        if (!isNodejsEnv() && /MSIE [6-9]/.test(navigator.userAgent)) {\n            return true;\n        }\n        try {\n            target.arguments && target.caller;\n            return false;\n        }\n        catch (e) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * is run in nodejs or not.\n *\n * @export\n * @returns {boolean}\n */\nfunction isNodejsEnv() {\n    return (typeof process !== 'undefined') && (typeof process.versions.node !== 'undefined');\n}\nexports.isNodejsEnv = isNodejsEnv;\n/**\n * check target is token or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Token<any>}\n */\nfunction isToken(target) {\n    if (!target) {\n        return false;\n    }\n    if (isString(target) || isSymbol(target) || classCheck(target) || (target instanceof Registration_1.Registration)) {\n        return true;\n    }\n    return false;\n}\nexports.isToken = isToken;\n/**\n * is target promise or not. now check is es6 Promise only.\n *\n * @export\n * @param {*} target\n * @returns {target is Promise<any>}\n */\nfunction isPromise(target) {\n    if (!target) {\n        return false;\n    }\n    var type = target.constructor || target.prototype.constructor;\n    if (type && type.name === 'Promise') {\n        return true;\n    }\n    return false;\n}\nexports.isPromise = isPromise;\n/**\n * is target rxjs observable or not.\n *\n * @export\n * @param {*} target\n * @returns {boolean}\n */\nfunction isObservable(target) {\n    if (!target && !isObject(target)) {\n        return false;\n    }\n    var type = target.constructor || target.prototype.constructor;\n    if (type && type.name === 'Observable') {\n        return true;\n    }\n    return false;\n}\nexports.isObservable = isObservable;\n/**\n * is target base object or not.\n * eg. {}, have not self constructor;\n * @export\n * @param {*} target\n * @returns {target is Promise<any>}\n */\nfunction isBaseObject(target) {\n    if (!target) {\n        return false;\n    }\n    if (target.constructor && target.constructor.name === 'Object') {\n        return true;\n    }\n    return false;\n}\nexports.isBaseObject = isBaseObject;\n/**\n * is metadata object or not.\n *\n * @export\n * @param {*} target\n * @param {...(string|string[])[]} props\n * @returns {boolean}\n */\nfunction isMetadataObject(target) {\n    var props = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        props[_i - 1] = arguments[_i];\n    }\n    if (!isBaseObject(target)) {\n        return false;\n    }\n    if (props.length) {\n        return lang_1.lang.keys(target).some(function (n) { return props.some(function (ps) { return isString(ps) ? ps === n : ps.indexOf(n) > 0; }); });\n    }\n    return true;\n}\nexports.isMetadataObject = isMetadataObject;\n/**\n * is reftarget options or not.\n *\n * @export\n * @param {*} target\n * @returns {target is IRefTarget}\n */\nfunction isRefTarget(target) {\n    if (isBaseObject(target) !== true) {\n        return false;\n    }\n    return isToken(target.target);\n}\nexports.isRefTarget = isRefTarget;\n/**\n * check object is class metadata or not.\n *\n * @export\n * @param {*} target\n * @param {...(string | string[])[]} extendsProps\n * @returns {boolean}\n */\nfunction isClassMetadata(target) {\n    var extendsProps = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        extendsProps[_i - 1] = arguments[_i];\n    }\n    return isMetadataObject.apply(void 0, [target].concat(extendsProps.concat(['singleton', 'provide', 'alias', 'type'])));\n}\nexports.isClassMetadata = isClassMetadata;\n/**\n * check object is property metadata or not.\n *\n * @export\n * @param {*} target\n * @param {...(string | string[])[]} extendsProps\n * @returns {boolean}\n */\nfunction isProvideMetadata(target) {\n    var extendsProps = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        extendsProps[_i - 1] = arguments[_i];\n    }\n    return isMetadataObject.apply(void 0, [target].concat(extendsProps.concat(['type', 'provider'])));\n}\nexports.isProvideMetadata = isProvideMetadata;\n/**\n * check target is string or not.\n *\n * @export\n * @param {*} target\n * @returns {target is string}\n */\nfunction isString(target) {\n    return typeof target === 'string';\n}\nexports.isString = isString;\n/**\n * check target is boolean or not.\n *\n * @export\n * @param {*} target\n * @returns {target is boolean}\n */\nfunction isBoolean(target) {\n    return typeof target === 'boolean' || (target === true || target === false);\n}\nexports.isBoolean = isBoolean;\n/**\n * check target is number or not.\n *\n * @export\n * @param {*} target\n * @returns {target is number}\n */\nfunction isNumber(target) {\n    return typeof target === 'number';\n}\nexports.isNumber = isNumber;\n/**\n * check target is undefined or not.\n *\n * @export\n * @param {*} target\n * @returns {target is undefined}\n */\nfunction isUndefined(target) {\n    return typeof target === 'undefined' || target === undefined;\n}\nexports.isUndefined = isUndefined;\n/**\n * check target is unll or not.\n *\n * @export\n * @param {*} target\n * @returns {target is null}\n */\nfunction isNull(target) {\n    return target === null;\n}\nexports.isNull = isNull;\n/**\n * is target null or undefined.\n *\n * @export\n * @param {*} target\n * @returns {boolean}\n */\nfunction isNullOrUndefined(target) {\n    return isNull(target) || isUndefined(target);\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n/**\n * check target is array or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Array<any>}\n */\nfunction isArray(target) {\n    return Array.isArray(target);\n}\nexports.isArray = isArray;\n/**\n * check target is object or not.\n *\n * @export\n * @param {*} target\n * @returns {target is object}\n */\nfunction isObject(target) {\n    if (isNullOrUndefined(target)) {\n        return false;\n    }\n    var type = typeof target;\n    return type === 'object' || type === 'function';\n}\nexports.isObject = isObject;\n/**\n * is custom class type instance or not.\n *\n * @export\n * @param {*} target\n * @returns {boolean}\n */\nfunction isTypeObject(target) {\n    if (isNullOrUndefined(target)) {\n        return false;\n    }\n    if (typeof target !== 'object') {\n        return false;\n    }\n    var type = lang_1.lang.getClass(target);\n    if (isBaseType(type)) {\n        return false;\n    }\n    return true;\n}\nexports.isTypeObject = isTypeObject;\n/**\n * check target is date or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Date}\n */\nfunction isDate(target) {\n    return isObject(target) && target instanceof Date;\n}\nexports.isDate = isDate;\n/**\n * check target is symbol or not.\n *\n * @export\n * @param {*} target\n * @returns {target is Symbol}\n */\nfunction isSymbol(target) {\n    return typeof target === 'symbol' || (isObject(target) && /^Symbol\\(/.test(target.toString()));\n}\nexports.isSymbol = isSymbol;\n/**\n * check target is regexp or not.\n *\n * @export\n * @param {*} target\n * @returns {target is RegExp}\n */\nfunction isRegExp(target) {\n    return target && target instanceof RegExp;\n}\nexports.isRegExp = isRegExp;\n/**\n * is base type or not.\n *\n * @export\n * @param {*} target\n * @returns {boolean}\n */\nfunction isBaseType(target) {\n    if (!isFunction(target)) {\n        return false;\n    }\n    return target === Object\n        || target === Boolean\n        || target === String\n        || target === Number\n        || target === Date;\n}\nexports.isBaseType = isBaseType;\n\n\n});\n\nunwrapExports(typeCheck);\nvar typeCheck_1 = typeCheck.isFunction;\nvar typeCheck_2 = typeCheck.isAbstractClass;\nvar typeCheck_3 = typeCheck.isClass;\nvar typeCheck_4 = typeCheck.isClassType;\nvar typeCheck_5 = typeCheck.isNodejsEnv;\nvar typeCheck_6 = typeCheck.isToken;\nvar typeCheck_7 = typeCheck.isPromise;\nvar typeCheck_8 = typeCheck.isObservable;\nvar typeCheck_9 = typeCheck.isBaseObject;\nvar typeCheck_10 = typeCheck.isMetadataObject;\nvar typeCheck_11 = typeCheck.isRefTarget;\nvar typeCheck_12 = typeCheck.isClassMetadata;\nvar typeCheck_13 = typeCheck.isProvideMetadata;\nvar typeCheck_14 = typeCheck.isString;\nvar typeCheck_15 = typeCheck.isBoolean;\nvar typeCheck_16 = typeCheck.isNumber;\nvar typeCheck_17 = typeCheck.isUndefined;\nvar typeCheck_18 = typeCheck.isNull;\nvar typeCheck_19 = typeCheck.isNullOrUndefined;\nvar typeCheck_20 = typeCheck.isArray;\nvar typeCheck_21 = typeCheck.isObject;\nvar typeCheck_22 = typeCheck.isTypeObject;\nvar typeCheck_23 = typeCheck.isDate;\nvar typeCheck_24 = typeCheck.isSymbol;\nvar typeCheck_25 = typeCheck.isRegExp;\nvar typeCheck_26 = typeCheck.isBaseType;\n\nvar PromiseUtil_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * defer\n *\n * @export\n * @class Defer\n * @template T\n */\nvar Defer = /** @class */ (function () {\n    function Defer() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    Defer.create = function (then) {\n        var defer = new Defer();\n        if (then) {\n            defer.promise = defer.promise.then(then);\n            return defer;\n        }\n        else {\n            return defer;\n        }\n    };\n    Defer.getClassAnnations = function () {\n        return { \"name\": \"Defer\", \"params\": { \"create\": [\"then\"], \"constructor\": [] } };\n    };\n    return Defer;\n}());\nexports.Defer = Defer;\n/**\n * promise util.\n */\nvar PromiseUtil;\n(function (PromiseUtil) {\n    /**\n     * create defer.\n     *\n     * @export\n     * @template T\n     * @param {((val: T) => T | PromiseLike<T>)} [then]\n     * @returns {Defer<T>}\n     */\n    function defer(then) {\n        return Defer.create(then);\n    }\n    PromiseUtil.defer = defer;\n    /**\n     * foreach opter for promises.\n     *\n     * @export\n     * @template T\n     * @param {((T | PromiseLike<T> | ((value: T) => T | PromiseLike<T>))[])} promises\n     * @param {Express<T, any>} express\n     * @param {T} [defVal]\n     * @returns\n     */\n    function forEach(promises, express, defVal) {\n        var defer = new Defer();\n        var pf = Promise.resolve(defVal);\n        var length = promises ? promises.length : 0;\n        if (length) {\n            promises.forEach(function (p, idx) {\n                pf = pf.then(function (v) { return typeCheck.isFunction(p) ? p(v) : p; })\n                    .then(function (data) {\n                    if (express(data) === false) {\n                        defer.resolve('complete');\n                        return Promise.reject('complete');\n                    }\n                    else if (idx === length - 1) {\n                        defer.resolve('complete');\n                        return Promise.reject('complete');\n                    }\n                    return data;\n                });\n            });\n            pf.catch(function (err) {\n                return err;\n            });\n        }\n        else {\n            defer.reject('array empty.');\n        }\n        return defer.promise;\n    }\n    PromiseUtil.forEach = forEach;\n    /**\n     * run promise step by step.\n     *\n     * @export\n     * @template T\n     * @param {((T | PromiseLike<T> | ((value: T) => T | PromiseLike<T>))[])} promises\n     * @returns\n     */\n    function step(promises) {\n        var result = Promise.resolve(null);\n        promises.forEach(function (p) {\n            result = result.then(function (v) { return typeCheck.isFunction(p) ? p(v) : p; });\n        });\n        return result;\n    }\n    PromiseUtil.step = step;\n    /**\n     * find first validate value from promises.\n     *\n     * @export\n     * @template T\n     * @param {(...(T | PromiseLike<T> | ((value: T) => T | PromiseLike<T>))[])} promises\n     * @param {Express<T, boolean>} validate\n     * @returns\n     */\n    function find(promises, filter, defVal) {\n        var defer = new Defer();\n        forEach(promises, function (val) {\n            if (filter(val)) {\n                defer.resolve(val);\n                return false;\n            }\n            return true;\n        }, defVal)\n            .then(function () { return defer.resolve(null); })\n            .catch(function () {\n            defer.resolve(null);\n        });\n        return defer.promise;\n    }\n    PromiseUtil.find = find;\n    /**\n     * run action in chain.\n     *\n     * @export\n     * @template T\n     * @param {ActionHandle<T>[]} handles\n     * @param {T} ctx\n     * @param {() => Promise<void>} [next]\n     * @returns {Promise<void>}\n     */\n    function runInChain(handles, ctx, next) {\n        var index = -1;\n        return dispatch(0);\n        function dispatch(idx) {\n            if (idx <= index) {\n                return Promise.reject('next called mutiple times');\n            }\n            index = idx;\n            var handle = idx < handles.length ? handles[idx] : null;\n            if (idx === handles.length) {\n                handle = next;\n            }\n            if (!handle) {\n                return Promise.resolve();\n            }\n            try {\n                return Promise.resolve(handle(ctx, dispatch.bind(null, idx + 1)));\n            }\n            catch (err) {\n                return Promise.reject(err);\n            }\n        }\n    }\n    PromiseUtil.runInChain = runInChain;\n})(PromiseUtil = exports.PromiseUtil || (exports.PromiseUtil = {}));\n\n\n});\n\nunwrapExports(PromiseUtil_1);\nvar PromiseUtil_2 = PromiseUtil_1.Defer;\nvar PromiseUtil_3 = PromiseUtil_1.PromiseUtil;\n\nvar utils = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(typeCheck, exports);\ntslib_1.__exportStar(lang_1, exports);\ntslib_1.__exportStar(PromiseUtil_1, exports);\n\n\n});\n\nunwrapExports(utils);\n\nvar Registration_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * is registration class or not.\n *\n * @export\n * @param {*} target\n * @returns\n */\nfunction isRegistrationClass(target) {\n    if (utils.isClass(target)) {\n        return target.isIocRegClass === true;\n    }\n    return false;\n}\nexports.isRegistrationClass = isRegistrationClass;\n/**\n * inject token.\n * @export\n * @class Registration\n * @template T\n */\nvar Registration = /** @class */ (function () {\n    /**\n     * Creates an instance of Registration.\n     * @param {(Token<T> | Token<any>)} provideType\n     * @param {string} desc\n     * @memberof Registration\n     */\n    function Registration(provideType, desc) {\n        this.type = '';\n        this.init(provideType, desc);\n    }\n    Registration.prototype.init = function (provideType, desc) {\n        if (provideType instanceof Registration) {\n            if (desc) {\n                this.classType = provideType.toString();\n                this.desc = desc;\n            }\n            else {\n                this.classType = provideType.getProvide();\n                this.desc = provideType.getDesc();\n            }\n        }\n        else {\n            this.classType = provideType;\n            this.desc = desc;\n        }\n    };\n    /**\n     * get provide.\n     *\n     * @returns {SymbolType<any>}\n     * @memberof Registration\n     */\n    Registration.prototype.getProvide = function () {\n        return this.classType;\n    };\n    /**\n     * get class.\n     *\n     * @returns\n     * @memberof Registration\n     */\n    Registration.prototype.getClass = function () {\n        if (utils.isClass(this.classType)) {\n            return this.classType;\n        }\n        return null;\n    };\n    /**\n     * get desc.\n     *\n     * @returns\n     * @memberof Registration\n     */\n    Registration.prototype.getDesc = function () {\n        return this.desc;\n    };\n    /**\n     * to string.\n     *\n     * @returns {string}\n     * @memberof Registration\n     */\n    Registration.prototype.toString = function () {\n        return this.format(this);\n    };\n    Registration.prototype.format = function (reg) {\n        if (reg instanceof Registration) {\n            var name_1 = '';\n            if (utils.isFunction(reg.classType)) {\n                name_1 = \"{\" + utils.lang.getClassName(reg.classType) + \"}\";\n            }\n            else if (reg.classType) {\n                name_1 = reg.classType.toString();\n            }\n            return [reg.type, name_1, reg.desc].filter(function (n) { return n; }).join('_');\n        }\n        else if (utils.isFunction(reg)) {\n            return \"{\" + utils.lang.getClassName(reg) + \"}\";\n        }\n        else if (reg) {\n            return reg.toString();\n        }\n        return '';\n    };\n    Registration.getClassAnnations = function () {\n        return { \"name\": \"Registration\", \"params\": { \"constructor\": [\"provideType\", \"desc\"], \"init\": [\"provideType\", \"desc\"], \"getProvide\": [], \"getClass\": [], \"getDesc\": [], \"toString\": [], \"format\": [\"reg\"] } };\n    };\n    Registration.isIocRegClass = true;\n    return Registration;\n}());\nexports.Registration = Registration;\n\n\n});\n\nunwrapExports(Registration_1);\nvar Registration_2 = Registration_1.isRegistrationClass;\nvar Registration_3 = Registration_1.Registration;\n\nvar InjectToken_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * inject token.\n *\n * @export\n * @class InjectToken\n * @extends {Registration<T>}\n * @template T\n */\nvar InjectToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectToken, _super);\n    function InjectToken(desc) {\n        return _super.call(this, desc, '') || this;\n    }\n    InjectToken.getClassAnnations = function () {\n        return { \"name\": \"InjectToken\", \"params\": { \"constructor\": [\"desc\"] } };\n    };\n    return InjectToken;\n}(Registration_1.Registration));\nexports.InjectToken = InjectToken;\n\n\n});\n\nunwrapExports(InjectToken_1);\nvar InjectToken_2 = InjectToken_1.InjectToken;\n\nvar IContainer = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * IContainer token.\n * it is a symbol id, you can use  @Inject, @Autowried or @Param to get container instance in yourself class.\n */\nexports.ContainerToken = new InjectToken_1.InjectToken('DI_IContainer');\n/**\n * resove way\n *\n * @export\n * @enum {number}\n */\nvar ResoveWay;\n(function (ResoveWay) {\n    /**\n     * current container.\n     */\n    ResoveWay[ResoveWay[\"current\"] = 1] = \"current\";\n    /**\n     * traverse all curr node children.\n     */\n    ResoveWay[ResoveWay[\"traverse\"] = 2] = \"traverse\";\n    /**\n     * bubble up all parent.\n     */\n    ResoveWay[ResoveWay[\"bubble\"] = 4] = \"bubble\";\n    /**\n     * current and children.\n     */\n    ResoveWay[ResoveWay[\"nodes\"] = 3] = \"nodes\";\n    /**\n     * current and bubble.\n     */\n    ResoveWay[ResoveWay[\"routeup\"] = 5] = \"routeup\";\n    /**\n     *  traverse of curr node, children.\n     */\n    ResoveWay[ResoveWay[\"all\"] = 7] = \"all\";\n})(ResoveWay = exports.ResoveWay || (exports.ResoveWay = {}));\n\n\n});\n\nunwrapExports(IContainer);\nvar IContainer_1 = IContainer.ContainerToken;\nvar IContainer_2 = IContainer.ResoveWay;\n\nvar types = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * reference target level.\n *\n * @export\n * @enum {number}\n */\nvar RefTagLevel;\n(function (RefTagLevel) {\n    /**\n     * ref taget self only\n     */\n    RefTagLevel[RefTagLevel[\"self\"] = 1] = \"self\";\n    /**\n     * ref taget provider.\n     */\n    RefTagLevel[RefTagLevel[\"providers\"] = 2] = \"providers\";\n    /**\n     * self provider\n     */\n    RefTagLevel[RefTagLevel[\"selfProviders\"] = 3] = \"selfProviders\";\n    /**\n     * ref target class chain.\n     */\n    RefTagLevel[RefTagLevel[\"chain\"] = 4] = \"chain\";\n    /**\n     * self chain.\n     */\n    RefTagLevel[RefTagLevel[\"selfChain\"] = 5] = \"selfChain\";\n    /**\n     * chain providers.\n     */\n    RefTagLevel[RefTagLevel[\"chainProviders\"] = 6] = \"chainProviders\";\n    /**\n     * ref all.\n     */\n    RefTagLevel[RefTagLevel[\"all\"] = 7] = \"all\";\n})(RefTagLevel = exports.RefTagLevel || (exports.RefTagLevel = {}));\n/**\n * State of type in ioc.\n *\n * @export\n * @enum {number}\n */\nvar IocState;\n(function (IocState) {\n    IocState[\"design\"] = \"design\";\n    IocState[\"runtime\"] = \"runtime\";\n})(IocState = exports.IocState || (exports.IocState = {}));\n/**\n * iterate way.\n *\n * @export\n * @enum {number}\n */\nvar Mode;\n(function (Mode) {\n    /**\n     * route up. iterate in parents.\n     */\n    Mode[Mode[\"route\"] = 1] = \"route\";\n    /**\n     * iterate in children.\n     */\n    Mode[Mode[\"children\"] = 2] = \"children\";\n    /**\n     * iterate as tree map. node first\n     */\n    Mode[Mode[\"traverse\"] = 3] = \"traverse\";\n    /**\n     * iterate as tree map. node last\n     */\n    Mode[Mode[\"traverseLast\"] = 4] = \"traverseLast\";\n})(Mode = exports.Mode || (exports.Mode = {}));\n\n\n});\n\nunwrapExports(types);\nvar types_1 = types.RefTagLevel;\nvar types_2 = types.IocState;\nvar types_3 = types.Mode;\n\nvar IMethodAccessor = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * IMethodAccessor interface symbol.\n * it is a symbol id, you can register yourself MethodAccessor for this.\n */\nexports.MethodAccessorToken = new InjectToken_1.InjectToken('DI_IMethodAccessor');\n\n\n});\n\nunwrapExports(IMethodAccessor);\nvar IMethodAccessor_1 = IMethodAccessor.MethodAccessorToken;\n\nvar NullComponent_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * null component.\n *\n * @export\n * @class NullComponent\n * @implements {IComponent}\n */\nvar NullComponent = /** @class */ (function () {\n    function NullComponent() {\n    }\n    NullComponent.prototype.isEmpty = function () {\n        return true;\n    };\n    NullComponent.prototype.add = function (action) {\n        return this;\n    };\n    NullComponent.prototype.remove = function (action) {\n        return this;\n    };\n    NullComponent.prototype.find = function (express, mode) {\n        return exports.NullNode;\n    };\n    NullComponent.prototype.filter = function (express, mode) {\n        return [];\n    };\n    NullComponent.prototype.each = function (express, mode) {\n    };\n    NullComponent.prototype.trans = function (express) {\n    };\n    NullComponent.prototype.transAfter = function (express) {\n    };\n    NullComponent.prototype.routeUp = function (express) {\n    };\n    NullComponent.prototype.equals = function (node) {\n        return node === exports.NullNode;\n    };\n    NullComponent.prototype.empty = function () {\n        return exports.NullNode;\n    };\n    NullComponent.getClassAnnations = function () {\n        return { \"name\": \"NullComponent\", \"params\": { \"isEmpty\": [], \"add\": [\"action\"], \"remove\": [\"action\"], \"find\": [\"express\", \"mode\"], \"filter\": [\"express\", \"mode\"], \"each\": [\"express\", \"mode\"], \"trans\": [\"express\"], \"transAfter\": [\"express\"], \"routeUp\": [\"express\"], \"equals\": [\"node\"], \"empty\": [] } };\n    };\n    return NullComponent;\n}());\nexports.NullComponent = NullComponent;\n/**\n * Null node\n */\nexports.NullNode = new NullComponent();\n\n\n});\n\nunwrapExports(NullComponent_1);\nvar NullComponent_2 = NullComponent_1.NullComponent;\nvar NullComponent_3 = NullComponent_1.NullNode;\n\nvar GComposite_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * generics composite\n *\n * @export\n * @class GComposite\n * @implements {GComponent<T>}\n * @template T\n */\nvar GComposite = /** @class */ (function () {\n    function GComposite(name) {\n        this.name = name;\n        this.children = [];\n    }\n    GComposite.prototype.add = function (node) {\n        node.parent = this;\n        this.children.push(node);\n        return this;\n    };\n    GComposite.prototype.remove = function (node) {\n        var component;\n        if (utils.isString(node)) {\n            component = this.find(function (cmp) { return utils.isString(node) ? cmp.name === node : cmp.equals(node); });\n        }\n        else if (node) {\n            component = node;\n        }\n        else {\n            component = this;\n        }\n        if (!component.parent) {\n            return this;\n        }\n        else if (this.equals(component.parent)) {\n            this.children.splice(this.children.indexOf(component), 1);\n            component.parent = null;\n            return this;\n        }\n        else {\n            component.parent.remove(component);\n            return null;\n        }\n    };\n    GComposite.prototype.find = function (express, mode) {\n        var component;\n        this.each(function (item) {\n            if (component) {\n                return false;\n            }\n            var isFinded = utils.isFunction(express) ? express(item) : express === (item);\n            if (isFinded) {\n                component = item;\n                return false;\n            }\n            return true;\n        }, mode);\n        return (component || this.empty());\n    };\n    GComposite.prototype.filter = function (express, mode) {\n        var nodes = [];\n        this.each(function (item) {\n            if (express(item)) {\n                nodes.push(item);\n            }\n        }, mode);\n        return nodes;\n    };\n    GComposite.prototype.each = function (iterate, mode) {\n        mode = mode || types.Mode.traverse;\n        var r;\n        switch (mode) {\n            case types.Mode.route:\n                r = this.routeUp(iterate);\n                break;\n            case types.Mode.children:\n                r = this.eachChildren(iterate);\n                break;\n            case types.Mode.traverse:\n                r = this.trans(iterate);\n                break;\n            case types.Mode.traverseLast:\n                r = this.transAfter(iterate);\n                break;\n            default:\n                r = this.trans(iterate);\n                break;\n        }\n        return r;\n    };\n    GComposite.prototype.eachChildren = function (iterate) {\n        (this.children || []).forEach(function (item) {\n            return iterate(item);\n        });\n    };\n    /**\n     *do express work in routing.\n     *\n     *@param {Express<T, void | boolean>} express\n     *\n     *@memberOf IComponent\n     */\n    GComposite.prototype.routeUp = function (iterate) {\n        var curr = this;\n        if (iterate(curr) === false) {\n            return false;\n        }\n        \n        if (this.parent && this.parent.routeUp) {\n            return this.parent.routeUp(iterate);\n        }\n    };\n    /**\n     *translate all sub context to do express work.\n     *\n     *@param {Express<T, void | boolean>} express\n     *\n     *@memberOf IComponent\n     */\n    GComposite.prototype.trans = function (express) {\n        var curr = this;\n        if (express(curr) === false) {\n            return false;\n        }\n        var children = this.children || [];\n        for (var i = 0; i < children.length; i++) {\n            var result = children[i].trans(express);\n            if (result === false) {\n                return result;\n            }\n        }\n        return true;\n    };\n    GComposite.prototype.transAfter = function (express) {\n        var children = this.children || [];\n        for (var i = 0; i < children.length; i++) {\n            var result = children[i].transAfter(express);\n            if (result === false) {\n                return false;\n            }\n        }\n        var curr = this;\n        if (express(curr) === false) {\n            return false;\n        }\n        return true;\n    };\n    GComposite.prototype.equals = function (node) {\n        return this === node;\n    };\n    GComposite.prototype.empty = function () {\n        return NullComponent_1.NullNode;\n    };\n    GComposite.prototype.isEmpty = function () {\n        return this.equals(this.empty());\n    };\n    GComposite.getClassAnnations = function () {\n        return { \"name\": \"GComposite\", \"params\": { \"constructor\": [\"name\"], \"add\": [\"node\"], \"remove\": [\"node\"], \"find\": [\"express\", \"mode\"], \"filter\": [\"express\", \"mode\"], \"each\": [\"iterate\", \"mode\"], \"eachChildren\": [\"iterate\"], \"routeUp\": [\"iterate\"], \"trans\": [\"express\"], \"transAfter\": [\"express\"], \"equals\": [\"node\"], \"empty\": [], \"isEmpty\": [] } };\n    };\n    return GComposite;\n}());\nexports.GComposite = GComposite;\n\n\n});\n\nunwrapExports(GComposite_1);\nvar GComposite_2 = GComposite_1.GComposite;\n\nvar Composite_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * compoiste.\n *\n * @export\n * @class Composite\n * @implements {IComponent}\n */\nvar Composite = /** @class */ (function (_super) {\n    tslib_1.__extends(Composite, _super);\n    function Composite(name) {\n        return _super.call(this, name) || this;\n    }\n    Composite.prototype.find = function (express, mode) {\n        return _super.prototype.find.call(this, express, mode);\n    };\n    Composite.prototype.filter = function (express, mode) {\n        return _super.prototype.filter.call(this, express, mode);\n    };\n    Composite.prototype.each = function (express, mode) {\n        return _super.prototype.each.call(this, express, mode);\n    };\n    Composite.prototype.eachChildren = function (express) {\n        _super.prototype.eachChildren.call(this, express);\n    };\n    Composite.getClassAnnations = function () {\n        return { \"name\": \"Composite\", \"params\": { \"constructor\": [\"name\"], \"find\": [\"express\", \"mode\"], \"filter\": [\"express\", \"mode\"], \"each\": [\"express\", \"mode\"], \"eachChildren\": [\"express\"] } };\n    };\n    return Composite;\n}(GComposite_1.GComposite));\nexports.Composite = Composite;\n\n\n});\n\nunwrapExports(Composite_1);\nvar Composite_2 = Composite_1.Composite;\n\nvar components = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(Composite_1, exports);\ntslib_1.__exportStar(GComposite_1, exports);\ntslib_1.__exportStar(NullComponent_1, exports);\n\n\n});\n\nunwrapExports(components);\n\nvar NullAction = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * Null action.\n *\n * @class NullActionClass\n * @extends {NullComponent}\n * @implements {ActionComponent}\n */\nvar NullActionClass = /** @class */ (function (_super) {\n    tslib_1.__extends(NullActionClass, _super);\n    function NullActionClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullActionClass.prototype.insert = function (action, index) {\n        return this;\n    };\n    NullActionClass.prototype.execute = function (container, data, name) {\n    };\n    NullActionClass.prototype.empty = function () {\n        return exports.NullAction;\n    };\n    NullActionClass.getClassAnnations = function () {\n        return { \"name\": \"NullActionClass\", \"params\": { \"insert\": [\"action\", \"index\"], \"execute\": [\"container\", \"data\", \"name\"], \"empty\": [] } };\n    };\n    return NullActionClass;\n}(components.NullComponent));\n/**\n * Null Action\n */\nexports.NullAction = new NullActionClass();\n\n\n});\n\nunwrapExports(NullAction);\nvar NullAction_1 = NullAction.NullAction;\n\nvar ActionComposite_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * action composite\n *\n * @export\n * @class ActionComposite\n * @extends {GComposite<ActionComponent>}\n * @implements {ActionComponent}\n */\nvar ActionComposite = /** @class */ (function (_super) {\n    tslib_1.__extends(ActionComposite, _super);\n    function ActionComposite(name) {\n        var _this = _super.call(this, name) || this;\n        _this.children = [];\n        return _this;\n    }\n    ActionComposite.prototype.insert = function (node, index) {\n        node.parent = this;\n        if (index < 0) {\n            index = 0;\n        }\n        else if (index >= this.children.length) {\n            index = this.children.length - 1;\n        }\n        this.children.splice(index, 0, node);\n        return this;\n    };\n    ActionComposite.prototype.execute = function (container, data, name) {\n        if (name) {\n            this.find(function (it) { return it.name === name; })\n                .execute(container, data);\n        }\n        else {\n            this.trans(function (action) {\n                if (action instanceof ActionComposite) {\n                    action.working(container, data);\n                }\n            });\n        }\n    };\n    ActionComposite.prototype.empty = function () {\n        return NullAction.NullAction;\n    };\n    ActionComposite.prototype.working = function (container, data) {\n        // do nothing.\n    };\n    ActionComposite.getClassAnnations = function () {\n        return { \"name\": \"ActionComposite\", \"params\": { \"constructor\": [\"name\"], \"insert\": [\"node\", \"index\"], \"execute\": [\"container\", \"data\", \"name\"], \"empty\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return ActionComposite;\n}(components.GComposite));\nexports.ActionComposite = ActionComposite;\n\n\n});\n\nunwrapExports(ActionComposite_1);\nvar ActionComposite_2 = ActionComposite_1.ActionComposite;\n\nvar LifeState_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * life state.\n *\n * @export\n * @enum {number}\n */\nvar LifeState;\n(function (LifeState) {\n    /**\n     * before create constructor Args\n     */\n    LifeState[\"beforeCreateArgs\"] = \"beforeCreateArgs\";\n    /**\n     * before constructor advice action.\n     */\n    LifeState[\"beforeConstructor\"] = \"beforeConstructor\";\n    /**\n     * after constructor advice action.\n     */\n    LifeState[\"afterConstructor\"] = \"afterConstructor\";\n    /**\n     * on init.\n     */\n    LifeState[\"onInit\"] = \"onInit\";\n    /**\n     * after init.\n     */\n    LifeState[\"AfterInit\"] = \"AfterInit\";\n})(LifeState = exports.LifeState || (exports.LifeState = {}));\n\n\n});\n\nunwrapExports(LifeState_1);\nvar LifeState_2 = LifeState_1.LifeState;\n\nvar CoreActions_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * cores decorator actions\n *\n * @export\n */\nvar CoreActions;\n(function (CoreActions) {\n    /**\n     * the action bind parameter type form metadata.\n     */\n    CoreActions[\"bindParameterType\"] = \"bindParameterType\";\n    /**\n     * the action bind Property type from metadata.\n     */\n    CoreActions[\"bindPropertyType\"] = \"bindPropertyType\";\n    /**\n     * inject property action.\n     */\n    CoreActions[\"injectProperty\"] = \"injectProperty\";\n    /**\n     * class provider bind action.\n     */\n    CoreActions[\"bindProvider\"] = \"bindProvider\";\n    /**\n     * bind parameter provider action.\n     */\n    CoreActions[\"bindParameterProviders\"] = \"bindParameterProviders\";\n    /**\n     * cache action.\n     */\n    CoreActions[\"cache\"] = \"cache\";\n    /**\n     * component init action.  after constructor befor property inject.\n     */\n    CoreActions[\"componentBeforeInit\"] = \"componentBeforeInit\";\n    /**\n     * component on init hooks. after property inject.\n     */\n    CoreActions[\"componentInit\"] = \"componentInit\";\n    /**\n     * component after init hooks. after component init.\n     */\n    CoreActions[\"componentAfterInit\"] = \"componentAfterInit\";\n    /**\n     * singleton action.\n     */\n    CoreActions[\"singletion\"] = \"singletion\";\n    /**\n     * autorun action.\n     */\n    CoreActions[\"autorun\"] = \"autorun\";\n    /**\n     * method autorun action.\n     */\n    CoreActions[\"methodAutorun\"] = \"methodAutorun\";\n})(CoreActions = exports.CoreActions || (exports.CoreActions = {}));\n\n\n});\n\nunwrapExports(CoreActions_1);\nvar CoreActions_2 = CoreActions_1.CoreActions;\n\nvar ArgsIterator_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * args iterator.s\n *\n * @export\n * @class ArgsIterator\n */\nvar ArgsIterator = /** @class */ (function () {\n    function ArgsIterator(args) {\n        this.args = args;\n        this.idx = -1;\n        this.metadata = null;\n    }\n    ArgsIterator.prototype.isCompeted = function () {\n        return this.idx >= this.args.length;\n    };\n    ArgsIterator.prototype.end = function () {\n        this.idx = this.args.length;\n    };\n    ArgsIterator.prototype.next = function (express) {\n        this.idx++;\n        if (this.isCompeted()) {\n            return null;\n        }\n        var arg = this.args[this.idx];\n        if (express.isMetadata && express.isMetadata(arg)) {\n            this.metadata = utils.lang.assign(this.metadata || {}, arg);\n            this.end();\n        }\n        else if (express.match(arg)) {\n            this.metadata = this.metadata || {};\n            express.setMetadata(this.metadata, arg);\n        }\n        else if (utils.isMetadataObject(arg)) { // when match failed then check is base metadata.\n            this.metadata = utils.lang.assign(this.metadata || {}, arg);\n            this.end();\n        }\n        else {\n            this.end();\n        }\n    };\n    ArgsIterator.prototype.getArgs = function () {\n        return this.args;\n    };\n    ArgsIterator.prototype.getMetadata = function () {\n        return this.metadata;\n    };\n    ArgsIterator.getClassAnnations = function () {\n        return { \"name\": \"ArgsIterator\", \"params\": { \"constructor\": [\"args\"], \"isCompeted\": [], \"end\": [], \"next\": [\"express\"], \"getArgs\": [], \"getMetadata\": [] } };\n    };\n    return ArgsIterator;\n}());\nexports.ArgsIterator = ArgsIterator;\n\n\n});\n\nunwrapExports(ArgsIterator_1);\nvar ArgsIterator_2 = ArgsIterator_1.ArgsIterator;\n\nvar DecoratorType_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * decorator type category.\n *\n * @export\n * @enum {number}\n */\nvar DecoratorType;\n(function (DecoratorType) {\n    /**\n     * Class decorator\n     */\n    DecoratorType[DecoratorType[\"Class\"] = 1] = \"Class\";\n    /**\n     * Parameter decorator\n     */\n    DecoratorType[DecoratorType[\"Parameter\"] = 2] = \"Parameter\";\n    /**\n     * Property decorator\n     */\n    DecoratorType[DecoratorType[\"Property\"] = 4] = \"Property\";\n    /**\n     * Method decorator\n     */\n    DecoratorType[DecoratorType[\"Method\"] = 8] = \"Method\";\n    /**\n     * decorator for any where.\n     */\n    DecoratorType[DecoratorType[\"All\"] = 15] = \"All\";\n})(DecoratorType = exports.DecoratorType || (exports.DecoratorType = {}));\n\n\n});\n\nunwrapExports(DecoratorType_1);\nvar DecoratorType_2 = DecoratorType_1.DecoratorType;\n\nvar DecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\nexports.ParamerterName = 'paramerter_names';\n/**\n * create dectorator for class params props methods.\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {*}\n */\nfunction createDecorator(name, adapter, metadataExtends) {\n    var metaName = \"@\" + name;\n    var factory = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var metadata = null;\n        if (args.length < 1) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return storeMetadata(name, metaName, args, metadata, metadataExtends);\n            };\n        }\n        metadata = argsToMetadata(args, adapter);\n        if (metadata) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return storeMetadata(name, metaName, args, metadata, metadataExtends);\n            };\n        }\n        else {\n            if (args.length === 1) {\n                if (!utils.isClass(args[0])) {\n                    return function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return storeMetadata(name, metaName, args, metadata, metadataExtends);\n                    };\n                }\n            }\n        }\n        return storeMetadata(name, metaName, args, metadata, metadataExtends);\n    };\n    factory.toString = function () { return metaName; };\n    factory.decoratorType = DecoratorType_1.DecoratorType.All;\n    return factory;\n}\nexports.createDecorator = createDecorator;\nfunction argsToMetadata(args, adapter) {\n    var metadata = null;\n    if (args.length) {\n        if (adapter) {\n            var iterator = new ArgsIterator_1.ArgsIterator(args);\n            adapter(iterator);\n            metadata = iterator.getMetadata();\n        }\n        else if (args.length === 1 && utils.isMetadataObject(args[0])) {\n            metadata = args[0];\n        }\n    }\n    return metadata;\n}\nfunction storeMetadata(name, metaName, args, metadata, metadataExtends) {\n    var target;\n    switch (args.length) {\n        case 1:\n            target = args[0];\n            if (utils.isClass(target) || utils.isAbstractClass(target)) {\n                setTypeMetadata(name, metaName, target, metadata, metadataExtends);\n                return target;\n            }\n            break;\n        case 2:\n            target = args[0];\n            var propertyKey = args[1];\n            setPropertyMetadata(name, metaName, target, propertyKey, metadata, metadataExtends);\n            break;\n        case 3:\n            if (utils.isNumber(args[2])) {\n                target = args[0];\n                var propertyKey_1 = args[1];\n                var parameterIndex = args[2];\n                setParamMetadata(name, metaName, target, propertyKey_1, parameterIndex, metadata, metadataExtends);\n            }\n            else if (utils.isUndefined(args[2])) {\n                target = args[0];\n                var propertyKey_2 = args[1];\n                setPropertyMetadata(name, metaName, target, propertyKey_2, metadata, metadataExtends);\n            }\n            else {\n                target = args[0];\n                var propertyKey_3 = args[1];\n                var descriptor = args[2];\n                setMethodMetadata(name, metaName, target, propertyKey_3, descriptor, metadata, metadataExtends);\n                return descriptor;\n            }\n            break;\n        default:\n            throw new Error(\"Invalid @\" + name + \" Decorator declaration.\");\n    }\n}\n/**\n * get type decorators of class.\n *\n * @export\n * @param {(Type<any> | AbstractType<any>)} target\n * @returns {string[]}\n */\nfunction getClassDecorators(target) {\n    return Reflect.getOwnMetadataKeys(target)\n        .filter(function (d) {\n        if (!(d && utils.isString(d))) {\n            return false;\n        }\n        if (!/^@/.test(d)) {\n            return false;\n        }\n        return !/__\\w+$/.test(d);\n    });\n}\nexports.getClassDecorators = getClassDecorators;\n/**\n * get type decorators of class.\n *\n * @export\n * @param {(Type<any> | AbstractType<any>)} target\n * @returns {string[]}\n */\nfunction getMethodDecorators(target) {\n    return Reflect.getMetadataKeys(target)\n        .filter(function (d) { return d && utils.isString(d) && /^@\\S+__method$/.test(d); })\n        .map(function (d) { return d.replace(/__method$/ig, ''); });\n}\nexports.getMethodDecorators = getMethodDecorators;\n/**\n * get type decorators of class.\n *\n * @export\n * @param {(Type<any> | AbstractType<any>)} target\n * @returns {string[]}\n */\nfunction getPropDecorators(target) {\n    return Reflect.getMetadataKeys(target)\n        .filter(function (d) { return d && utils.isString(d) && /^@\\S+__props$/.test(d); })\n        .map(function (d) { return d.replace(/__props$/ig, ''); });\n}\nexports.getPropDecorators = getPropDecorators;\n/**\n * get type decorators of class.\n *\n * @export\n * @param {(Type<any> | AbstractType<any>)} target\n * @returns {string[]}\n */\nfunction getParamDecorators(target, propertyKey) {\n    return ((propertyKey && propertyKey !== 'constructor') ? Reflect.getMetadataKeys(target, propertyKey) : Reflect.getOwnMetadataKeys(utils.lang.getClass(target)) || [])\n        .filter(function (d) { return d && utils.isString(d) && /^@\\S+__params$/.test(d); })\n        .map(function (d) { return d.replace(/__params$/ig, ''); });\n}\nexports.getParamDecorators = getParamDecorators;\n/**\n * get all class metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns\n */\nfunction getTypeMetadata(decorator, target) {\n    var annotations = Reflect.getOwnMetadata(utils.isFunction(decorator) ? decorator.toString() : decorator, target);\n    annotations = utils.isArray(annotations) ? annotations : [];\n    return annotations;\n}\nexports.getTypeMetadata = getTypeMetadata;\n/**\n * get own class metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns\n */\nfunction getOwnTypeMetadata(decorator, target) {\n    var annotations = Reflect.getOwnMetadata(utils.isFunction(decorator) ? decorator.toString() : decorator, target);\n    annotations = utils.isArray(annotations) ? annotations : [];\n    return annotations;\n}\nexports.getOwnTypeMetadata = getOwnTypeMetadata;\n/**\n * has class decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @returns {boolean}\n */\nfunction hasClassMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasMetadata(name, target);\n}\nexports.hasClassMetadata = hasClassMetadata;\n/**\n * has own class decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @returns {boolean}\n */\nfunction hasOwnClassMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasOwnMetadata(name, target);\n}\nexports.hasOwnClassMetadata = hasOwnClassMetadata;\nfunction setTypeMetadata(name, metaName, target, metadata, metadataExtends) {\n    var annotations = getOwnTypeMetadata(metaName, target).slice(0);\n    var typeMetadata = (metadata || {});\n    if (!typeMetadata.type) {\n        typeMetadata.type = target;\n    }\n    typeMetadata.decorator = name;\n    if (metadataExtends) {\n        metadataExtends(typeMetadata);\n    }\n    annotations.unshift(typeMetadata);\n    setParamerterNames(target);\n    Reflect.defineMetadata(metaName, annotations, target);\n}\nvar methodMetadataExt = '__method';\n/**\n * get all method metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getMethodMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getMetadata(name + methodMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getMetadata(name + methodMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getMethodMetadata = getMethodMetadata;\n/**\n * get own method metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getOwnMethodMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getOwnMetadata(name + methodMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getOwnMetadata(name + methodMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getOwnMethodMetadata = getOwnMethodMetadata;\n/**\n * has own method decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @param {(string | symbol)} [propertyKey]\n * @returns {boolean}\n */\nfunction hasOwnMethodMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    if (propertyKey) {\n        var meta = getOwnMethodMetadata(name, target);\n        return meta && meta.hasOwnProperty(propertyKey);\n    }\n    else {\n        return Reflect.hasOwnMetadata(name + methodMetadataExt, target);\n    }\n}\nexports.hasOwnMethodMetadata = hasOwnMethodMetadata;\n/**\n * has method decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @param {(string | symbol)} [propertyKey]\n * @returns {boolean}\n */\nfunction hasMethodMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    if (propertyKey) {\n        var meta = getMethodMetadata(name, target);\n        return meta && meta.hasOwnProperty(propertyKey);\n    }\n    else {\n        return Reflect.hasMetadata(name + methodMetadataExt, target);\n    }\n}\nexports.hasMethodMetadata = hasMethodMetadata;\nfunction setMethodMetadata(name, metaName, target, propertyKey, descriptor, metadata, metadataExtends) {\n    var meta = utils.lang.assign({}, getOwnMethodMetadata(metaName, target));\n    meta[propertyKey] = meta[propertyKey] || [];\n    var methodMeadata = (metadata || {});\n    methodMeadata.decorator = name;\n    methodMeadata.propertyKey = propertyKey;\n    // methodMeadata.descriptor = descriptor;\n    if (metadataExtends) {\n        metadataExtends(methodMeadata);\n    }\n    meta[propertyKey].unshift(methodMeadata);\n    Reflect.defineMetadata(metaName + methodMetadataExt, meta, target.constructor);\n}\nvar propertyMetadataExt = '__props';\n/**\n * get all property metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getPropertyMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getMetadata(name + propertyMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getMetadata(name + propertyMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getPropertyMetadata = getPropertyMetadata;\n/**\n * get own property metadata of one specail decorator in target type.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @returns {ObjectMap<T[]>}\n */\nfunction getOwnPropertyMetadata(decorator, target) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var meta = Reflect.getOwnMetadata(name + propertyMetadataExt, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getOwnMetadata(name + propertyMetadataExt, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getOwnPropertyMetadata = getOwnPropertyMetadata;\n/**\n * has property decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {Type<any>} target\n * @param {(string | symbol)} [propertyKey]\n * @returns {boolean}\n */\nfunction hasPropertyMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    if (propertyKey) {\n        var meta = getPropertyMetadata(name, target);\n        return meta && meta.hasOwnProperty(propertyKey);\n    }\n    else {\n        return Reflect.hasMetadata(name + propertyMetadataExt, target);\n    }\n}\nexports.hasPropertyMetadata = hasPropertyMetadata;\nfunction setPropertyMetadata(name, metaName, target, propertyKey, metadata, metadataExtends) {\n    var meta = utils.lang.assign({}, getOwnPropertyMetadata(metaName, target));\n    var propmetadata = (metadata || {});\n    propmetadata.propertyKey = propertyKey;\n    propmetadata.decorator = name;\n    if (!propmetadata.type) {\n        var t = Reflect.getMetadata('design:type', target, propertyKey);\n        if (!t) {\n            // Needed to support react native inheritance\n            t = Reflect.getMetadata('design:type', target.constructor, propertyKey);\n        }\n        propmetadata.type = t;\n    }\n    if (metadataExtends) {\n        metadataExtends(propmetadata);\n    }\n    if (!meta[propertyKey] || !utils.isArray(meta[propertyKey])) {\n        meta[propertyKey] = [];\n    }\n    meta[propertyKey].unshift(propmetadata);\n    Reflect.defineMetadata(metaName + propertyMetadataExt, meta, target.constructor);\n}\nvar paramsMetadataExt = '__params';\n/**\n * get paramerter metadata of one specail decorator in target method.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {T[][]}\n */\nfunction getParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var parameters = Reflect.getMetadata(name + paramsMetadataExt, target, propertyKey);\n    parameters = utils.isArray(parameters) ? parameters : [];\n    return parameters;\n}\nexports.getParamMetadata = getParamMetadata;\n/**\n * get own paramerter metadata of one specail decorator in target method.\n *\n * @export\n * @template T\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {T[][]}\n */\nfunction getOwnParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    var parameters = Reflect.getOwnMetadata(name + paramsMetadataExt, target, propertyKey);\n    parameters = utils.isArray(parameters) ? parameters : [];\n    return parameters;\n}\nexports.getOwnParamMetadata = getOwnParamMetadata;\n/**\n * has param decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {boolean}\n */\nfunction hasParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasMetadata(name + paramsMetadataExt, target, propertyKey);\n}\nexports.hasParamMetadata = hasParamMetadata;\n/**\n * has param decorator metadata.\n *\n * @export\n * @param {(string | Function)} decorator\n * @param {(Type<any> | object)} target\n * @param {(string | symbol)} propertyKey\n * @returns {boolean}\n */\nfunction hasOwnParamMetadata(decorator, target, propertyKey) {\n    var name = utils.isFunction(decorator) ? decorator.toString() : decorator;\n    return Reflect.hasOwnMetadata(name + paramsMetadataExt, target, propertyKey);\n}\nexports.hasOwnParamMetadata = hasOwnParamMetadata;\nfunction setParamMetadata(name, metaName, target, propertyKey, parameterIndex, metadata, metadataExtends) {\n    var parameters = getOwnParamMetadata(metaName, target, propertyKey).slice(0);\n    // there might be gaps if some in between parameters do not have annotations.\n    // we pad with nulls.\n    while (parameters.length <= parameterIndex) {\n        parameters.push(null);\n    }\n    parameters[parameterIndex] = parameters[parameterIndex] || [];\n    var paramMeadata = (metadata || {});\n    if (!paramMeadata.type) {\n        var t = Reflect.getOwnMetadata('design:type', target, propertyKey);\n        if (!t) {\n            // Needed to support react native inheritance\n            t = Reflect.getOwnMetadata('design:type', target.constructor, propertyKey);\n        }\n        paramMeadata.type = t;\n    }\n    paramMeadata.propertyKey = propertyKey;\n    paramMeadata.decorator = name;\n    paramMeadata.index = parameterIndex;\n    if (metadataExtends) {\n        metadataExtends(paramMeadata);\n    }\n    parameters[parameterIndex].unshift(paramMeadata);\n    Reflect.defineMetadata(metaName + paramsMetadataExt, parameters, target, propertyKey);\n}\nfunction getParamerterNames(target) {\n    var meta = Reflect.getMetadata(exports.ParamerterName, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getMetadata(exports.ParamerterName, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getParamerterNames = getParamerterNames;\nfunction getOwnParamerterNames(target) {\n    var meta = Reflect.getOwnMetadata(exports.ParamerterName, target);\n    if (!meta || utils.isArray(meta) || !utils.lang.hasField(meta)) {\n        meta = Reflect.getOwnMetadata(exports.ParamerterName, target.constructor);\n    }\n    return utils.isArray(meta) ? {} : (meta || {});\n}\nexports.getOwnParamerterNames = getOwnParamerterNames;\nfunction setParamerterNames(target) {\n    var meta = utils.lang.assign({}, getParamerterNames(target));\n    var descriptors = Object.getOwnPropertyDescriptors(target.prototype);\n    var isUglify = /^[a-z]/.test(target.name);\n    var anName = '';\n    var classAnnations = utils.lang.getClassAnnations(target);\n    if (classAnnations && classAnnations.params) {\n        anName = classAnnations.name;\n        meta = utils.lang.assign(meta, classAnnations.params);\n    }\n    if (!isUglify && target.name !== anName) {\n        utils.lang.forIn(descriptors, function (item, name) {\n            if (name !== 'constructor') {\n                if (item.value) {\n                    meta[name] = getParamNames(item.value);\n                }\n                if (item.set) {\n                    meta[name] = getParamNames(item.set);\n                }\n            }\n        });\n        meta['constructor'] = getParamNames(target.prototype.constructor);\n    }\n    Reflect.defineMetadata(exports.ParamerterName, meta, target);\n}\nexports.setParamerterNames = setParamerterNames;\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar ARGUMENT_NAMES = /([^\\s,]+)/g;\nfunction getParamNames(func) {\n    if (!utils.isFunction(func)) {\n        return [];\n    }\n    var fnStr = func.toString().replace(STRIP_COMMENTS, '');\n    var result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n    if (result === null) {\n        result = [];\n    }\n    return result;\n}\n\n\n});\n\nunwrapExports(DecoratorFactory);\nvar DecoratorFactory_1 = DecoratorFactory.ParamerterName;\nvar DecoratorFactory_2 = DecoratorFactory.createDecorator;\nvar DecoratorFactory_3 = DecoratorFactory.getClassDecorators;\nvar DecoratorFactory_4 = DecoratorFactory.getMethodDecorators;\nvar DecoratorFactory_5 = DecoratorFactory.getPropDecorators;\nvar DecoratorFactory_6 = DecoratorFactory.getParamDecorators;\nvar DecoratorFactory_7 = DecoratorFactory.getTypeMetadata;\nvar DecoratorFactory_8 = DecoratorFactory.getOwnTypeMetadata;\nvar DecoratorFactory_9 = DecoratorFactory.hasClassMetadata;\nvar DecoratorFactory_10 = DecoratorFactory.hasOwnClassMetadata;\nvar DecoratorFactory_11 = DecoratorFactory.getMethodMetadata;\nvar DecoratorFactory_12 = DecoratorFactory.getOwnMethodMetadata;\nvar DecoratorFactory_13 = DecoratorFactory.hasOwnMethodMetadata;\nvar DecoratorFactory_14 = DecoratorFactory.hasMethodMetadata;\nvar DecoratorFactory_15 = DecoratorFactory.getPropertyMetadata;\nvar DecoratorFactory_16 = DecoratorFactory.getOwnPropertyMetadata;\nvar DecoratorFactory_17 = DecoratorFactory.hasPropertyMetadata;\nvar DecoratorFactory_18 = DecoratorFactory.getParamMetadata;\nvar DecoratorFactory_19 = DecoratorFactory.getOwnParamMetadata;\nvar DecoratorFactory_20 = DecoratorFactory.hasParamMetadata;\nvar DecoratorFactory_21 = DecoratorFactory.hasOwnParamMetadata;\nvar DecoratorFactory_22 = DecoratorFactory.getParamerterNames;\nvar DecoratorFactory_23 = DecoratorFactory.getOwnParamerterNames;\nvar DecoratorFactory_24 = DecoratorFactory.setParamerterNames;\n\nvar ClassDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * create class decorator\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {*}\n */\nfunction createClassDecorator(name, adapter, metadataExtends) {\n    var classAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            match: function (arg) { return arg && (utils.isSymbol(arg) || utils.isString(arg) || (utils.isObject(arg) && arg instanceof Registration_1.Registration)); },\n            setMetadata: function (metadata, arg) {\n                metadata.provide = arg;\n            }\n        });\n        args.next({\n            match: function (arg) { return utils.isString(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.alias = arg;\n            }\n        });\n        args.next({\n            match: function (arg) { return utils.isBoolean(arg) || utils.isNumber(arg) || utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                if (utils.isBoolean(arg)) {\n                    metadata.singleton = arg;\n                }\n                else if (utils.isNumber(arg)) {\n                    metadata.expires = arg;\n                }\n                else if (utils.isToken(arg)) {\n                    metadata.refs = { target: arg, provide: metadata.provide || metadata.type, alias: metadata.alias };\n                }\n            }\n        });\n        args.next({\n            match: function (arg) { return utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.expires = arg;\n            }\n        });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, classAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Class;\n    return decorator;\n}\nexports.createClassDecorator = createClassDecorator;\n\n\n});\n\nunwrapExports(ClassDecoratorFactory);\nvar ClassDecoratorFactory_1 = ClassDecoratorFactory.createClassDecorator;\n\nvar MethodDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * create method decorator.\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns\n */\nfunction createMethodDecorator(name, adapter, metadataExtends) {\n    var methodAdapter = function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            match: function (arg) { return utils.isArray(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.providers = arg;\n            }\n        });\n    };\n    var decorator = DecoratorFactory.createDecorator(name, methodAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Method;\n    return decorator;\n}\nexports.createMethodDecorator = createMethodDecorator;\n\n\n});\n\nunwrapExports(MethodDecoratorFactory);\nvar MethodDecoratorFactory_1 = MethodDecoratorFactory.createMethodDecorator;\n\nvar ParamDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * create parameter decorator.\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns\n */\nfunction createParamDecorator(name, adapter, metadataExtends) {\n    var paramAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            isMetadata: function (arg) { return utils.isProvideMetadata(arg, 'index'); },\n            match: function (arg) { return utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.provider = arg;\n            }\n        });\n        // args.next<T>({\n        //     match: (arg) => isString(arg),\n        //     setMetadata: (metadata, arg) => {\n        //         metadata.alias = arg;\n        //     }\n        // });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, paramAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Parameter;\n    return decorator;\n}\nexports.createParamDecorator = createParamDecorator;\n\n\n});\n\nunwrapExports(ParamDecoratorFactory);\nvar ParamDecoratorFactory_1 = ParamDecoratorFactory.createParamDecorator;\n\nvar PropertyDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * create property decorator.\n *\n * @export\n * @template T metadata type.\n * @param {string} name decorator name.\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns\n */\nfunction createPropDecorator(name, adapter, metadataExtends) {\n    var propPropAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            isMetadata: function (arg) { return utils.isProvideMetadata(arg); },\n            match: function (arg) { return utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.provider = arg;\n            }\n        });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, propPropAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Property;\n    return decorator;\n}\nexports.createPropDecorator = createPropDecorator;\n\n\n});\n\nunwrapExports(PropertyDecoratorFactory);\nvar PropertyDecoratorFactory_1 = PropertyDecoratorFactory.createPropDecorator;\n\nvar ParamPropDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * create parameter or property decorator\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IParamPropDecorator<T>}\n */\nfunction createParamPropDecorator(name, adapter, metadataExtends) {\n    var paramPropAdapter = (function (args) {\n        if (adapter) {\n            adapter(args);\n        }\n        args.next({\n            isMetadata: function (arg) { return utils.isProvideMetadata(arg, 'index'); },\n            match: function (arg) { return utils.isToken(arg); },\n            setMetadata: function (metadata, arg) {\n                metadata.provider = arg;\n            }\n        });\n        // args.next<T>({\n        //     match: (arg) => isString(arg),\n        //     setMetadata: (metadata, arg) => {\n        //         metadata.alias = arg;\n        //     }\n        // });\n    });\n    var decorator = DecoratorFactory.createDecorator(name, paramPropAdapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Property | DecoratorType_1.DecoratorType.Parameter;\n    return decorator;\n}\nexports.createParamPropDecorator = createParamPropDecorator;\n\n\n});\n\nunwrapExports(ParamPropDecoratorFactory);\nvar ParamPropDecoratorFactory_1 = ParamPropDecoratorFactory.createParamPropDecorator;\n\nvar ClassMethodDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * create decorator for class and method.\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IClassMethodDecorator<T>}\n */\nfunction createClassMethodDecorator(name, adapter, metadataExtends) {\n    var decorator = DecoratorFactory.createDecorator(name, adapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Class | DecoratorType_1.DecoratorType.Method;\n    return decorator;\n}\nexports.createClassMethodDecorator = createClassMethodDecorator;\n\n\n});\n\nunwrapExports(ClassMethodDecoratorFactory);\nvar ClassMethodDecoratorFactory_1 = ClassMethodDecoratorFactory.createClassMethodDecorator;\n\nvar MethodPropDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * create method or property decorator\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IMethodPropDecorator<T>}\n */\nfunction createMethodPropDecorator(name, adapter, metadataExtends) {\n    var decorator = DecoratorFactory.createDecorator(name, adapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Method | DecoratorType_1.DecoratorType.Property;\n    return decorator;\n}\nexports.createMethodPropDecorator = createMethodPropDecorator;\n\n\n});\n\nunwrapExports(MethodPropDecoratorFactory);\nvar MethodPropDecoratorFactory_1 = MethodPropDecoratorFactory.createMethodPropDecorator;\n\nvar MethodPropParamDecoratorFactory = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * create method, property or parameter decorator.\n *\n * @export\n * @template T\n * @param {string} name\n * @param {MetadataAdapter} [adapter]  metadata adapter\n * @param {MetadataExtends<T>} [metadataExtends] add extents for metadata.\n * @returns {IMethodPropParamDecorator<T>}\n */\nfunction createMethodPropParamDecorator(name, adapter, metadataExtends) {\n    var decorator = DecoratorFactory.createDecorator(name, adapter, metadataExtends);\n    decorator.decoratorType = DecoratorType_1.DecoratorType.Method | DecoratorType_1.DecoratorType.Property | DecoratorType_1.DecoratorType.Parameter;\n    return decorator;\n}\nexports.createMethodPropParamDecorator = createMethodPropParamDecorator;\n\n\n});\n\nunwrapExports(MethodPropParamDecoratorFactory);\nvar MethodPropParamDecoratorFactory_1 = MethodPropParamDecoratorFactory.createMethodPropParamDecorator;\n\nvar factories = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(ArgsIterator_1, exports);\ntslib_1.__exportStar(DecoratorType_1, exports);\ntslib_1.__exportStar(DecoratorFactory, exports);\ntslib_1.__exportStar(ClassDecoratorFactory, exports);\ntslib_1.__exportStar(MethodDecoratorFactory, exports);\ntslib_1.__exportStar(ParamDecoratorFactory, exports);\ntslib_1.__exportStar(PropertyDecoratorFactory, exports);\ntslib_1.__exportStar(ParamPropDecoratorFactory, exports);\ntslib_1.__exportStar(ClassMethodDecoratorFactory, exports);\ntslib_1.__exportStar(MethodPropDecoratorFactory, exports);\ntslib_1.__exportStar(MethodPropParamDecoratorFactory, exports);\n\n\n});\n\nunwrapExports(factories);\n\nvar InjectReference_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * Reference registration.\n *\n * @export\n * @class RefRegistration\n * @extends {Registration<T>}\n * @template T\n */\nvar RefRegistration = /** @class */ (function (_super) {\n    tslib_1.__extends(RefRegistration, _super);\n    function RefRegistration(provideType, desc) {\n        var _this = _super.call(this, provideType, desc) || this;\n        _this.type = 'Ref';\n        return _this;\n    }\n    RefRegistration.getClassAnnations = function () {\n        return { \"name\": \"RefRegistration\", \"params\": { \"constructor\": [\"provideType\", \"desc\"] } };\n    };\n    return RefRegistration;\n}(Registration_1.Registration));\nexports.RefRegistration = RefRegistration;\n/**\n * inject reference.\n *\n * @export\n * @class InjectReference\n * @extends {Registration<T>}\n * @template T\n */\nvar InjectReference = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectReference, _super);\n    function InjectReference(provideType, target) {\n        var _this = _super.call(this, provideType, '') || this;\n        _this.target = target;\n        return _this;\n    }\n    InjectReference.prototype.init = function (provideType) {\n        this.classType = this.format(provideType);\n    };\n    /**\n     * to string.\n     *\n     * @returns {string}\n     * @memberof Registration\n     */\n    InjectReference.prototype.toString = function () {\n        var key = _super.prototype.toString.call(this);\n        var target = this.format(this.target);\n        return \"Ref \" + key + \" for \" + target;\n    };\n    InjectReference.getClassAnnations = function () {\n        return { \"name\": \"InjectReference\", \"params\": { \"constructor\": [\"provideType\", \"target\"], \"init\": [\"provideType\"], \"toString\": [] } };\n    };\n    return InjectReference;\n}(Registration_1.Registration));\nexports.InjectReference = InjectReference;\n/**\n * is inject reference token or not.\n *\n * @export\n * @template T\n * @param {*} target\n * @returns {target is InjectReference<T>}\n */\nfunction isInjectReference(target) {\n    if (!target) {\n        return false;\n    }\n    return target instanceof InjectReference || (utils.isString(target) && /^Ref\\s+[\\w\\{\\}]+\\sfor/.test(target));\n}\nexports.isInjectReference = isInjectReference;\n/**\n * inject class provides token.\n *\n * @export\n * @class InjectClassProvidesToken\n * @extends {RefRegistration<IClassProvides>}\n */\nvar InjectClassProvidesToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectClassProvidesToken, _super);\n    function InjectClassProvidesToken(provideType) {\n        return _super.call(this, provideType, 'class_provides') || this;\n    }\n    InjectClassProvidesToken.getClassAnnations = function () {\n        return { \"name\": \"InjectClassProvidesToken\", \"params\": { \"constructor\": [\"provideType\"] } };\n    };\n    return InjectClassProvidesToken;\n}(RefRegistration));\nexports.InjectClassProvidesToken = InjectClassProvidesToken;\n\n\n});\n\nunwrapExports(InjectReference_1);\nvar InjectReference_2 = InjectReference_1.RefRegistration;\nvar InjectReference_3 = InjectReference_1.InjectReference;\nvar InjectReference_4 = InjectReference_1.isInjectReference;\nvar InjectReference_5 = InjectReference_1.InjectClassProvidesToken;\n\nvar BindProviderAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * bind provider action. for binding a factory to an token.\n *\n * @export\n * @class BindProviderAction\n * @extends {ActionComposite}\n */\nvar BindProviderAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindProviderAction, _super);\n    function BindProviderAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindProvider) || this;\n    }\n    BindProviderAction.prototype.working = function (container, data) {\n        var type = data.targetType;\n        var raiseContainer = data.raiseContainer;\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getClassDecorators(type, function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.bindProvider); });\n        var clpds = new InjectReference_1.InjectClassProvidesToken(type);\n        // has binding.\n        var classPds = raiseContainer.resolveValue(clpds) || { provides: [clpds.toString()], decors: [] };\n        if (classPds.decors.length) {\n            matchs = matchs.filter(function (d) { return classPds.decors.indexOf(d.name) < 0; });\n        }\n        if (matchs.length < 1) {\n            data.execResult = classPds.provides;\n            return;\n        }\n        matchs.forEach(function (surm) {\n            var metadata = factories.getOwnTypeMetadata(surm.name, type);\n            classPds.decors.push(surm.name);\n            if (Array.isArray(metadata) && metadata.length > 0) {\n                // bind all provider.\n                metadata.forEach(function (c) {\n                    if (!c) {\n                        return;\n                    }\n                    if (c.provide) {\n                        var provide = raiseContainer.getToken(c.provide, c.alias);\n                        classPds.provides.push(provide);\n                        raiseContainer.bindProvider(provide, c.type);\n                    }\n                    if (c.refs && c.refs.target) {\n                        raiseContainer.bindRefProvider(c.refs.target, c.refs.provide ? c.refs.provide : c.type, c.type, c.refs.provide ? c.refs.alias : '', function (tk) { return classPds.provides.push(tk); });\n                    }\n                    // class private provider.\n                    if (c.providers && c.providers.length) {\n                        raiseContainer.bindProviders.apply(raiseContainer, [c.type,\n                            function (refKey) { return classPds.provides.push(refKey); }].concat(c.providers));\n                    }\n                });\n            }\n        });\n        raiseContainer.bindProvider(clpds, classPds);\n        data.execResult = classPds.provides;\n    };\n    BindProviderAction.getClassAnnations = function () {\n        return { \"name\": \"BindProviderAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return BindProviderAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindProviderAction = BindProviderAction;\n\n\n});\n\nunwrapExports(BindProviderAction_1);\nvar BindProviderAction_2 = BindProviderAction_1.BindProviderAction;\n\nvar BindParameterTypeAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * bind parameter type action.\n *\n * @export\n * @class BindParameterTypeAction\n * @extends {ActionComposite}\n */\nvar BindParameterTypeAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindParameterTypeAction, _super);\n    function BindParameterTypeAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindParameterType) || this;\n    }\n    BindParameterTypeAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        var target = data.target;\n        var type = data.targetType;\n        var propertyKey = data.propertyKey;\n        var lifeScope = container.getLifeScope();\n        var designParams;\n        if (target && propertyKey) {\n            designParams = Reflect.getMetadata('design:paramtypes', target, propertyKey) || [];\n        }\n        else {\n            designParams = Reflect.getMetadata('design:paramtypes', type) || [];\n        }\n        designParams = designParams.slice(0);\n        designParams.forEach(function (dtype) {\n            if (lifeScope.isVaildDependence(dtype)) {\n                if (!container.has(dtype)) {\n                    container.register(dtype);\n                }\n            }\n        });\n        var matchs = lifeScope.getParameterDecorators(target || type, propertyKey, function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.bindParameterType); });\n        matchs.forEach(function (surm) {\n            var parameters = (target || propertyKey !== 'constructor') ? factories.getParamMetadata(surm.name, target, propertyKey) : factories.getOwnParamMetadata(surm.name, type);\n            if (utils.isArray(parameters) && parameters.length) {\n                parameters.forEach(function (params) {\n                    var parm = (utils.isArray(params) && params.length > 0) ? params[0] : null;\n                    if (parm && parm.index >= 0) {\n                        if (lifeScope.isVaildDependence(parm.provider)) {\n                            if (!container.has(parm.provider, parm.alias)) {\n                                container.register(container.getToken(parm.provider, parm.alias));\n                            }\n                        }\n                        if (lifeScope.isVaildDependence(parm.type)) {\n                            if (!container.has(parm.type)) {\n                                container.register(parm.type);\n                            }\n                        }\n                        var token = parm.provider ? container.getTokenKey(parm.provider, parm.alias) : parm.type;\n                        if (token) {\n                            designParams[parm.index] = token;\n                        }\n                    }\n                });\n            }\n        });\n        data.execResult = designParams;\n    };\n    BindParameterTypeAction.getClassAnnations = function () {\n        return { \"name\": \"BindParameterTypeAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return BindParameterTypeAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindParameterTypeAction = BindParameterTypeAction;\n\n\n});\n\nunwrapExports(BindParameterTypeAction_1);\nvar BindParameterTypeAction_2 = BindParameterTypeAction_1.BindParameterTypeAction;\n\nvar BindPropertyTypeAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * bind property type action. to get the property autowride token of Type calss.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar BindPropertyTypeAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindPropertyTypeAction, _super);\n    function BindPropertyTypeAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindPropertyType) || this;\n    }\n    BindPropertyTypeAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        var type = data.targetType;\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getPropertyDecorators(type, function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.bindPropertyType); });\n        var list = [];\n        matchs.forEach(function (surm) {\n            var propMetadata = factories.getPropertyMetadata(surm.name, type);\n            for (var n in propMetadata) {\n                list = list.concat(propMetadata[n]);\n            }\n            list = list.filter(function (n) { return !!n; });\n            list.forEach(function (prop) {\n                if (lifeScope.isVaildDependence(prop.provider)) {\n                    if (!container.has(prop.provider, prop.alias)) {\n                        container.register(container.getToken(prop.provider, prop.alias));\n                    }\n                }\n                if (lifeScope.isVaildDependence(prop.type)) {\n                    if (!container.has(prop.type)) {\n                        container.register(prop.type);\n                    }\n                }\n            });\n        });\n        data.execResult = list;\n    };\n    BindPropertyTypeAction.getClassAnnations = function () {\n        return { \"name\": \"BindPropertyTypeAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return BindPropertyTypeAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindPropertyTypeAction = BindPropertyTypeAction;\n\n\n});\n\nunwrapExports(BindPropertyTypeAction_1);\nvar BindPropertyTypeAction_2 = BindPropertyTypeAction_1.BindPropertyTypeAction;\n\nvar Provider_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n *  provider, to dynamic resovle instance of params in run time.\n *\n * @export\n * @class Provider\n */\nvar Provider = /** @class */ (function () {\n    function Provider(type, value) {\n        this.type = type;\n        this.value = value;\n    }\n    /**\n     * resolve provider value.\n     *\n     * @template T\n     * @param {IContainer} container\n     * @param {ProviderTypes[]} providers\n     * @returns {T}\n     * @memberof Provider\n     */\n    Provider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        if (utils.isUndefined(this.value)) {\n            return container.has(this.type) ? container.resolve.apply(container, [this.type].concat(providers)) : null;\n        }\n        else {\n            return this.value;\n        }\n    };\n    /**\n     * create provider.\n     *\n     * @static\n     * @param {Token<any>} type\n     * @param {(any)} value\n     * @returns Provider\n     * @memberof Provider\n     */\n    Provider.create = function (type, value) {\n        return new Provider(type, value);\n    };\n    /**\n     * create extends provider.\n     *\n     * @static\n     * @param {Token<any>} token\n     * @param {(any)} value\n     * @param {Express2<any, ExtendsProvider, void>} [extendsTarget]\n     * @returns {ExtendsProvider}\n     * @memberof Provider\n     */\n    Provider.createExtends = function (token, value, extendsTarget) {\n        return new ExtendsProvider(token, value, extendsTarget);\n    };\n    /**\n     * create invoked provider.\n     *\n     * @static\n     * @param {Token<any>} token\n     * @param {string} method\n     * @param {(any)} [value]\n     * @returns {InvokeProvider}\n     * @memberof Provider\n     */\n    Provider.createInvoke = function (token, method, value) {\n        return new InvokeProvider(token, method, value);\n    };\n    /**\n     * create param provider.\n     *\n     * @static\n     * @param {Token<any>} token\n     * @param {(any)} value\n     * @param {number} [index]\n     * @param {string} [method]\n     * @returns {ParamProvider}\n     * @memberof Provider\n     */\n    Provider.createParam = function (token, value, index, method) {\n        return new ParamProvider(token, value, index, method);\n    };\n    Provider.getClassAnnations = function () {\n        return { \"name\": \"Provider\", \"params\": { \"constructor\": [\"type\", \"value\"], \"resolve\": [\"container\", \"providers\"], \"create\": [\"type\", \"value\"], \"createExtends\": [\"token\", \"value\", \"extendsTarget\"], \"createInvoke\": [\"token\", \"method\", \"value\"], \"createParam\": [\"token\", \"value\", \"index\", \"method\"] } };\n    };\n    return Provider;\n}());\nexports.Provider = Provider;\n/**\n * InvokeProvider\n *\n * @export\n * @class InvokeProvider\n * @extends {Provider}\n */\nvar InvokeProvider = /** @class */ (function (_super) {\n    tslib_1.__extends(InvokeProvider, _super);\n    function InvokeProvider(type, method, value) {\n        var _this = _super.call(this, type, value) || this;\n        _this.method = method;\n        return _this;\n    }\n    InvokeProvider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        if (this.method) {\n            return container.syncInvoke.apply(container, [this.type, this.method].concat(providers));\n        }\n        return _super.prototype.resolve.apply(this, [container].concat(providers));\n    };\n    InvokeProvider.getClassAnnations = function () {\n        return { \"name\": \"InvokeProvider\", \"params\": { \"constructor\": [\"type\", \"method\", \"value\"], \"resolve\": [\"container\", \"providers\"] } };\n    };\n    return InvokeProvider;\n}(Provider));\nexports.InvokeProvider = InvokeProvider;\n/**\n * param provider.\n *\n * @export\n * @interface ParamProvider\n */\nvar ParamProvider = /** @class */ (function (_super) {\n    tslib_1.__extends(ParamProvider, _super);\n    function ParamProvider(token, value, index, method) {\n        var _this = _super.call(this, token, method, value) || this;\n        _this.index = index;\n        return _this;\n    }\n    /**\n     * resolve param\n     *\n     * @template T\n     * @param {IContainer} container\n     * @param {...ProviderTypes[]} providers\n     * @returns {T}\n     * @memberof ParamProvider\n     */\n    ParamProvider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        return _super.prototype.resolve.apply(this, [container].concat(providers));\n    };\n    ParamProvider.getClassAnnations = function () {\n        return { \"name\": \"ParamProvider\", \"params\": { \"constructor\": [\"token\", \"value\", \"index\", \"method\"], \"resolve\": [\"container\", \"providers\"] } };\n    };\n    return ParamProvider;\n}(InvokeProvider));\nexports.ParamProvider = ParamProvider;\n/**\n * Provider enable exntends target with provider in dynamic.\n *\n * @export\n * @class ExtendsProvider\n * @extends {Provider}\n */\nvar ExtendsProvider = /** @class */ (function (_super) {\n    tslib_1.__extends(ExtendsProvider, _super);\n    function ExtendsProvider(token, value, extendsTarget) {\n        var _this = _super.call(this, token, value) || this;\n        _this.extendsTarget = extendsTarget;\n        return _this;\n    }\n    ExtendsProvider.prototype.resolve = function (container) {\n        var providers = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers[_i - 1] = arguments[_i];\n        }\n        return _super.prototype.resolve.apply(this, [container].concat(providers));\n    };\n    ExtendsProvider.prototype.extends = function (target) {\n        if (utils.isObject(target) && utils.isFunction(this.extendsTarget)) {\n            this.extendsTarget(target, this);\n        }\n    };\n    ExtendsProvider.getClassAnnations = function () {\n        return { \"name\": \"ExtendsProvider\", \"params\": { \"constructor\": [\"token\", \"value\", \"extendsTarget\"], \"resolve\": [\"container\", \"providers\"], \"extends\": [\"target\"] } };\n    };\n    return ExtendsProvider;\n}(Provider));\nexports.ExtendsProvider = ExtendsProvider;\n\n\n});\n\nunwrapExports(Provider_1);\nvar Provider_2 = Provider_1.Provider;\nvar Provider_3 = Provider_1.InvokeProvider;\nvar Provider_4 = Provider_1.ParamProvider;\nvar Provider_5 = Provider_1.ExtendsProvider;\n\nvar ProviderMap_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n// use core-js in browser.\nexports.ProviderMapToken = new InjectToken_1.InjectToken('DI_ProviderMap');\n/**\n * Provider Map.\n *\n * note: object map provider can not resolve token.\n *\n * @export\n * @class Providers\n */\nvar ProviderMap = /** @class */ (function (_super) {\n    tslib_1.__extends(ProviderMap, _super);\n    function ProviderMap(container) {\n        var _this = _super.call(this) || this;\n        _this.container = container;\n        return _this;\n    }\n    /**\n     * has provide or not.\n     *\n     * @param {(Token<any> | number)} provide\n     * @returns {boolean}\n     * @memberof ProviderMap\n     */\n    ProviderMap.prototype.has = function (provide) {\n        return this.map.has(this.getTokenKey(provide));\n    };\n    ProviderMap.prototype.provides = function () {\n        return this.keys().filter(function (k) { return utils.isToken(k); });\n    };\n    /**\n     * get token key.\n     *\n     * @param {(Token<any> | number)} token\n     * @returns {(SymbolType<any> | number)}\n     * @memberof ProviderMap\n     */\n    ProviderMap.prototype.getTokenKey = function (token) {\n        if (utils.isToken(token)) {\n            return this.container.getTokenKey(token);\n        }\n        return token;\n    };\n    /**\n     * get token factory.\n     *\n     * @template T\n     * @param {(Token<T> | number)} provide\n     * @returns {InstanceFactory<T>}\n     * @memberof ProviderMap\n     */\n    ProviderMap.prototype.get = function (provide) {\n        return this.map.get(this.getTokenKey(provide));\n    };\n    ProviderMap.prototype.getTokenImpl = function (token, resway) {\n        return this.container.getTokenImpl(token, resway);\n    };\n    ProviderMap.prototype.unregister = function (token, resway) {\n        var key = this.getTokenKey(token);\n        if (this.map.has(key)) {\n            this.map.delete(key);\n        }\n        return this;\n    };\n    /**\n     * add and bind token provider.\n     *\n     * @template T\n     * @param {(Token<T> | number)} provide\n     * @param {(Token<T> | Factory<T>)} provider\n     * @returns {this}\n     * @memberof ProviderMap\n     */\n    ProviderMap.prototype.add = function (provide, provider) {\n        var _this = this;\n        var key = this.getTokenKey(provide);\n        if (utils.isUndefined(key)) {\n            return this;\n        }\n        var factory;\n        if (utils.isToken(provider) && this.container.has(provider)) {\n            factory = function () {\n                var providers = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers[_i] = arguments[_i];\n                }\n                var _a;\n                return (_a = _this.container).resolve.apply(_a, [provider].concat(providers));\n            };\n        }\n        else {\n            if (utils.isFunction(provider)) {\n                factory = provider;\n            }\n            else {\n                factory = function () {\n                    return provider;\n                };\n            }\n        }\n        if (factory) {\n            this.map.set(key, factory);\n        }\n        return this;\n    };\n    /**\n     * resolve instance via provide token.\n     *\n     * @template T\n     * @param {Token<T>} provide\n     * @param {...ProviderTypes[]} providers\n     * @returns {T}\n     * @memberof ProviderMap\n     */\n    ProviderMap.prototype.resolve = function (provide, resway) {\n        var providers = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            providers[_i - 2] = arguments[_i];\n        }\n        var key = this.getTokenKey(provide);\n        var way;\n        if (utils.isNumber(resway)) {\n            way = resway;\n        }\n        else {\n            if (resway) {\n                providers.unshift(resway);\n            }\n            way = IContainer.ResoveWay.current;\n        }\n        if ((way & IContainer.ResoveWay.current) && this.map.has(key)) {\n            var provider = this.map.get(key);\n            return utils.isFunction(provider) ? provider.apply(void 0, providers) : null;\n        }\n        return null;\n    };\n    ProviderMap.prototype.forEach = function (callbackfn) {\n        var _this = this;\n        this.map.forEach(function (fac, key) {\n            !utils.isNumber(key) && callbackfn(key, fac, _this);\n        });\n    };\n    /**\n     * copy provider map.\n     *\n     * @param {ProviderMap} map\n     * @returns\n     * @memberof ProviderMap\n     */\n    ProviderMap.prototype.copy = function (map) {\n        var _this = this;\n        if (!map) {\n            return this;\n        }\n        this.map.forEach(function (fac, key) {\n            _this.map.set(key, fac);\n        });\n        return this;\n    };\n    ProviderMap.getClassAnnations = function () {\n        return { \"name\": \"ProviderMap\", \"params\": { \"constructor\": [\"container\"], \"has\": [\"provide\"], \"provides\": [], \"getTokenKey\": [\"token\"], \"get\": [\"provide\"], \"getTokenImpl\": [\"token\", \"resway\"], \"unregister\": [\"token\", \"resway\"], \"add\": [\"provide\", \"provider\"], \"resolve\": [\"provide\", \"resway\", \"providers\"], \"forEach\": [\"callbackfn\"], \"copy\": [\"map\"] } };\n    };\n    return ProviderMap;\n}(utils.MapBase));\nexports.ProviderMap = ProviderMap;\n/**\n * object is provider map or not.\n *\n * @export\n * @param {object} target\n * @returns {target is ProviderMap}\n */\nfunction isProviderMap(target) {\n    if (!utils.isObject(target)) {\n        return false;\n    }\n    return target instanceof ProviderMap;\n}\nexports.isProviderMap = isProviderMap;\n\n\n});\n\nunwrapExports(ProviderMap_1);\nvar ProviderMap_2 = ProviderMap_1.ProviderMapToken;\nvar ProviderMap_3 = ProviderMap_1.ProviderMap;\nvar ProviderMap_4 = ProviderMap_1.isProviderMap;\n\nvar IProviderParser = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Providers parser token.\n */\nexports.ProviderParserToken = new InjectToken_1.InjectToken('DI_IProviderParser');\n\n\n});\n\nunwrapExports(IProviderParser);\nvar IProviderParser_1 = IProviderParser.ProviderParserToken;\n\nvar ProviderParser_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * provider matcher. use to find custome providers in resolve.\n *\n * note: object map provider can not resolve token.\n *\n * @export\n * @class ProviderMatcher\n * @implements {IProviderMatcher}\n */\nvar ProviderParser = /** @class */ (function () {\n    function ProviderParser(container) {\n        this.container = container;\n    }\n    ProviderParser.prototype.parse = function () {\n        var _this = this;\n        var providers = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            providers[_i] = arguments[_i];\n        }\n        if (providers.length === 1 && ProviderMap_1.isProviderMap(providers[0])) {\n            return providers[0];\n        }\n        var map = this.container.resolve(ProviderMap_1.ProviderMapToken);\n        providers.forEach(function (p, index) {\n            if (utils.isUndefined(p) || utils.isNull(p)) {\n                return;\n            }\n            if (ProviderMap_1.isProviderMap(p)) {\n                map.copy(p);\n            }\n            else if (p instanceof Provider_1.Provider) {\n                if (p instanceof Provider_1.ParamProvider) {\n                    if (!p.type && utils.isNumber(p.index)) {\n                        map.add(p.index, function () {\n                            var providers = [];\n                            for (var _i = 0; _i < arguments.length; _i++) {\n                                providers[_i] = arguments[_i];\n                            }\n                            return p.resolve.apply(p, [_this.container].concat(providers));\n                        });\n                    }\n                    else {\n                        map.add(p.type, function () {\n                            var providers = [];\n                            for (var _i = 0; _i < arguments.length; _i++) {\n                                providers[_i] = arguments[_i];\n                            }\n                            return p.resolve.apply(p, [_this.container].concat(providers));\n                        });\n                    }\n                }\n                else {\n                    map.add(p.type, function () {\n                        var providers = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            providers[_i] = arguments[_i];\n                        }\n                        return p.resolve.apply(p, [_this.container].concat(providers));\n                    });\n                }\n            }\n            else if (utils.isClass(p)) {\n                if (!_this.container.has(p)) {\n                    _this.container.register(p);\n                }\n                map.add(p, p);\n            }\n            else if (utils.isBaseObject(p)) {\n                var pr_1 = p;\n                var isobjMap = false;\n                if (utils.isToken(pr_1.provide)) {\n                    if (utils.isArray(pr_1.deps) && pr_1.deps.length) {\n                        pr_1.deps.forEach(function (d) {\n                            if (utils.isClass(d) && !_this.container.has(d)) {\n                                _this.container.register(d);\n                            }\n                        });\n                    }\n                    if (!utils.isUndefined(pr_1.useValue)) {\n                        map.add(pr_1.provide, function () { return pr_1.useValue; });\n                    }\n                    else if (utils.isClass(pr_1.useClass)) {\n                        if (!_this.container.has(pr_1.useClass)) {\n                            _this.container.register(pr_1.useClass);\n                        }\n                        map.add(pr_1.provide, pr_1.useClass);\n                    }\n                    else if (utils.isFunction(pr_1.useFactory)) {\n                        map.add(pr_1.provide, function () {\n                            var providers = [];\n                            for (var _i = 0; _i < arguments.length; _i++) {\n                                providers[_i] = arguments[_i];\n                            }\n                            var args = [];\n                            if (utils.isArray(pr_1.deps) && pr_1.deps.length) {\n                                args = pr_1.deps.map(function (d) {\n                                    var _a;\n                                    if (utils.isToken(d)) {\n                                        return (_a = _this.container).resolve.apply(_a, [d].concat(providers));\n                                    }\n                                    else {\n                                        return d;\n                                    }\n                                });\n                            }\n                            return pr_1.useFactory.apply(pr_1, args);\n                        });\n                    }\n                    else if (utils.isToken(pr_1.useExisting)) {\n                        map.add(pr_1.provide, function () {\n                            var providers = [];\n                            for (var _i = 0; _i < arguments.length; _i++) {\n                                providers[_i] = arguments[_i];\n                            }\n                            var _a;\n                            return (_a = _this.container).resolve.apply(_a, [pr_1.useExisting].concat(providers));\n                        });\n                    }\n                    else {\n                        isobjMap = true;\n                    }\n                }\n                else {\n                    isobjMap = true;\n                }\n                if (isobjMap) {\n                    utils.lang.forIn(p, function (val, name) {\n                        if (name && utils.isString(name)) {\n                            // object map can not resolve token. set all fileld as value factory.\n                            map.add(name, function () { return val; });\n                        }\n                    });\n                }\n            }\n            else if (utils.isFunction(p)) {\n                map.add(name, function () { return p; });\n            }\n        });\n        return map;\n    };\n    ProviderParser.getClassAnnations = function () {\n        return { \"name\": \"ProviderParser\", \"params\": { \"constructor\": [\"container\"], \"parse\": [\"providers\"] } };\n    };\n    return ProviderParser;\n}());\nexports.ProviderParser = ProviderParser;\nfunction isProvider(target) {\n    return ProviderMap_1.isProviderMap(target) || utils.isBaseObject(target) || target instanceof Provider_1.Provider;\n}\nexports.isProvider = isProvider;\n\n\n});\n\nunwrapExports(ProviderParser_1);\nvar ProviderParser_2 = ProviderParser_1.ProviderParser;\nvar ProviderParser_3 = ProviderParser_1.isProvider;\n\nvar providers = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(Provider_1, exports);\ntslib_1.__exportStar(ProviderMap_1, exports);\ntslib_1.__exportStar(IProviderParser, exports);\ntslib_1.__exportStar(ProviderParser_1, exports);\n\n\n});\n\nunwrapExports(providers);\n\nvar InjectPropertyAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * inject property value action, to inject property value for resolve instance.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar InjectPropertyAction = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectPropertyAction, _super);\n    function InjectPropertyAction() {\n        return _super.call(this, CoreActions_1.CoreActions.injectProperty) || this;\n    }\n    InjectPropertyAction.prototype.working = function (container, data) {\n        if (!data.execResult) {\n            this.parent.find(function (act) { return act.name === CoreActions_1.CoreActions.bindPropertyType; }).execute(container, data);\n        }\n        if (data.target && data.execResult && data.execResult.length) {\n            var providerMap_1 = data.providerMap;\n            data.injecteds = data.injecteds || {};\n            data.execResult.forEach(function (prop, idx) {\n                if (prop && !data.injecteds[prop.propertyKey]) {\n                    var token = prop.provider ? container.getToken(prop.provider, prop.alias) : prop.type;\n                    var pdrMap = container.get(new InjectReference_1.InjectReference(providers.ProviderMap, data.targetType));\n                    if (token === IContainer.ContainerToken) {\n                        Object.defineProperty(data.target, prop.propertyKey, { enumerable: false, writable: true });\n                    }\n                    if (pdrMap && pdrMap.has(token)) {\n                        data.target[prop.propertyKey] = pdrMap.resolve(token, providerMap_1);\n                        data.injecteds[prop.propertyKey] = true;\n                    }\n                    else if (providerMap_1 && providerMap_1.has(token)) {\n                        data.target[prop.propertyKey] = providerMap_1.resolve(token, providerMap_1);\n                        data.injecteds[prop.propertyKey] = true;\n                    }\n                    else if (container.has(token)) {\n                        data.target[prop.propertyKey] = container.resolve(token, providerMap_1);\n                        data.injecteds[prop.propertyKey] = true;\n                    }\n                }\n            });\n        }\n    };\n    InjectPropertyAction.getClassAnnations = function () {\n        return { \"name\": \"InjectPropertyAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return InjectPropertyAction;\n}(ActionComposite_1.ActionComposite));\nexports.InjectPropertyAction = InjectPropertyAction;\n\n\n});\n\nunwrapExports(InjectPropertyAction_1);\nvar InjectPropertyAction_2 = InjectPropertyAction_1.InjectPropertyAction;\n\nvar BindParameterProviderAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * bind parameters action.\n *\n * @export\n * @class BindParameterProviderAction\n * @extends {ActionComposite}\n */\nvar BindParameterProviderAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BindParameterProviderAction, _super);\n    function BindParameterProviderAction() {\n        return _super.call(this, CoreActions_1.CoreActions.bindParameterProviders) || this;\n    }\n    BindParameterProviderAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        var type = data.targetType;\n        var propertyKey = data.propertyKey;\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getMethodDecorators(type, function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.bindParameterProviders) && factories.hasOwnMethodMetadata(surm.name, type); });\n        var providers = [];\n        matchs.forEach(function (surm) {\n            var methodmtas = factories.getOwnMethodMetadata(surm.name, type);\n            var metadatas = methodmtas[propertyKey];\n            if (metadatas && utils.isArray(metadatas) && metadatas.length > 0) {\n                metadatas.forEach(function (meta) {\n                    if (meta.providers && meta.providers.length > 0) {\n                        providers = providers.concat(meta.providers);\n                    }\n                });\n            }\n        });\n        data.execResult = providers;\n    };\n    BindParameterProviderAction.getClassAnnations = function () {\n        return { \"name\": \"BindParameterProviderAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return BindParameterProviderAction;\n}(ActionComposite_1.ActionComposite));\nexports.BindParameterProviderAction = BindParameterProviderAction;\n\n\n});\n\nunwrapExports(BindParameterProviderAction_1);\nvar BindParameterProviderAction_2 = BindParameterProviderAction_1.BindParameterProviderAction;\n\nvar ComponentBeforeInitAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * component before init action, to run @Component decorator class before init hooks.\n *\n * @export\n * @class ComponentBeforeInitAction\n * @extends {ActionComposite}\n */\nvar ComponentBeforeInitAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ComponentBeforeInitAction, _super);\n    function ComponentBeforeInitAction() {\n        return _super.call(this, CoreActions_1.CoreActions.componentBeforeInit) || this;\n    }\n    ComponentBeforeInitAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.targetType && data.target) {\n            if (container.getLifeScope().hasDecorator(data.targetType, factories.DecoratorType.Class, function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.componentBeforeInit); })) {\n                var component = data.target;\n                if (utils.isFunction(component.beforeInit)) {\n                    container.syncInvoke(data.target || data.targetType, 'beforeInit', data.target);\n                }\n            }\n        }\n    };\n    ComponentBeforeInitAction.getClassAnnations = function () {\n        return { \"name\": \"ComponentBeforeInitAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return ComponentBeforeInitAction;\n}(ActionComposite_1.ActionComposite));\nexports.ComponentBeforeInitAction = ComponentBeforeInitAction;\n\n\n});\n\nunwrapExports(ComponentBeforeInitAction_1);\nvar ComponentBeforeInitAction_2 = ComponentBeforeInitAction_1.ComponentBeforeInitAction;\n\nvar ComponentInitAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * component before init action, to run @Component decorator class before init hooks.\n *\n * @export\n * @class ComponentInitAction\n * @extends {ActionComposite}\n */\nvar ComponentInitAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ComponentInitAction, _super);\n    function ComponentInitAction() {\n        return _super.call(this, CoreActions_1.CoreActions.componentInit) || this;\n    }\n    ComponentInitAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.targetType && data.target) {\n            if (container.getLifeScope().hasDecorator(data.targetType, factories.DecoratorType.Class, function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.componentInit); })) {\n                var component = data.target;\n                if (utils.isFunction(component.onInit)) {\n                    container.syncInvoke(data.target || data.targetType, 'onInit', data.target);\n                }\n            }\n        }\n    };\n    ComponentInitAction.getClassAnnations = function () {\n        return { \"name\": \"ComponentInitAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return ComponentInitAction;\n}(ActionComposite_1.ActionComposite));\nexports.ComponentInitAction = ComponentInitAction;\n\n\n});\n\nunwrapExports(ComponentInitAction_1);\nvar ComponentInitAction_2 = ComponentInitAction_1.ComponentInitAction;\n\nvar ComponentAfterInitAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * component after init action, to run @Component decorator class after init hooks.\n *\n * @export\n * @class ComponentAfterInitAction\n * @extends {ActionComposite}\n */\nvar ComponentAfterInitAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ComponentAfterInitAction, _super);\n    function ComponentAfterInitAction() {\n        return _super.call(this, CoreActions_1.CoreActions.componentAfterInit) || this;\n    }\n    ComponentAfterInitAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.targetType && data.target) {\n            if (container.getLifeScope().hasDecorator(data.targetType, factories.DecoratorType.Class, function (surm) { return surm.actions.includes(CoreActions_1.CoreActions.componentAfterInit); })) {\n                var component = data.target;\n                if (utils.isFunction(component.afterInit)) {\n                    container.syncInvoke(data.target || data.targetType, 'afterInit', data.target);\n                }\n            }\n        }\n    };\n    ComponentAfterInitAction.getClassAnnations = function () {\n        return { \"name\": \"ComponentAfterInitAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return ComponentAfterInitAction;\n}(ActionComposite_1.ActionComposite));\nexports.ComponentAfterInitAction = ComponentAfterInitAction;\n\n\n});\n\nunwrapExports(ComponentAfterInitAction_1);\nvar ComponentAfterInitAction_2 = ComponentAfterInitAction_1.ComponentAfterInitAction;\n\nvar ICacheManager = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * ICacheManager interface token.\n * it is a token id, you can register yourself ICacheManager for this.\n */\nexports.CacheManagerToken = new InjectToken_1.InjectToken('DI_ICacheManager');\n\n\n});\n\nunwrapExports(ICacheManager);\nvar ICacheManager_1 = ICacheManager.CacheManagerToken;\n\nvar CacheAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * cache action. To cache instance of Token. define cache expires in decorator.\n *\n * @export\n * @class CacheAction\n * @extends {ActionComposite}\n */\nvar CacheAction = /** @class */ (function (_super) {\n    tslib_1.__extends(CacheAction, _super);\n    function CacheAction() {\n        return _super.call(this, CoreActions_1.CoreActions.cache) || this;\n    }\n    CacheAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return data;\n        }\n        if (data.singleton || !data.targetType || !utils.isClass(data.targetType)) {\n            return data;\n        }\n        var cacheManager = container.get(ICacheManager.CacheManagerToken);\n        if (data.target) {\n            if (!cacheManager.hasCache(data.targetType)) {\n                var cacheMetadata = this.getCacheMetadata(container, data);\n                if (cacheMetadata) {\n                    cacheManager.cache(data.targetType, data.target, cacheMetadata.expires);\n                }\n            }\n        }\n        else {\n            var target = cacheManager.get(data.targetType);\n            if (target) {\n                var cacheMetadata = this.getCacheMetadata(container, data);\n                if (cacheMetadata) {\n                    cacheManager.cache(data.targetType, target, cacheMetadata.expires);\n                    data.execResult = target;\n                }\n            }\n        }\n        return data;\n    };\n    CacheAction.prototype.getCacheMetadata = function (container, data) {\n        var lifeScope = container.getLifeScope();\n        var matchs = lifeScope.getClassDecorators(data.targetType);\n        var cacheMetadata;\n        for (var i = 0; i < matchs.length; i++) {\n            var surm = matchs[i];\n            var metadata = factories.getOwnTypeMetadata(surm.name, data.targetType);\n            if (Array.isArray(metadata) && metadata.length > 0) {\n                cacheMetadata = metadata.find(function (c) { return c && utils.isNumber(c.expires) && c.expires > 0; });\n                if (cacheMetadata) {\n                    break;\n                }\n            }\n        }\n        return cacheMetadata;\n    };\n    CacheAction.getClassAnnations = function () {\n        return { \"name\": \"CacheAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"], \"getCacheMetadata\": [\"container\", \"data\"] } };\n    };\n    return CacheAction;\n}(ActionComposite_1.ActionComposite));\nexports.CacheAction = CacheAction;\n\n\n});\n\nunwrapExports(CacheAction_1);\nvar CacheAction_2 = CacheAction_1.CacheAction;\n\nvar SingletonAction = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * singleton action, to set the factory of Token as singleton.\n *\n * @export\n * @class SingletionAction\n * @extends {ActionComposite}\n */\nvar SingletionAction = /** @class */ (function (_super) {\n    tslib_1.__extends(SingletionAction, _super);\n    function SingletionAction() {\n        return _super.call(this, CoreActions_1.CoreActions.singletion) || this;\n    }\n    SingletionAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.tokenKey && data.target && data.singleton) {\n            container.registerValue(data.tokenKey, data.target);\n        }\n    };\n    SingletionAction.getClassAnnations = function () {\n        return { \"name\": \"SingletionAction\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return SingletionAction;\n}(ActionComposite_1.ActionComposite));\nexports.SingletionAction = SingletionAction;\n\n\n});\n\nunwrapExports(SingletonAction);\nvar SingletonAction_1 = SingletonAction.SingletionAction;\n\nvar AutoRun = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * Autorun decorator, for class or method.  use to define the class auto run (via a method or not) after registered.\n *\n * @Autorun\n */\nexports.Autorun = factories.createClassMethodDecorator('Autorun', function (args) {\n    args.next({\n        isMetadata: function (arg) { return utils.isClassMetadata(arg, 'autorun'); },\n        match: function (arg) { return utils.isString(arg) || utils.isNumber(arg); },\n        setMetadata: function (metadata, arg) {\n            if (utils.isString(arg)) {\n                metadata.autorun = arg;\n            }\n            else {\n                metadata.order = arg;\n            }\n        }\n    });\n}, function (metadata) {\n    metadata.singleton = true;\n    return metadata;\n});\n\n\n});\n\nunwrapExports(AutoRun);\nvar AutoRun_1 = AutoRun.Autorun;\n\nvar IocExt = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * IocExt decorator. define for class, use to define the class is Ioc extends module. it will auto run after registered to helper your to setup module.\n *\n * @IocExt\n */\nexports.IocExt = factories.createClassDecorator('IocExt', function (args) {\n    args.next({\n        isMetadata: function (arg) { return utils.isClassMetadata(arg, 'autorun'); },\n        match: function (arg) { return utils.isString(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.autorun = arg;\n        }\n    });\n}, function (metadata) {\n    metadata.singleton = true;\n    return metadata;\n});\nexports.IocModule = exports.IocExt;\n\n\n});\n\nunwrapExports(IocExt);\nvar IocExt_1 = IocExt.IocExt;\nvar IocExt_2 = IocExt.IocModule;\n\nvar AutorunAction_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n\n/**\n * Inject DrawType action.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar AutorunAction = /** @class */ (function (_super) {\n    tslib_1.__extends(AutorunAction, _super);\n    function AutorunAction() {\n        return _super.call(this, CoreActions_1.CoreActions.autorun) || this;\n    }\n    AutorunAction.prototype.getDecorator = function () {\n        return [IocExt.IocExt, AutoRun.Autorun];\n    };\n    AutorunAction.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.tokenKey && data.targetType) {\n            var decorators = this.getDecorator();\n            decorators.forEach(function (decorator) {\n                if (factories.hasClassMetadata(decorator, data.targetType)) {\n                    var metas = factories.getTypeMetadata(decorator, data.targetType);\n                    var meta = metas.find(function (it) { return !!it.autorun; });\n                    if (!meta && metas.length) {\n                        meta = metas[0];\n                    }\n                    if (meta) {\n                        var instance = container.get(data.tokenKey);\n                        if (instance && meta.autorun && utils.isFunction(instance[meta.autorun])) {\n                            container.syncInvoke(instance, meta.autorun);\n                        }\n                    }\n                }\n            });\n        }\n    };\n    AutorunAction.getClassAnnations = function () {\n        return { \"name\": \"AutorunAction\", \"params\": { \"constructor\": [], \"getDecorator\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return AutorunAction;\n}(ActionComposite_1.ActionComposite));\nexports.AutorunAction = AutorunAction;\n\n\n});\n\nunwrapExports(AutorunAction_1);\nvar AutorunAction_2 = AutorunAction_1.AutorunAction;\n\nvar actions = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(ActionComposite_1, exports);\ntslib_1.__exportStar(LifeState_1, exports);\ntslib_1.__exportStar(CoreActions_1, exports);\ntslib_1.__exportStar(NullAction, exports);\ntslib_1.__exportStar(BindProviderAction_1, exports);\ntslib_1.__exportStar(BindParameterTypeAction_1, exports);\ntslib_1.__exportStar(BindPropertyTypeAction_1, exports);\ntslib_1.__exportStar(InjectPropertyAction_1, exports);\ntslib_1.__exportStar(BindParameterProviderAction_1, exports);\ntslib_1.__exportStar(ComponentBeforeInitAction_1, exports);\ntslib_1.__exportStar(ComponentInitAction_1, exports);\ntslib_1.__exportStar(ComponentAfterInitAction_1, exports);\ntslib_1.__exportStar(CacheAction_1, exports);\ntslib_1.__exportStar(SingletonAction, exports);\ntslib_1.__exportStar(AutorunAction_1, exports);\n\n\n});\n\nunwrapExports(actions);\n\nvar basic = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * define the property enumerable of not.\n *\n * @export\n * @param {boolean} value\n * @returns\n */\nfunction enumerable(value) {\n    return function (target, propertyKey, descriptor) {\n        if (descriptor) {\n            descriptor.enumerable = value;\n        }\n        else {\n            descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || { writable: true };\n            descriptor.enumerable = value;\n            Object.defineProperty(target, propertyKey, descriptor);\n        }\n    };\n}\nexports.enumerable = enumerable;\nfunction configurable(value) {\n    return function (target, propertyKey, descriptor) {\n        if (descriptor) {\n            descriptor.configurable = value;\n        }\n        else {\n            descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || { writable: true };\n            descriptor.configurable = value;\n            Object.defineProperty(target, propertyKey, descriptor);\n        }\n    };\n}\nexports.configurable = configurable;\n/**\n * define class is sealed.\n *\n * @param {Function} constructor\n */\nfunction sealed(constructor) {\n    Object.seal(constructor);\n    Object.seal(constructor.prototype);\n}\nexports.sealed = sealed;\n\n\n});\n\nunwrapExports(basic);\nvar basic_1 = basic.enumerable;\nvar basic_2 = basic.configurable;\nvar basic_3 = basic.sealed;\n\nvar Component = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Component decorator, define for class. use to define the class. it can setting provider to some token, singleton or not. it will execute  [`ComponentLifecycle`]\n *\n * @Component\n */\nexports.Component = factories.createClassDecorator('Component');\n\n\n});\n\nunwrapExports(Component);\nvar Component_1 = Component.Component;\n\nvar Injectable = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Injectable decorator, define for class.  use to define the class. it can setting provider to some token, singleton or not.\n *\n * @Injectable\n */\nexports.Injectable = factories.createClassDecorator('Injectable');\n\n\n});\n\nunwrapExports(Injectable);\nvar Injectable_1 = Injectable.Injectable;\n\nvar Refs = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * Refs decorator, for class. use to define the class as service of target.\n *\n * @Refs\n */\nexports.Refs = factories.createDecorator('Refs', (function (args) {\n    args.next({\n        match: function (arg) { return utils.isToken(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.refs = { target: arg };\n        }\n    });\n    args.next({\n        match: function (arg) { return utils.isToken(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.refs.provide = arg;\n        }\n    });\n    args.next({\n        match: function (arg) { return utils.isString(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.refs.alias = arg;\n        }\n    });\n}));\n\n\n});\n\nunwrapExports(Refs);\nvar Refs_1 = Refs.Refs;\n\nvar Providers = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * Providers decorator, for class. use to add ref service to the class.\n *\n * @Providers\n */\nexports.Providers = factories.createDecorator('Providers', (function (args) {\n    args.next({\n        match: function (arg) { return utils.isArray(arg); },\n        setMetadata: function (metadata, arg) {\n            metadata.providers = arg;\n        }\n    });\n}));\n\n\n});\n\nunwrapExports(Providers);\nvar Providers_1 = Providers.Providers;\n\nvar Inject = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Inject decorator, for property or param, use to auto wried type instance or value to the instance of one class with the decorator.\n *\n * @Inject\n */\nexports.Inject = factories.createParamPropDecorator('Inject');\n\n\n});\n\nunwrapExports(Inject);\nvar Inject_1 = Inject.Inject;\n\nvar AutoWried = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * AutoWired decorator, for property or param. use to auto wried type instance or value to the instance of one class with the decorator.\n *\n * @AutoWired\n */\nexports.AutoWired = factories.createParamPropDecorator('AutoWired');\n\n\n});\n\nunwrapExports(AutoWried);\nvar AutoWried_1 = AutoWried.AutoWired;\n\nvar Param = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * param decorator, define for parameter. use to auto wried type instance or value to the instance of one class with the decorator.\n *\n * @Param\n */\nexports.Param = factories.createParamDecorator('Param');\n\n\n});\n\nunwrapExports(Param);\nvar Param_1 = Param.Param;\n\nvar Method = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * method decorator.\n *\n * @Method\n */\nexports.Method = factories.createMethodDecorator('Method');\n\n\n});\n\nunwrapExports(Method);\nvar Method_1 = Method.Method;\n\nvar Singleton = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Singleton decorator, for class. use to define the class is singleton.\n *\n * @Singleton\n */\nexports.Singleton = factories.createClassDecorator('Singleton', null, function (metadata) {\n    metadata.singleton = true;\n    return metadata;\n});\n\n\n});\n\nunwrapExports(Singleton);\nvar Singleton_1 = Singleton.Singleton;\n\nvar Abstract = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * Abstract decorator. define for class.\n *\n * @Abstract\n */\nexports.Abstract = factories.createClassDecorator('Abstract');\n\n\n});\n\nunwrapExports(Abstract);\nvar Abstract_1 = Abstract.Abstract;\n\nvar decorators = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(basic, exports);\ntslib_1.__exportStar(Component, exports);\ntslib_1.__exportStar(Injectable, exports);\ntslib_1.__exportStar(Refs, exports);\ntslib_1.__exportStar(Providers, exports);\ntslib_1.__exportStar(Inject, exports);\ntslib_1.__exportStar(AutoWried, exports);\ntslib_1.__exportStar(Param, exports);\ntslib_1.__exportStar(Method, exports);\ntslib_1.__exportStar(Singleton, exports);\ntslib_1.__exportStar(Abstract, exports);\ntslib_1.__exportStar(AutoRun, exports);\ntslib_1.__exportStar(IocExt, exports);\n\n\n});\n\nunwrapExports(decorators);\n\nvar IRecognizer = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * IRecognizer interface token.\n * it is a token id, you can register yourself IRecognizer for this.\n */\nexports.RecognizerToken = new InjectToken_1.InjectToken('DI_IRecognizer');\n\n\n});\n\nunwrapExports(IRecognizer);\nvar IRecognizer_1 = IRecognizer.RecognizerToken;\n\nvar MethodAutorun_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * Inject DrawType action.\n *\n * @export\n * @class SetPropAction\n * @extends {ActionComposite}\n */\nvar MethodAutorun = /** @class */ (function (_super) {\n    tslib_1.__extends(MethodAutorun, _super);\n    function MethodAutorun() {\n        return _super.call(this, CoreActions_1.CoreActions.methodAutorun) || this;\n    }\n    MethodAutorun.prototype.working = function (container, data) {\n        if (data.raiseContainer && data.raiseContainer !== container) {\n            return;\n        }\n        if (data.target && data.targetType) {\n            if (factories.hasMethodMetadata(decorators.Autorun, data.targetType)) {\n                var metas = factories.getMethodMetadata(decorators.Autorun, data.targetType);\n                var lastmetas_1 = [];\n                var idx_1 = utils.lang.keys(metas).length;\n                utils.lang.forIn(metas, function (mm, key) {\n                    if (mm && mm.length) {\n                        var m = mm[0];\n                        m.autorun = key;\n                        idx_1++;\n                        if (!utils.isNumber(m.order)) {\n                            m.order = idx_1;\n                        }\n                        lastmetas_1.push(m);\n                    }\n                });\n                lastmetas_1.sort(function (au1, au2) {\n                    return au1.order - au1.order;\n                }).forEach(function (aut) {\n                    container.syncInvoke(data.target || data.targetType, aut.autorun, data.target);\n                });\n            }\n        }\n    };\n    MethodAutorun.getClassAnnations = function () {\n        return { \"name\": \"MethodAutorun\", \"params\": { \"constructor\": [], \"working\": [\"container\", \"data\"] } };\n    };\n    return MethodAutorun;\n}(ActionComposite_1.ActionComposite));\nexports.MethodAutorun = MethodAutorun;\n\n\n});\n\nunwrapExports(MethodAutorun_1);\nvar MethodAutorun_2 = MethodAutorun_1.MethodAutorun;\n\nvar ActionFactory_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * action factory.\n *\n * @export\n * @class ActionFactory\n */\nvar ActionFactory = /** @class */ (function () {\n    function ActionFactory() {\n    }\n    /**\n     * create action by action type. type in 'CoreActions'\n     *\n     * @param {string} type\n     * @returns {ActionComponent}\n     * @memberof ActionFactory\n     */\n    ActionFactory.prototype.create = function (type) {\n        var action;\n        switch (type) {\n            case actions.CoreActions.bindParameterType:\n                action = new actions.BindParameterTypeAction();\n                break;\n            case actions.CoreActions.bindPropertyType:\n                action = new actions.BindPropertyTypeAction();\n                break;\n            case actions.CoreActions.injectProperty:\n                action = new actions.InjectPropertyAction();\n                break;\n            case actions.CoreActions.bindProvider:\n                action = new actions.BindProviderAction();\n                break;\n            case actions.CoreActions.bindParameterProviders:\n                action = new actions.BindParameterProviderAction();\n                break;\n            case actions.CoreActions.componentInit:\n                action = new actions.ComponentInitAction();\n                break;\n            case actions.CoreActions.componentBeforeInit:\n                action = new actions.ComponentBeforeInitAction();\n                break;\n            case actions.CoreActions.componentAfterInit:\n                action = new actions.ComponentAfterInitAction();\n                break;\n            case actions.CoreActions.cache:\n                action = new actions.CacheAction();\n                break;\n            case actions.CoreActions.singletion:\n                action = new actions.SingletionAction();\n                break;\n            case actions.CoreActions.autorun:\n                action = new actions.AutorunAction();\n                break;\n            case actions.CoreActions.methodAutorun:\n                action = new MethodAutorun_1.MethodAutorun();\n                break;\n            default:\n                action = new actions.ActionComposite(type);\n                break;\n        }\n        return action;\n    };\n    ActionFactory.getClassAnnations = function () {\n        return { \"name\": \"ActionFactory\", \"params\": { \"create\": [\"type\"] } };\n    };\n    return ActionFactory;\n}());\nexports.ActionFactory = ActionFactory;\n\n\n});\n\nunwrapExports(ActionFactory_1);\nvar ActionFactory_2 = ActionFactory_1.ActionFactory;\n\nvar IMetaAccessor = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * application service token.\n *\n * @export\n * @class InjectMetaAccessorToken\n * @extends {Registration<MetaAccessor<T>>}\n * @template T\n */\nvar InjectMetaAccessorToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectMetaAccessorToken, _super);\n    function InjectMetaAccessorToken(type) {\n        return _super.call(this, type, 'metaAccessor') || this;\n    }\n    InjectMetaAccessorToken.getClassAnnations = function () {\n        return { \"name\": \"InjectMetaAccessorToken\", \"params\": { \"constructor\": [\"type\"] } };\n    };\n    return InjectMetaAccessorToken;\n}(InjectReference_1.RefRegistration));\nexports.InjectMetaAccessorToken = InjectMetaAccessorToken;\n/**\n * MetaAccessor token.\n */\nexports.MetaAccessorToken = new InjectMetaAccessorToken(Object);\n\n\n});\n\nunwrapExports(IMetaAccessor);\nvar IMetaAccessor_1 = IMetaAccessor.InjectMetaAccessorToken;\nvar IMetaAccessor_2 = IMetaAccessor.MetaAccessorToken;\n\nvar DefaultLifeScope_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n\n/**\n * default implement life scope.\n *\n * @export\n * @class DefaultLifeScope\n * @implements {LifeScope}\n */\nvar DefaultLifeScope = /** @class */ (function () {\n    function DefaultLifeScope(container) {\n        this.container = container;\n        this.decorators = [];\n        this.buildAction();\n    }\n    DefaultLifeScope.prototype.addAction = function (action) {\n        var nodepaths = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            nodepaths[_i - 1] = arguments[_i];\n        }\n        var parent = this.action;\n        nodepaths.forEach(function (pathname) {\n            parent = parent.find(function (act) { return act.name === pathname; });\n        });\n        if (parent) {\n            parent.add(action);\n        }\n        return this;\n    };\n    DefaultLifeScope.prototype.registerDecorator = function (decorator) {\n        var actions$$2 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            actions$$2[_i - 1] = arguments[_i];\n        }\n        var type = this.getDecoratorType(decorator);\n        return this.registerCustomDecorator.apply(this, [decorator, type].concat(actions$$2));\n    };\n    DefaultLifeScope.prototype.registerCustomDecorator = function (decorator, type) {\n        var actions$$2 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            actions$$2[_i - 2] = arguments[_i];\n        }\n        var types$$2 = this.toActionName(type);\n        var name = decorator.toString();\n        if (!this.decorators.some(function (d) { return d.name === name; })) {\n            this.decorators.push({\n                name: name,\n                types: types$$2,\n                actions: actions$$2\n            });\n        }\n        return this;\n    };\n    DefaultLifeScope.prototype.execute = function (data) {\n        var names = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            names[_i - 1] = arguments[_i];\n        }\n        names = names.filter(function (n) { return !!n; });\n        var act = this.action;\n        names.forEach(function (name) {\n            act = act.find(function (itm) { return itm.name === name; });\n        });\n        if (act) {\n            act.execute(this.container, data);\n        }\n    };\n    DefaultLifeScope.prototype.routeExecute = function (data) {\n        var names = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            names[_i - 1] = arguments[_i];\n        }\n        var _a;\n        this.execute.apply(this, [data].concat(names));\n        var container = this.container.parent;\n        while (container) {\n            (_a = container.getLifeScope()).execute.apply(_a, [utils.lang.assign({}, data)].concat(names));\n            container = container.parent;\n        }\n    };\n    DefaultLifeScope.prototype.hasDecorator = function (target, dtype, match) {\n        var _this = this;\n        var decors;\n        switch (dtype) {\n            case factories.DecoratorType.Class:\n                decors = factories.getClassDecorators(target);\n                break;\n            case factories.DecoratorType.Property:\n                decors = factories.getPropDecorators(target);\n                break;\n            case factories.DecoratorType.Parameter:\n                decors = factories.getParamDecorators(target);\n                break;\n            case factories.DecoratorType.Method:\n                decors = factories.getMethodDecorators(target);\n                break;\n        }\n        if (decors) {\n            return decors.some(function (dec) { return _this.decorators.some(function (d) { return d.name === dec && match(d); }); });\n        }\n        return false;\n    };\n    DefaultLifeScope.prototype.getClassDecorators = function (type, match) {\n        var _this = this;\n        return factories.getClassDecorators(type)\n            .map(function (dec) { return _this.decorators.find(function (d) { return d.name === dec; }); })\n            .filter(function (d) { return d && (match ? match(d) : true); });\n    };\n    DefaultLifeScope.prototype.getMethodDecorators = function (type, match) {\n        var _this = this;\n        return factories.getMethodDecorators(type)\n            .map(function (dec) { return _this.decorators.find(function (d) { return d.name === dec; }); })\n            .filter(function (d) { return d && (match ? match(d) : true); });\n    };\n    DefaultLifeScope.prototype.getPropertyDecorators = function (type, match) {\n        var _this = this;\n        return factories.getPropDecorators(type)\n            .map(function (dec) { return _this.decorators.find(function (d) { return d.name === dec; }); })\n            .filter(function (d) { return d && (match ? match(d) : true); });\n    };\n    DefaultLifeScope.prototype.getParameterDecorators = function (target, propertyKey, match) {\n        var _this = this;\n        return factories.getParamDecorators(target, propertyKey)\n            .map(function (dec) { return _this.decorators.find(function (d) { return d.name === dec; }); })\n            .filter(function (d) { return d && (match ? match(d) : true); });\n    };\n    DefaultLifeScope.prototype.getDecoratorType = function (decirator) {\n        return decirator.decoratorType || factories.DecoratorType.All;\n    };\n    /**\n     * is vaildate dependence type or not. dependence type must with class decorator.\n     *\n     * @template T\n     * @param {Type<T>} target\n     * @returns {boolean}\n     * @memberof Container\n     */\n    DefaultLifeScope.prototype.isVaildDependence = function (target) {\n        if (!target) {\n            return false;\n        }\n        if (!utils.isClass(target)) {\n            return false;\n        }\n        if (utils.isAbstractClass(target)) {\n            return false;\n        }\n        return this.getClassDecorators(target).length > 0;\n    };\n    DefaultLifeScope.prototype.getAtionByName = function (name) {\n        return this.action.find(function (action) { return action.name === name; });\n    };\n    DefaultLifeScope.prototype.getClassAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Class));\n    };\n    DefaultLifeScope.prototype.getMethodAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Method));\n    };\n    DefaultLifeScope.prototype.getPropertyAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Property));\n    };\n    DefaultLifeScope.prototype.getParameterAction = function () {\n        return this.getAtionByName(this.toActionName(factories.DecoratorType.Parameter));\n    };\n    /**\n     * get constructor parameters metadata.\n     *\n     * @template T\n     * @param {Type<T>} type\n     * @returns {IParameter[]}\n     * @memberof IContainer\n     */\n    DefaultLifeScope.prototype.getConstructorParameters = function (type) {\n        return this.getParameters(type);\n    };\n    /**\n     * get method params metadata.\n     *\n     * @template T\n     * @param {Type<T>} type\n     * @param {T} instance\n     * @param {(string | symbol)} propertyKey\n     * @returns {IParameter[]}\n     * @memberof IContainer\n     */\n    DefaultLifeScope.prototype.getMethodParameters = function (type, instance, propertyKey) {\n        return this.getParameters(type, instance, propertyKey);\n    };\n    /**\n     * get paramerter names.\n     *\n     * @template T\n     * @param {Type<T>} type\n     * @param {string} propertyKey\n     * @returns {string[]}\n     * @memberof DefaultLifeScope\n     */\n    DefaultLifeScope.prototype.getParamerterNames = function (type, propertyKey) {\n        var metadata = factories.getOwnParamerterNames(type);\n        var paramNames = [];\n        if (metadata && metadata.hasOwnProperty(propertyKey)) {\n            paramNames = metadata[propertyKey];\n        }\n        if (!utils.isArray(paramNames)) {\n            paramNames = [];\n        }\n        return paramNames;\n    };\n    DefaultLifeScope.prototype.isSingletonType = function (type) {\n        if (factories.hasOwnClassMetadata(Singleton.Singleton, type)) {\n            return true;\n        }\n        var metadata = this.container.get(IMetaAccessor.MetaAccessorToken).find(type, this.container, function (m) { return m.singleton === true; });\n        return !!metadata;\n    };\n    DefaultLifeScope.prototype.getMethodMetadatas = function (type, propertyKey) {\n        var metadatas = [];\n        this.getMethodDecorators(type)\n            .forEach(function (dec) {\n            var metas = factories.getOwnMethodMetadata(dec.name, type);\n            if (metas.hasOwnProperty(propertyKey)) {\n                metadatas = metadatas.concat(metas[propertyKey] || []);\n            }\n        });\n        return metadatas;\n    };\n    DefaultLifeScope.prototype.filerDecorators = function (express) {\n        return this.decorators.filter(express);\n    };\n    DefaultLifeScope.prototype.getParameters = function (type, instance, propertyKey) {\n        propertyKey = propertyKey || 'constructor';\n        var data = {\n            target: instance,\n            targetType: type,\n            propertyKey: propertyKey\n        };\n        this.execute(data, actions.LifeState.onInit, actions.CoreActions.bindParameterType);\n        var paramNames = this.getParamerterNames(type, propertyKey);\n        if (data.execResult.length) {\n            return data.execResult.map(function (typ, idx) {\n                return {\n                    type: typ,\n                    name: paramNames[idx]\n                };\n            });\n        }\n        else {\n            return paramNames.map(function (name) {\n                return {\n                    name: name,\n                    type: undefined\n                };\n            });\n        }\n    };\n    DefaultLifeScope.prototype.getTypeDecorators = function (decType, match) {\n        return this.filerDecorators(function (value) {\n            var flag = (value.types || '').indexOf(decType) >= 0;\n            if (flag && match) {\n                flag = match(value);\n            }\n            return flag;\n        });\n    };\n    DefaultLifeScope.prototype.buildAction = function () {\n        var factory = new ActionFactory_1.ActionFactory();\n        var action = factory.create('');\n        action\n            .add(factory.create(types.IocState.design)\n            .add(factory.create(actions.CoreActions.bindProvider))\n            .add(factory.create(actions.CoreActions.autorun)))\n            .add(factory.create(types.IocState.runtime)\n            .add(factory.create(actions.LifeState.beforeCreateArgs))\n            .add(factory.create(actions.LifeState.beforeConstructor))\n            .add(factory.create(actions.LifeState.afterConstructor))\n            .add(factory.create(actions.LifeState.onInit)\n            .add(factory.create(actions.CoreActions.componentBeforeInit))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Class)))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Method)))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Property))\n            .add(factory.create(actions.CoreActions.bindPropertyType))\n            .add(factory.create(actions.CoreActions.injectProperty)))\n            .add(factory.create(this.toActionName(factories.DecoratorType.Parameter))\n            .add(factory.create(actions.CoreActions.bindParameterType))\n            .add(factory.create(actions.CoreActions.bindParameterProviders)))\n            .add(factory.create(actions.CoreActions.componentInit)))\n            .add(factory.create(actions.LifeState.AfterInit)\n            .add(factory.create(actions.CoreActions.singletion))\n            .add(factory.create(actions.CoreActions.componentAfterInit))\n            .add(factory.create(actions.CoreActions.methodAutorun))))\n            .add(factory.create(actions.CoreActions.cache));\n        this.action = action;\n    };\n    DefaultLifeScope.prototype.toActionName = function (type) {\n        var types$$2 = [];\n        if (type & factories.DecoratorType.Class) {\n            types$$2.push('ClassDecorator');\n        }\n        if (type & factories.DecoratorType.Method) {\n            types$$2.push('MethodDecorator');\n        }\n        if (type & factories.DecoratorType.Property) {\n            types$$2.push('PropertyDecorator');\n        }\n        if (type & factories.DecoratorType.Parameter) {\n            types$$2.push('ParameterDecorator');\n        }\n        return types$$2.join(',');\n    };\n    DefaultLifeScope.getClassAnnations = function () {\n        return { \"name\": \"DefaultLifeScope\", \"params\": { \"constructor\": [\"container\"], \"addAction\": [\"action\", \"nodepaths\"], \"registerDecorator\": [\"decorator\", \"actions\"], \"registerCustomDecorator\": [\"decorator\", \"type\", \"actions\"], \"execute\": [\"data\", \"names\"], \"routeExecute\": [\"data\", \"names\"], \"hasDecorator\": [\"target\", \"dtype\", \"match\"], \"getClassDecorators\": [\"type\", \"match\"], \"getMethodDecorators\": [\"type\", \"match\"], \"getPropertyDecorators\": [\"type\", \"match\"], \"getParameterDecorators\": [\"target\", \"propertyKey\", \"match\"], \"getDecoratorType\": [\"decirator\"], \"isVaildDependence\": [\"target\"], \"getAtionByName\": [\"name\"], \"getClassAction\": [], \"getMethodAction\": [], \"getPropertyAction\": [], \"getParameterAction\": [], \"getConstructorParameters\": [\"type\"], \"getMethodParameters\": [\"type\", \"instance\", \"propertyKey\"], \"getParamerterNames\": [\"type\", \"propertyKey\"], \"isSingletonType\": [\"type\"], \"getMethodMetadatas\": [\"type\", \"propertyKey\"], \"filerDecorators\": [\"express\"], \"getParameters\": [\"type\", \"instance\", \"propertyKey\"], \"getTypeDecorators\": [\"decType\", \"match\"], \"buildAction\": [], \"toActionName\": [\"type\"] } };\n    };\n    return DefaultLifeScope;\n}());\nexports.DefaultLifeScope = DefaultLifeScope;\n\n\n});\n\nunwrapExports(DefaultLifeScope_1);\nvar DefaultLifeScope_2 = DefaultLifeScope_1.DefaultLifeScope;\n\nvar MetaAccessor_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * class metadata accessor.\n *\n * @export\n * @class MetaAccessor\n * @implements {IMetaAccessor<any>}\n */\nvar MetaAccessor = /** @class */ (function () {\n    function MetaAccessor() {\n    }\n    MetaAccessor.prototype.getDecorators = function (type) {\n        return factories.getClassDecorators(type);\n    };\n    /**\n     * get metadata config of target type. via decorators in order.\n     *\n     * @param {Token<any>} token\n     * @param {IContainer} container\n     * @param {IAnnotationMetadata<any>} [extConfig]\n     * @param {Express<string, boolean>} [decorFilter]\n     * @returns {IAnnotationMetadata<any>}\n     * @memberof MetaAccessor\n     */\n    MetaAccessor.prototype.getMetadata = function (token, container, extConfig, decorFilter) {\n        var type = utils.isClass(token) ? token : container.getTokenImpl(token);\n        var cfg;\n        if (utils.isClass(type)) {\n            var decors = this.getDecorators(type);\n            if (decorFilter) {\n                decors = decors.filter(decorFilter);\n            }\n            var classmeta_1 = {};\n            decors.forEach(function (decor) {\n                var metas = factories.getTypeMetadata(decor, type);\n                if (metas && metas.length) {\n                    metas.forEach(function (meta) {\n                        if (meta) {\n                            classmeta_1 = utils.lang.assign({}, classmeta_1, meta);\n                        }\n                    });\n                }\n            });\n            cfg = classmeta_1;\n        }\n        if (cfg) {\n            return utils.lang.assign({}, cfg, extConfig || {});\n        }\n        else {\n            return extConfig || {};\n        }\n    };\n    /**\n     * find metadata accessor.\n     *\n     * @param {Token<any>} token\n     * @param {IContainer} container\n     * @param {Express<IAnnotationMetadata<any>, boolean>} filter\n     * @param {Express<string, boolean>} [decorFilter]\n     * @returns {IAnnotationMetadata<any>}\n     * @memberof MetaAccessor\n     */\n    MetaAccessor.prototype.find = function (token, container, filter, decorFilter) {\n        var type = utils.isClass(token) ? token : container.getTokenImpl(token);\n        var metadata = null;\n        if (utils.isClass(type)) {\n            var decors = this.getDecorators(type);\n            if (decorFilter) {\n                decors = decors.filter(decorFilter);\n            }\n            decors.some(function (decor) {\n                var metas = factories.getTypeMetadata(decor, type);\n                if (metas && metas.length) {\n                    return metas.some(function (meta) {\n                        if (meta && filter(meta)) {\n                            metadata = meta;\n                        }\n                        return !!metadata;\n                    });\n                }\n                return false;\n            });\n        }\n        return metadata;\n    };\n    /**\n     * filter metadata accessor.\n     *\n     * @param {Token<any>} token\n     * @param {IContainer} container\n     * @param {Express<IAnnotationMetadata<any>, boolean>} filter\n     * @param {Express<string, boolean>} [decorFilter]\n     * @returns {IAnnotationMetadata<any>[]}\n     * @memberof MetaAccessor\n     */\n    MetaAccessor.prototype.filter = function (token, container, filter, decorFilter) {\n        var type = utils.isClass(token) ? token : container.getTokenImpl(token);\n        var metadatas = [];\n        if (utils.isClass(type)) {\n            var decors = this.getDecorators(type);\n            if (decorFilter) {\n                decors = decors.filter(decorFilter);\n            }\n            decors.forEach(function (decor) {\n                var metas = factories.getTypeMetadata(decor, type);\n                if (metas && metas.length) {\n                    metas.filter(function (meta) { return meta && filter(meta); }).forEach(function (meta) {\n                        metadatas.push(meta);\n                    });\n                }\n            });\n        }\n        return metadatas;\n    };\n    /**\n     * get token of metadata config.\n     *\n     * @param {IAnnotationMetadata<any>} config\n     * @param {IContainer} [container] vaild token in container or not.\n     * @returns {Token<any>}\n     * @memberof MetadataManager\n     */\n    MetaAccessor.prototype.getToken = function (config, container) {\n        var token = this.getTokenInConfig(config);\n        if (this.validateToken(token, container)) {\n            return token;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * get module boot token from module configure.\n     *\n     * @param {IAnnotationMetadata<any>} config\n     * @param {IContainer} [container]  vaild container.\n     * @returns {Token<any>}\n     * @memberof ModuelValidate\n     */\n    MetaAccessor.prototype.getBootToken = function (config, container) {\n        var token = this.getBootTokenInConfig(config);\n        if (this.validateToken(token, container)) {\n            return token;\n        }\n        else {\n            return null;\n        }\n    };\n    MetaAccessor.prototype.validateToken = function (token, container) {\n        return utils.isToken(token);\n    };\n    MetaAccessor.prototype.getTokenInConfig = function (config) {\n        return config.token || config.type;\n    };\n    MetaAccessor.prototype.getBootTokenInConfig = function (config) {\n        return config.bootstrap;\n    };\n    MetaAccessor.getClassAnnations = function () {\n        return { \"name\": \"MetaAccessor\", \"params\": { \"constructor\": [], \"getDecorators\": [\"type\"], \"getMetadata\": [\"token\", \"container\", \"extConfig\", \"decorFilter\"], \"find\": [\"token\", \"container\", \"filter\", \"decorFilter\"], \"filter\": [\"token\", \"container\", \"filter\", \"decorFilter\"], \"getToken\": [\"config\", \"container\"], \"getBootToken\": [\"config\", \"container\"], \"validateToken\": [\"token\", \"container\"], \"getTokenInConfig\": [\"config\"], \"getBootTokenInConfig\": [\"config\"] } };\n    };\n    return MetaAccessor;\n}());\nexports.MetaAccessor = MetaAccessor;\n\n\n});\n\nunwrapExports(MetaAccessor_1);\nvar MetaAccessor_2 = MetaAccessor_1.MetaAccessor;\n\nvar MethodAccessor_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * method accessor\n *\n * @export\n * @class MethodAccessor\n * @implements {IMethodAccessor}\n */\nvar MethodAccessor = /** @class */ (function () {\n    function MethodAccessor(container) {\n        this.container = container;\n    }\n    MethodAccessor.prototype.invoke = function (target, propertyKey, instance) {\n        var providers$$2 = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers$$2[_i - 3] = arguments[_i];\n        }\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, targetClass, actionData, lifeScope, parameters, paramInstances;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (providers.isProvider(instance)) {\n                            providers$$2.unshift(instance);\n                            instance = undefined;\n                        }\n                        if (utils.isToken(target)) {\n                            if (utils.isNullOrUndefined(instance)) {\n                                targetClass = this.container.getTokenImpl(target);\n                                instance = (_a = this.container).resolve.apply(_a, [target].concat(providers$$2));\n                            }\n                            else {\n                                targetClass = utils.lang.getClass(instance) || this.container.getTokenImpl(target);\n                            }\n                            utils.lang.assert(targetClass, target.toString() + ' is not implements by any class.');\n                        }\n                        else {\n                            targetClass = utils.lang.getClass(target);\n                            instance = target;\n                        }\n                        utils.lang.assertExp(instance && utils.isFunction(instance[propertyKey]), \"type: \" + targetClass + \" has no method \" + propertyKey.toString() + \".\");\n                        actionData = {\n                            target: instance,\n                            targetType: targetClass,\n                            propertyKey: propertyKey,\n                        };\n                        lifeScope = this.container.getLifeScope();\n                        lifeScope.execute(actionData, actions.LifeState.onInit, actions.CoreActions.bindParameterProviders);\n                        providers$$2 = providers$$2.concat(actionData.execResult);\n                        parameters = lifeScope.getMethodParameters(targetClass, instance, propertyKey);\n                        return [4 /*yield*/, this.createParams.apply(this, [parameters].concat(providers$$2))];\n                    case 1:\n                        paramInstances = _b.sent();\n                        return [2 /*return*/, instance[propertyKey].apply(instance, paramInstances)];\n                }\n            });\n        });\n    };\n    MethodAccessor.prototype.syncInvoke = function (target, propertyKey, instance) {\n        var providers$$2 = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers$$2[_i - 3] = arguments[_i];\n        }\n        var _a;\n        var targetClass;\n        if (providers.isProvider(instance)) {\n            providers$$2.unshift(instance);\n            instance = undefined;\n        }\n        if (utils.isToken(target)) {\n            targetClass = this.container.getTokenImpl(target);\n            utils.lang.assert(targetClass, target.toString() + ' is not implements by any class.');\n            if (utils.isNullOrUndefined(instance)) {\n                instance = (_a = this.container).resolve.apply(_a, [target].concat(providers$$2));\n            }\n        }\n        else {\n            targetClass = utils.lang.getClass(target);\n            instance = target;\n        }\n        utils.lang.assertExp(instance && utils.isFunction(instance[propertyKey]), \"type: \" + targetClass + \" has no method \" + propertyKey.toString() + \".\");\n        var actionData = {\n            target: instance,\n            targetType: targetClass,\n            propertyKey: propertyKey,\n        };\n        var lifeScope = this.container.getLifeScope();\n        lifeScope.execute(actionData, actions.LifeState.onInit, actions.CoreActions.bindParameterProviders);\n        providers$$2 = providers$$2.concat(actionData.execResult);\n        var parameters = lifeScope.getMethodParameters(targetClass, instance, propertyKey);\n        var paramInstances = this.createSyncParams.apply(this, [parameters].concat(providers$$2));\n        return instance[propertyKey].apply(instance, paramInstances);\n    };\n    MethodAccessor.prototype.createSyncParams = function (params) {\n        var _this = this;\n        var providers$$2 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers$$2[_i - 1] = arguments[_i];\n        }\n        var _a;\n        var providerMap = (_a = this.container.getProviderParser()).parse.apply(_a, providers$$2);\n        return params.map(function (param, index) {\n            if (param.name && providerMap.has(param.name)) {\n                return providerMap.resolve(param.name);\n            }\n            else if (utils.isToken(param.type)) {\n                if (providerMap.has(param.type)) {\n                    return providerMap.resolve(param.type);\n                }\n                return _this.container.resolve(param.type, providerMap);\n            }\n            else {\n                return undefined;\n            }\n        });\n    };\n    MethodAccessor.prototype.createParams = function (params) {\n        var _this = this;\n        var providers$$2 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers$$2[_i - 1] = arguments[_i];\n        }\n        var _a;\n        var providerMap = (_a = this.container.getProviderParser()).parse.apply(_a, providers$$2);\n        return Promise.all(params.map(function (param, index) {\n            if (param.name && providerMap.has(param.name)) {\n                return providerMap.resolve(param.name);\n            }\n            else if (utils.isToken(param.type)) {\n                if (providerMap.has(param.type)) {\n                    return providerMap.resolve(param.type);\n                }\n                return _this.container.resolve(param.type, providerMap);\n            }\n            else {\n                return undefined;\n            }\n        }));\n    };\n    MethodAccessor.getClassAnnations = function () {\n        return { \"name\": \"MethodAccessor\", \"params\": { \"constructor\": [\"container\"], \"invoke\": [\"target\", \"propertyKey\", \"instance\", \"providers\"], \"syncInvoke\": [\"target\", \"propertyKey\", \"instance\", \"providers\"], \"createSyncParams\": [\"params\", \"providers\"], \"createParams\": [\"params\", \"providers\"] } };\n    };\n    return MethodAccessor;\n}());\nexports.MethodAccessor = MethodAccessor;\n\n\n});\n\nunwrapExports(MethodAccessor_1);\nvar MethodAccessor_2 = MethodAccessor_1.MethodAccessor;\n\nvar CacheManager_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * cache manager.\n *\n * @export\n * @class CacheManager\n * @implements {ICacheManager}\n */\nvar CacheManager = /** @class */ (function () {\n    function CacheManager(container) {\n        this.container = container;\n        this.cacheTokens = new Map();\n    }\n    CacheManager.prototype.isChecking = function () {\n        return !!this.timeout;\n    };\n    CacheManager.prototype.hasCache = function (targetType) {\n        return this.cacheTokens.has(targetType);\n    };\n    CacheManager.prototype.cache = function (targetType, target, expires) {\n        var cache;\n        if (this.hasCache(targetType)) {\n            cache = this.cacheTokens.get(targetType);\n            cache.expires = Date.now() + expires;\n        }\n        else {\n            cache = {\n                target: target,\n                expires: Date.now() + expires\n            };\n        }\n        this.cacheTokens.set(targetType, cache);\n        if (!this.isChecking()) {\n            this.checkExpires();\n        }\n    };\n    CacheManager.prototype.get = function (targetType, expires) {\n        var result = null;\n        if (!this.cacheTokens.has(targetType)) {\n            return null;\n        }\n        var cache = this.cacheTokens.get(targetType);\n        if (cache.expires <= Date.now()) {\n            result = cache.target;\n            if (utils.isNumber(expires) && expires > 0) {\n                cache.expires = Date.now() + expires;\n                this.cacheTokens.set(targetType, cache);\n            }\n        }\n        else {\n            this.destroy(targetType, cache.target);\n        }\n        return result;\n    };\n    CacheManager.prototype.checkExpires = function () {\n        var _this = this;\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = 0;\n        }\n        if (this.cacheTokens.size > 0) {\n            var timeoutCaches_1 = [];\n            this.cacheTokens.forEach(function (cache, targetType) {\n                if (cache.expires >= Date.now()) {\n                    timeoutCaches_1.push(targetType);\n                }\n            });\n            if (timeoutCaches_1.length) {\n                timeoutCaches_1.forEach(function (targetType) {\n                    _this.destroy(targetType, _this.cacheTokens.get(targetType).target);\n                });\n            }\n            this.timeout = setTimeout(function () {\n                _this.checkExpires();\n            }, 60000);\n        }\n    };\n    CacheManager.prototype.destroy = function (targetType, target) {\n        if (!this.hasCache(targetType)) {\n            return;\n        }\n        if (!target) {\n            target = this.cacheTokens.get(targetType).target;\n        }\n        try {\n            var component = target;\n            if (utils.isFunction(component.onDestroy)) {\n                this.container.syncInvoke(target || targetType, 'onDestroy', target);\n            }\n            this.cacheTokens.delete(targetType);\n        }\n        catch (err) {\n            console.error && console.error(err);\n        }\n    };\n    CacheManager.getClassAnnations = function () {\n        return { \"name\": \"CacheManager\", \"params\": { \"constructor\": [\"container\"], \"isChecking\": [], \"hasCache\": [\"targetType\"], \"cache\": [\"targetType\", \"target\", \"expires\"], \"get\": [\"targetType\", \"expires\"], \"checkExpires\": [], \"destroy\": [\"targetType\", \"target\"] } };\n    };\n    return CacheManager;\n}());\nexports.CacheManager = CacheManager;\n\n\n});\n\nunwrapExports(CacheManager_1);\nvar CacheManager_2 = CacheManager_1.CacheManager;\n\nvar core = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(actions, exports);\ntslib_1.__exportStar(decorators, exports);\ntslib_1.__exportStar(factories, exports);\ntslib_1.__exportStar(IRecognizer, exports);\ntslib_1.__exportStar(ActionFactory_1, exports);\ntslib_1.__exportStar(DefaultLifeScope_1, exports);\ntslib_1.__exportStar(IMetaAccessor, exports);\ntslib_1.__exportStar(MetaAccessor_1, exports);\ntslib_1.__exportStar(MethodAccessor_1, exports);\ntslib_1.__exportStar(CacheManager_1, exports);\n\n\n});\n\nunwrapExports(core);\n\nvar IContainerBuilder = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * ContainerBuilder interface token.\n * it is a token id, you can register yourself IContainerBuilder for this.\n */\nexports.ContainerBuilderToken = new InjectToken_1.InjectToken('DI_IContainerBuilder');\n\n\n});\n\nunwrapExports(IContainerBuilder);\nvar IContainerBuilder_1 = IContainerBuilder.ContainerBuilderToken;\n\nvar LifeScope = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * life scope interface symbol.\n * it is a symbol id, you can register yourself MethodAccessor for this.\n */\nexports.LifeScopeToken = new InjectToken_1.InjectToken('DI_LifeScope');\n\n\n});\n\nunwrapExports(LifeScope);\nvar LifeScope_1 = LifeScope.LifeScopeToken;\n\nvar ResolverChain_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n *  resolver chain token.\n */\nexports.ResolverChainToken = new InjectToken_1.InjectToken('di_ResolverChain');\n/**\n * resover chain.\n *\n * resove by setp.\n *\n * @export\n * @class ResolverChain\n * @implements {IResolver}\n */\nvar ResolverChain = /** @class */ (function () {\n    function ResolverChain(container) {\n        this.container = container;\n        this.resolvers = [];\n    }\n    Object.defineProperty(ResolverChain.prototype, \"size\", {\n        get: function () {\n            return this.resolvers.length + 1;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * reigister next resolver.\n     *\n     * @param {IResolver} resolver\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.next = function (resolver) {\n        if (!this.hasResolver(resolver)) {\n            this.resolvers.push(resolver);\n        }\n    };\n    /**\n     * has resolver or not.\n     *\n     * @param {IResolver} resolver\n     * @returns\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.hasResolver = function (resolver) {\n        if (resolver === this.container) {\n            return true;\n        }\n        return this.resolvers.indexOf(resolver) >= 0;\n    };\n    /**\n     * resove token via registered resolver chain.\n     *\n     * @template T\n     * @param {SymbolType<T>} token\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.resolve = function (token, resway) {\n        var providers$$2 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            providers$$2[_i - 2] = arguments[_i];\n        }\n        var _a;\n        var key = this.container.getTokenKey(token, utils.isString(resway) ? resway : null);\n        var way;\n        if (utils.isNumber(resway)) {\n            way = resway;\n        }\n        else {\n            if (resway) {\n                providers$$2.unshift(resway);\n            }\n            way = IContainer.ResoveWay.all;\n        }\n        var providerMap;\n        if (providers$$2.length) {\n            if (providers$$2.length === 1 && providers.isProviderMap(providers$$2[0])) {\n                providerMap = providers$$2[0];\n            }\n            else {\n                providerMap = (_a = this.container.getProviderParser()).parse.apply(_a, providers$$2);\n            }\n        }\n        if (providerMap && providerMap.has(token)) {\n            return providerMap.resolve(token, providerMap);\n        }\n        if ((way & IContainer.ResoveWay.current) && this.container.hasRegister(key)) {\n            return this.container.resolveValue(key, providerMap);\n        }\n        if ((way & IContainer.ResoveWay.traverse)) {\n            var resolver = this.resolvers.find(function (r) { return r.has(key, IContainer.ResoveWay.nodes); });\n            if (resolver) {\n                return resolver.resolve(key, IContainer.ResoveWay.nodes, providerMap);\n            }\n        }\n        if (this.container.parent && (way & IContainer.ResoveWay.bubble)) {\n            return this.container.parent.resolve(key, resway, providerMap);\n        }\n        return null;\n    };\n    /**\n     * unregister token in registered resolver chain.\n     *\n     * @template T\n     * @param {SymbolType<T>} token\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.unregister = function (token, resway) {\n        resway = resway || IContainer.ResoveWay.all;\n        var tokenKey = this.container.getTokenKey(token);\n        if (resway & IContainer.ResoveWay.current) {\n            this.container.unregisterValue(tokenKey);\n        }\n        if (resway & IContainer.ResoveWay.traverse) {\n            this.resolvers.forEach(function (r) {\n                if (utils.isFunction(r.unregister)) {\n                    r.unregister(tokenKey, IContainer.ResoveWay.nodes);\n                }\n            });\n        }\n        if ((resway & IContainer.ResoveWay.bubble) && this.container.parent) {\n            this.container.parent.unregister(token, resway);\n        }\n        return this;\n    };\n    /**\n     * get token implements class in the registered resolver chain.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @returns {Type<T>}\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.getTokenImpl = function (token, resway) {\n        if (utils.isClass(token)) {\n            return token;\n        }\n        resway = resway || IContainer.ResoveWay.nodes;\n        var tokenKey = this.container.getTokenKey(token);\n        var provider;\n        if (resway & IContainer.ResoveWay.current) {\n            provider = this.container.getTokenProvider(tokenKey);\n        }\n        if (!provider && (resway & IContainer.ResoveWay.traverse)) {\n            this.resolvers.some(function (r) {\n                if (!utils.isFunction(r.getTokenImpl)) {\n                    return false;\n                }\n                provider = r.getTokenImpl(tokenKey, IContainer.ResoveWay.nodes);\n                return !!provider;\n            });\n        }\n        if (!provider && (resway & IContainer.ResoveWay.bubble) && this.container.parent) {\n            provider = this.container.parent.getTokenImpl(token, resway);\n        }\n        return provider || null;\n    };\n    /**\n     * has token or not in the registered resolver chain.\n     *\n     * @template T\n     * @param {SymbolType<T>} token\n     * @returns {boolean}\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.has = function (token, aliasOrway) {\n        var key = this.container.getTokenKey(token, utils.isString(aliasOrway) ? aliasOrway : null);\n        var resway = utils.isNumber(aliasOrway) ? aliasOrway : IContainer.ResoveWay.all;\n        if ((resway & IContainer.ResoveWay.current) && this.container.hasRegister(key)) {\n            return true;\n        }\n        if ((resway & IContainer.ResoveWay.traverse) && this.resolvers.some(function (r) { return r.has(key, IContainer.ResoveWay.nodes); })) {\n            return true;\n        }\n        if ((resway & IContainer.ResoveWay.bubble) && this.container.parent) {\n            return this.container.parent.has(token, resway);\n        }\n        return false;\n    };\n    /**\n     * resolver chain to array.\n     *\n     * @returns {IResolver[]}\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.toArray = function (resway) {\n        if (resway === void 0) { resway = IContainer.ResoveWay.all; }\n        if (resway & IContainer.ResoveWay.nodes) {\n            return [this.container].concat(this.resolvers);\n        }\n        else if (resway & IContainer.ResoveWay.current) {\n            return [this.container];\n        }\n        else if (resway & IContainer.ResoveWay.traverse) {\n            return this.resolvers;\n        }\n        return [];\n    };\n    ResolverChain.prototype.forEach = function (callbackfn) {\n        if (this.container.forEach(callbackfn) === false) {\n            return false;\n        }\n        return !this.resolvers.some(function (r) {\n            if (utils.isFunction(r.forEach)) {\n                return r.forEach(callbackfn) === false;\n            }\n            return false;\n        });\n    };\n    /**\n     * iterator all resolvers.\n     *\n     * @param {(tk: Token<any>, fac: InstanceFactory<any>, resolvor?: IResolver) => void} callbackfn\n     * @memberof ResolverChain\n     */\n    ResolverChain.prototype.iterator = function (callbackfn, resway) {\n        if (resway === void 0) { resway = IContainer.ResoveWay.all; }\n        if (resway & IContainer.ResoveWay.current) {\n            if (this.container.forEach(callbackfn) === false) {\n                return false;\n            }\n        }\n        if (resway & IContainer.ResoveWay.traverse) {\n            if (this.resolvers.some(function (r) {\n                if (utils.isFunction(r.forEach)) {\n                    return r.forEach(callbackfn) === false;\n                }\n                return false;\n            })) {\n                return false;\n            }\n        }\n        if (this.container.parent && (resway & IContainer.ResoveWay.bubble)) {\n            return this.container.parent.iterator(callbackfn, resway);\n        }\n    };\n    ResolverChain.getClassAnnations = function () {\n        return { \"name\": \"ResolverChain\", \"params\": { \"constructor\": [\"container\"], \"next\": [\"resolver\"], \"hasResolver\": [\"resolver\"], \"resolve\": [\"token\", \"resway\", \"providers\"], \"unregister\": [\"token\", \"resway\"], \"getTokenImpl\": [\"token\", \"resway\"], \"has\": [\"token\", \"aliasOrway\"], \"toArray\": [\"resway\"], \"forEach\": [\"callbackfn\"], \"iterator\": [\"callbackfn\", \"resway\"] } };\n    };\n    return ResolverChain;\n}());\nexports.ResolverChain = ResolverChain;\n\n\n});\n\nunwrapExports(ResolverChain_1);\nvar ResolverChain_2 = ResolverChain_1.ResolverChainToken;\nvar ResolverChain_3 = ResolverChain_1.ResolverChain;\n\nvar resolves = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(ResolverChain_1, exports);\n\n\n});\n\nunwrapExports(resolves);\n\nvar registerCores_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n/**\n * register core for container.\n *\n * @export\n * @param {IContainer} container\n */\nfunction registerCores(container) {\n    container.registerSingleton(LifeScope.LifeScopeToken, function () { return new core.DefaultLifeScope(container); });\n    container.registerSingleton(ICacheManager.CacheManagerToken, function () { return new core.CacheManager(container); });\n    container.registerSingleton(resolves.ResolverChainToken, function () { return new resolves.ResolverChain(container); });\n    container.register(providers.ProviderMapToken, function () { return new providers.ProviderMap(container); });\n    container.bindProvider(providers.ProviderMap, providers.ProviderMapToken);\n    container.registerSingleton(providers.ProviderParserToken, function () { return new providers.ProviderParser(container); });\n    container.registerSingleton(IMethodAccessor.MethodAccessorToken, function () { return new core.MethodAccessor(container); });\n    container.registerSingleton(core.MetaAccessorToken, core.MetaAccessor);\n    var lifeScope = container.get(LifeScope.LifeScopeToken);\n    lifeScope.registerDecorator(core.Injectable, core.CoreActions.bindProvider, core.CoreActions.cache);\n    lifeScope.registerDecorator(core.Component, core.CoreActions.bindProvider, core.CoreActions.cache, core.CoreActions.componentBeforeInit, core.CoreActions.componentInit, core.CoreActions.componentAfterInit);\n    lifeScope.registerDecorator(core.Singleton, core.CoreActions.bindProvider);\n    lifeScope.registerDecorator(core.Refs, core.CoreActions.bindProvider);\n    lifeScope.registerDecorator(core.Providers, core.CoreActions.bindProvider);\n    lifeScope.registerDecorator(core.Abstract, core.CoreActions.bindProvider, core.CoreActions.cache);\n    lifeScope.registerDecorator(core.AutoWired, core.CoreActions.bindParameterType, core.CoreActions.bindPropertyType);\n    lifeScope.registerDecorator(core.Inject, core.CoreActions.bindParameterType, core.CoreActions.bindPropertyType);\n    lifeScope.registerDecorator(core.Param, core.CoreActions.bindParameterType, core.CoreActions.bindPropertyType);\n    lifeScope.registerDecorator(core.Method, core.CoreActions.bindParameterProviders);\n    lifeScope.registerDecorator(core.Autorun, core.CoreActions.autorun, core.CoreActions.methodAutorun);\n    lifeScope.registerDecorator(core.IocExt, core.CoreActions.autorun, core.CoreActions.componentBeforeInit, core.CoreActions.componentInit, core.CoreActions.componentAfterInit);\n    container.register(Date, function () { return new Date(); });\n    container.register(String, function () { return ''; });\n    container.register(Number, function () { return Number.NaN; });\n    container.register(Boolean, function () { return undefined; });\n    container.register(Array, function () { return []; });\n}\nexports.registerCores = registerCores;\n\n\n});\n\nunwrapExports(registerCores_1);\nvar registerCores_2 = registerCores_1.registerCores;\n\nvar Container_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * singleton reg token.\n */\nvar SingletonRegToken = '___IOC__Singleton___';\n/**\n * Container\n *\n * @export\n * @class Container\n * @implements {IContainer}\n */\nvar Container = /** @class */ (function () {\n    function Container() {\n        // @enumerable(false)\n        this.children = [];\n        this.init();\n    }\n    Object.defineProperty(Container.prototype, \"size\", {\n        get: function () {\n            return this.factories.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * get root container.\n     *\n     * @returns {IContainer}\n     * @memberof Container\n     */\n    Container.prototype.getRoot = function () {\n        var root = this;\n        while (root.parent) {\n            root = root.parent;\n        }\n        return root;\n    };\n    Container.prototype.getProviderParser = function () {\n        if (!this.parser) {\n            this.parser = this.resolveValue(providers.ProviderParserToken);\n        }\n        return this.parser;\n    };\n    /**\n     * get container builder.\n     *\n     * @returns {IContainerBuilder}\n     * @memberof Container\n     */\n    Container.prototype.getBuilder = function () {\n        return this.resolveValue(IContainerBuilder.ContainerBuilderToken);\n    };\n    /**\n    * resolve token value in this container only.\n    *\n    * @template T\n    * @param {Token<T>} token\n    * @param {...ParamProviders[]} providers\n    * @returns {T}\n    * @memberof Container\n    */\n    Container.prototype.getResolvers = function () {\n        return this.resolveValue(resolves.ResolverChainToken);\n    };\n    /**\n     * has register the token or not.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [aliasOrway]\n     * @returns {boolean}\n     * @memberof Container\n     */\n    Container.prototype.has = function (token, aliasOrway) {\n        return this.getResolvers().has(token, aliasOrway);\n    };\n    /**\n     * has register type.\n     *\n     * @template T\n     * @param {Token<T>} key\n     * @returns\n     * @memberof Container\n     */\n    Container.prototype.hasRegister = function (key) {\n        return this.factories.has(this.getTokenKey(key));\n    };\n    /**\n     * Retrieves an instance from the container based on the provided token.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [alias]\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof Container\n     */\n    Container.prototype.get = function (token, alias) {\n        var providers$$1 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            providers$$1[_i - 2] = arguments[_i];\n        }\n        return this.resolve.apply(this, [alias ? this.getTokenKey(token, alias) : token].concat(providers$$1));\n    };\n    /**\n     * resolve type instance with token and param provider.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {T} [notFoundValue]\n     * @param {...ParamProviders[]} providers\n     * @memberof Container\n     */\n    Container.prototype.resolve = function (token, resway) {\n        var providers$$1 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            providers$$1[_i - 2] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.getResolvers()).resolve.apply(_a, [token, resway].concat(providers$$1));\n    };\n    /**\n     * resolve first token when not null.\n     *\n     * @template T\n     * @param {Token<T>[]} tokens\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof IContainer\n     */\n    Container.prototype.resolveFirst = function (tokens) {\n        var _this = this;\n        var providers$$1 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers$$1[_i - 1] = arguments[_i];\n        }\n        var inst;\n        tokens.some(function (tk) {\n            inst = _this.resolve.apply(_this, [tk].concat(providers$$1));\n            return inst !== null;\n        });\n        return inst;\n    };\n    /**\n     * resolve token value in this container only.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof IContainer\n     */\n    Container.prototype.resolveValue = function (token) {\n        var providers$$1 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers$$1[_i - 1] = arguments[_i];\n        }\n        var key = this.getTokenKey(token);\n        if (!this.hasRegister(key)) {\n            return null;\n        }\n        var factory = this.factories.get(key);\n        return factory.apply(void 0, providers$$1);\n    };\n    /**\n     * get service or target reference service.\n     *\n     * @template T\n     * @param {(Token<T> | Token<any>[])} token servive token.\n     * @param {(RefTarget | RefTarget[])} [target] service refrence target.\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof Container\n     */\n    Container.prototype.getService = function (token, target, toRefToken, defaultToken) {\n        var _this = this;\n        var providers$$1 = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            providers$$1[_i - 4] = arguments[_i];\n        }\n        if (utils.isArray(target) || utils.isToken(target) || utils.isRefTarget(target) || utils.isTypeObject(target)) {\n            var tokens_1 = [];\n            (utils.isArray(token) ? token : [token]).forEach(function (tk) {\n                tokens_1.push(tk);\n                if (!utils.isClass(tk)) {\n                    tokens_1.push(_this.getTokenImpl(tk));\n                }\n            });\n            var fac_1;\n            var defToken = void 0;\n            var prds = [];\n            if (utils.isBoolean(toRefToken)) {\n                if (toRefToken) {\n                    defToken = token;\n                }\n                else {\n                    defToken = null;\n                }\n            }\n            else if (utils.isToken(toRefToken)) {\n                defToken = toRefToken;\n            }\n            else if (utils.isFunction(toRefToken)) {\n                fac_1 = toRefToken;\n                if (utils.isBoolean(defaultToken)) {\n                    if (defaultToken) {\n                        defToken = token;\n                    }\n                    else {\n                        defToken = null;\n                    }\n                }\n                else if (utils.isToken(defaultToken)) {\n                    defToken = defaultToken;\n                }\n                else if (defaultToken) {\n                    prds.push(defaultToken);\n                }\n            }\n            else if (toRefToken) {\n                prds.unshift(toRefToken);\n            }\n            defToken = defToken === null ? null : (defToken || token);\n            prds = prds.concat(providers$$1);\n            return this.getRefService.apply(this, [tokens_1.map(function (tk) { return { service: tk, isPrivate: true }; }).concat(fac_1 ? [function (tk) { return fac_1(tk); }] : [], tokens_1.map(function (t) { return function (tk) { return new InjectReference_1.InjectReference(t, tk); }; })), target,\n                defToken].concat(prds));\n        }\n        else {\n            return this.resolveFirst.apply(this, [utils.isArray(token) ? token : [token]].concat([target, toRefToken, defaultToken].concat(providers$$1).filter(function (a) { return a; })));\n        }\n    };\n    /**\n     * get target reference service.\n     *\n     * @template T\n     * @param {Type<Registration<T>>} [refToken] reference service Registration Injector\n     * @param {RefTarget | RefTarget[]} target  the service reference to.\n     * @param {Token<T>} [defaultToken] default service token.\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof Container\n     */\n    Container.prototype.getRefService = function (refToken, target, defaultToken) {\n        var _this = this;\n        var providers$$1 = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers$$1[_i - 3] = arguments[_i];\n        }\n        var service = null;\n        (utils.isArray(target) ? target : [target])\n            .some(function (tag) {\n            _this.forInRefTarget(tag, function (tk) {\n                // exclude ref registration.\n                if (InjectReference_1.isInjectReference(tk)) {\n                    return true;\n                }\n                return !(utils.isArray(refToken) ? refToken : [refToken]).some(function (stk) {\n                    var tokens = _this.getRefToken(stk, tk);\n                    return (utils.isArray(tokens) ? tokens : [tokens]).some(function (rtk) {\n                        service = _this.resolveRef.apply(_this, [rtk, tk].concat(providers$$1));\n                        return service !== null;\n                    });\n                });\n            });\n            return service !== null;\n        });\n        if (!service && defaultToken) {\n            service = this.resolveFirst.apply(this, [utils.isArray(defaultToken) ? defaultToken : [defaultToken]].concat(providers$$1));\n        }\n        return service;\n    };\n    /**\n     * get all service extends type and reference target.\n     *\n     * @template T\n     * @param {(Token<T> | ((token: ClassType<T>) => boolean))} type servive token or express match token.\n     * @param {(Token<any> | Token<any>[])} [target] service refrence target.\n     * @param {(boolean|ParamProviders)} [both]\n     * @param {(boolean|ParamProviders)} [both] get services bubble up to parent container.\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof IContainer\n     */\n    Container.prototype.getServices = function (token, target, both, resway) {\n        var providers$$1 = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            providers$$1[_i - 4] = arguments[_i];\n        }\n        var services = [];\n        this.iteratorServices.apply(this, [function (tk, fac, resolver) {\n                var pds = [];\n                for (var _i = 3; _i < arguments.length; _i++) {\n                    pds[_i - 3] = arguments[_i];\n                }\n                services.push(fac.apply(void 0, pds));\n            }, token, target, both, resway].concat(providers$$1));\n        return services;\n    };\n    /**\n     * get all service extends type and reference target.\n     *\n     * @template T\n     * @param {(tk: ClassType<T>, fac: InstanceFactory<T>, resolvor?: IResolver, ...providers: ParamProviders[]) => void | boolean} express\n     * @param {(Token<T> | ((token: ClassType<T>) => boolean))} type servive token or express match token.\n     * @param {(Token<any> | Token<any>[])} [target] service refrence target.\n     * @param {(boolean|ParamProviders)} [both]\n     * @param {(boolean|ParamProviders)} [both] get services bubble up to parent container.\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof IContainer\n     */\n    Container.prototype.iteratorServices = function (express, token, target, both, resway) {\n        var _this = this;\n        var providers$$1 = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            providers$$1[_i - 5] = arguments[_i];\n        }\n        var withTag;\n        var rway = IContainer.ResoveWay.all;\n        var withBoth = false;\n        var matchExp;\n        if (utils.isToken(token)) {\n            var type_1 = utils.isClassType(token) ? token : this.getTokenImpl(token);\n            matchExp = function (tk) { return utils.lang.isExtendsClass(tk, type_1); };\n        }\n        else if (utils.isFunction(token)) {\n            matchExp = token;\n        }\n        if (utils.isNumber(resway)) {\n            rway = resway;\n        }\n        else {\n            providers$$1.unshift(resway);\n        }\n        if (utils.isToken(target) || utils.isArray(target)) {\n            withTag = true;\n            if (utils.isBoolean(both)) {\n                withBoth = both;\n            }\n            else if (utils.isNumber(both)) {\n                rway = both;\n            }\n            else {\n                providers$$1.unshift(both);\n            }\n            var tags_1 = (utils.isArray(target) ? target : [target]).map(function (t) {\n                if (utils.isClass(t)) {\n                    return t;\n                }\n                else if (utils.isAbstractClass(t)) {\n                    return t;\n                }\n                else {\n                    return _this.getTokenImpl(t);\n                }\n            });\n            // target private service.\n            this.getResolvers().toArray().some(function (resolver) {\n                return tags_1.some(function (tg) {\n                    var priMapTk = new InjectReference_1.InjectReference(providers.ProviderMap, tg);\n                    if (resolver.has(priMapTk, IContainer.ResoveWay.nodes)) {\n                        var priMap_1 = resolver.resolve(priMapTk, IContainer.ResoveWay.nodes);\n                        return priMap_1.keys().some(function (ptk) {\n                            if (utils.isClassType(ptk) && matchExp(ptk)) {\n                                return express.apply(void 0, [ptk, priMap_1.get(ptk), priMap_1].concat(providers$$1)) !== false;\n                            }\n                            return false;\n                        });\n                    }\n                    return false;\n                });\n            });\n        }\n        else {\n            if (utils.isNumber(target)) {\n                rway = target;\n            }\n            else {\n                providers$$1.unshift(target);\n            }\n            withTag = false;\n        }\n        if (!withTag || (withTag && withBoth)) {\n            this.iterator(function (tk, fac, resolver) {\n                if (utils.isClassType(tk) && matchExp(tk)) {\n                    return express.apply(void 0, [tk, fac, resolver].concat(providers$$1));\n                }\n            }, rway);\n        }\n    };\n    /**\n     * iterator all registered factory\n     *\n     * @param {(tk: Token<any>, fac: InstanceFactory<any>, resolvor?: IResolver) => void | boolean} callbackfn\n     * @param {ResoveWay} [resway= ResoveWay.all]\n     * @memberof Container\n     */\n    Container.prototype.iterator = function (callbackfn, resway) {\n        if (resway === void 0) { resway = IContainer.ResoveWay.all; }\n        this.getResolvers().iterator(callbackfn, resway);\n    };\n    /**\n     * iterator.\n     *\n     * @param {(tk: Token<any>, fac: InstanceFactory<any>) => void | boolean} callbackfn\n     * @memberof IExports\n     */\n    Container.prototype.forEach = function (callbackfn) {\n        var _this = this;\n        return !Array.from(this.factories.keys()).some(function (tk) {\n            return callbackfn(tk, _this.factories.get(tk), _this) === false;\n        });\n    };\n    Container.prototype.getRefToken = function (ref, tk) {\n        if (Registration_1.isRegistrationClass(ref)) {\n            return new ref(tk);\n        }\n        if (utils.isToken(ref)) {\n            return ref;\n        }\n        if (utils.isFunction(ref)) {\n            return ref(tk);\n        }\n        return ref;\n    };\n    Container.prototype.resolveRef = function (refToken, target) {\n        var providers$$1 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            providers$$1[_i - 2] = arguments[_i];\n        }\n        var tk;\n        var isPrivate = false;\n        if (utils.isToken(refToken)) {\n            tk = refToken;\n        }\n        else {\n            tk = refToken.service;\n            isPrivate = refToken.isPrivate !== false;\n        }\n        if (!tk) {\n            return null;\n        }\n        // resolve private first.\n        if (utils.isClass(target) && !InjectReference_1.isInjectReference(tk)) {\n            var pdrmap = this.resolve(new InjectReference_1.InjectReference(providers.ProviderMap, target));\n            if (pdrmap && pdrmap.has(tk)) {\n                return pdrmap.resolve.apply(pdrmap, [tk].concat(providers$$1));\n            }\n        }\n        // have not private registered.\n        if (isPrivate) {\n            return null;\n        }\n        return this.resolve.apply(this, [tk].concat(providers$$1));\n    };\n    /**\n     * get tocken key.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [alias]\n     * @returns {SymbolType<T>}\n     * @memberof Container\n     */\n    Container.prototype.getTokenKey = function (token, alias) {\n        if (alias) {\n            return new Registration_1.Registration(token, alias).toString();\n        }\n        else if (token instanceof Registration_1.Registration) {\n            return token.toString();\n        }\n        return token;\n    };\n    /**\n     * register type.\n     * @abstract\n     * @template T\n     * @param {Token<T>} token\n     * @param {T} [value]\n     * @returns {this}\n     * @memberOf Container\n     */\n    Container.prototype.register = function (token, value) {\n        this.registerFactory(token, value);\n        return this;\n    };\n    /**\n     * register stingleton type.\n     * @abstract\n     * @template T\n     * @param {Token<T>} token\n     * @param {Factory<T>} [value]\n     * @returns {this}\n     * @memberOf Container\n     */\n    Container.prototype.registerSingleton = function (token, value) {\n        this.registerFactory(token, value, true);\n        return this;\n    };\n    /**\n     * register value.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {T} value\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.registerValue = function (token, value) {\n        var _this = this;\n        var key = this.getTokenKey(token);\n        this.getSingleton().set(key, value);\n        if (!this.factories.has(key)) {\n            this.factories.set(key, function () {\n                return _this.getSingleton().get(key);\n            });\n        }\n        return this;\n    };\n    /**\n     * bind provider.\n     *\n     * @template T\n     * @param {Token<T>} provide\n     * @param {Token<T>} provider\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.bindProvider = function (provide, provider) {\n        var _this = this;\n        var provideKey = this.getTokenKey(provide);\n        var factory;\n        if (utils.isToken(provider)) {\n            factory = function () {\n                var providers$$1 = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers$$1[_i] = arguments[_i];\n                }\n                return _this.resolve.apply(_this, [provider].concat(providers$$1));\n            };\n        }\n        else {\n            if (utils.isFunction(provider)) {\n                factory = function () {\n                    var providers$$1 = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        providers$$1[_i] = arguments[_i];\n                    }\n                    return provider.apply(void 0, [_this].concat(providers$$1));\n                };\n            }\n            else {\n                factory = function () {\n                    return provider;\n                };\n            }\n        }\n        if (utils.isClass(provider)) {\n            if (!this.has(provider)) {\n                this.register(provider);\n            }\n            this.provideTypes.set(provideKey, provider);\n        }\n        else if (utils.isToken(provider)) {\n            var token = provider;\n            while (this.provideTypes.has(token) && !utils.isClass(token)) {\n                token = this.provideTypes.get(token);\n                if (utils.isClass(token)) {\n                    this.provideTypes.set(provideKey, token);\n                    break;\n                }\n            }\n        }\n        this.factories.set(provideKey, factory);\n        return this;\n    };\n    /**\n     * bind providers for only target class.\n     *\n     * @param {Token<any>} target\n     * @param {ParamProviders[]} providers\n     * @param {(mapTokenKey: Token<any>) => void} [onceBinded]\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.bindProviders = function (target, onceBinded) {\n        var _this = this;\n        var providers$$1 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            providers$$1[_i - 2] = arguments[_i];\n        }\n        var _a;\n        var tgt;\n        var complete;\n        var prods = providers$$1;\n        if (utils.isFunction(onceBinded)) {\n            complete = onceBinded;\n        }\n        else if (onceBinded) {\n            prods.unshift(onceBinded);\n        }\n        if (utils.isToken(target)) {\n            tgt = target;\n        }\n        else if (target) {\n            tgt = null;\n            prods.unshift(target);\n        }\n        var maps = (_a = this.getProviderParser()).parse.apply(_a, prods);\n        if (tgt) {\n            var refKey = new InjectReference_1.InjectReference(providers.ProviderMap, utils.isClass(tgt) ? tgt : this.getTokenImpl(tgt));\n            if (this.hasRegister(refKey)) {\n                this.resolveValue(refKey).copy(maps);\n            }\n            else {\n                this.bindProvider(refKey, maps);\n                complete && complete(refKey);\n            }\n        }\n        else {\n            maps.keys().forEach(function (key) {\n                utils.isToken(key) && _this.factories.set(key, function () {\n                    var prds = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        prds[_i] = arguments[_i];\n                    }\n                    return maps.resolve.apply(maps, [key].concat(prds));\n                });\n            });\n        }\n        return this;\n    };\n    /**\n     * bind provider ref to target.\n     *\n     * @template T\n     * @param {Token<any>} target\n     * @param {Token<T>} provide\n     * @param {(Token<T> | Factory<T>)} provider\n     * @param {string} [alias]\n     * @param {(refToken: Token<T>) => void} [onceBinded]\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.bindRefProvider = function (target, provide, provider, alias, onceBinded) {\n        var refToken = new InjectReference_1.InjectReference(this.getTokenKey(provide, alias), target);\n        this.bindProvider(refToken, provider);\n        onceBinded && onceBinded(refToken);\n        return this;\n    };\n    Container.prototype.unregisterValue = function (token) {\n        var key = this.getTokenKey(token);\n        if (this.hasRegister(key)) {\n            this.factories.delete(key);\n            if (this.provideTypes.has(key)) {\n                this.provideTypes.delete(key);\n            }\n            if (utils.isClass(key)) {\n                this.clearCache(key);\n            }\n        }\n        return this;\n    };\n    /**\n     * unregister the token\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {ResoveWay} [resway]\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.unregister = function (token, resway) {\n        this.getResolvers().unregister(token, resway);\n        return this;\n    };\n    /**\n     * clear cache.\n     *\n     * @param {Type<any>} targetType\n     * @memberof IContainer\n     */\n    Container.prototype.clearCache = function (targetType) {\n        this.resolveValue(ICacheManager.CacheManagerToken).destroy(targetType);\n    };\n    /**\n     * get token.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {string} [alias]\n     * @returns {Token<T>}\n     * @memberof Container\n     */\n    Container.prototype.getToken = function (token, alias) {\n        if (alias) {\n            return new Registration_1.Registration(token, alias);\n        }\n        return token;\n    };\n    Container.prototype.getTokenProvider = function (token) {\n        if (utils.isClass(token)) {\n            return token;\n        }\n        var tokenKey = this.getTokenKey(token);\n        if (this.provideTypes.has(tokenKey)) {\n            return this.provideTypes.get(tokenKey);\n        }\n        return null;\n    };\n    /**\n     * get token implements class type.\n     *\n     * @template T\n     * @param {Token<T>} token\n     * @param {boolean} [inchain]\n     * @returns {Type<T>}\n     * @memberof Container\n     */\n    Container.prototype.getTokenImpl = function (token, resway) {\n        return this.getResolvers().getTokenImpl(token, resway);\n    };\n    /**\n     * iterate token  in  token class chain.  return false will break iterate.\n     *\n     * @param {RefTarget} target\n     * @param {(token: Token<any>) => boolean} express\n     * @memberof Container\n     */\n    Container.prototype.forInRefTarget = function (target, express) {\n        var _this = this;\n        var type;\n        var token;\n        var level;\n        if (utils.isToken(target)) {\n            token = target;\n            level = types.RefTagLevel.all;\n        }\n        else if (target) {\n            if (utils.isRefTarget(target)) {\n                token = target.target;\n                level = target.level || types.RefTagLevel.self;\n            }\n            else if (utils.isTypeObject(target)) {\n                token = utils.lang.getClass(target);\n                level = types.RefTagLevel.all;\n            }\n        }\n        if (!utils.isToken(token)) {\n            return;\n        }\n        if (utils.isClassType(token)) {\n            type = token;\n            if (utils.isClass(type) && !this.has(type)) {\n                this.use(type);\n            }\n        }\n        else {\n            type = this.getTokenImpl(token);\n        }\n        if (!utils.isClassType(token) || (types.RefTagLevel.self === level)) {\n            express(token);\n            return;\n        }\n        var inChain = (level & types.RefTagLevel.chain) > 0;\n        var inProviders = (level & types.RefTagLevel.providers) > 0;\n        utils.lang.forInClassChain(type, function (ty) {\n            var tokens;\n            if (inProviders) {\n                var prdKey = new InjectReference_1.InjectClassProvidesToken(ty);\n                var prds = _this.get(prdKey);\n                if (prds && prds.provides && prds.provides.length) {\n                    var ppdkey_1 = prdKey.toString();\n                    var pmapKey_1 = new InjectReference_1.InjectReference(providers.ProviderMap, ty).toString();\n                    tokens = prds.provides.slice(1).filter(function (p) {\n                        var key = _this.getTokenKey(p);\n                        return key !== ppdkey_1 && key !== pmapKey_1;\n                    });\n                }\n            }\n            tokens = tokens || [];\n            return !(tokens.concat(ty).some(function (tk) { return express(tk) === false; })) && inChain;\n        });\n    };\n    /**\n     * get token implement class and base classes.\n     *\n     * @param {Token<any>} token\n     * @returns {Token<any>[]}\n     * @memberof Container\n     */\n    Container.prototype.getTokenClassChain = function (token, chain) {\n        if (chain === void 0) { chain = true; }\n        var tokens = [];\n        this.forInRefTarget(token, function (tk) {\n            tokens.push(tk);\n            return chain;\n        });\n        return tokens;\n    };\n    /**\n    * get life scope of container.\n    *\n    * @returns {LifeScope}\n    * @memberof IContainer\n    */\n    Container.prototype.getLifeScope = function () {\n        return this.get(LifeScope.LifeScopeToken);\n    };\n    /**\n     * use modules.\n     *\n     * @param {...Modules[]} modules\n     * @returns {this}\n     * @memberof Container\n     */\n    Container.prototype.use = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var _a;\n        (_a = this.getBuilder()).syncLoadModule.apply(_a, [this].concat(modules));\n        return this;\n    };\n    /**\n     * async use modules.\n     *\n     * @param {...LoadType[]} modules load modules.\n     * @returns {Promise<Type<any>[]>}  types loaded.\n     * @memberof IContainer\n     */\n    Container.prototype.loadModule = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.getBuilder()).loadModule.apply(_a, [this].concat(modules));\n    };\n    /**\n     * invoke method async.\n     *\n     * @template T\n     * @param {any} target\n     * @param {string} propertyKey\n     * @param {*} [instance]\n     * @param {...ParamProviders[]} providers\n     * @returns {Promise<T>}\n     * @memberof Container\n     */\n    Container.prototype.invoke = function (target, propertyKey, instance) {\n        var providers$$1 = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers$$1[_i - 3] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).invoke.apply(_a, [target, propertyKey, instance].concat(providers$$1));\n    };\n    /**\n     * invoke method.\n     *\n     * @template T\n     * @param {any} target\n     * @param {string} propertyKey\n     * @param {*} [instance]\n     * @param {...ParamProviders[]} providers\n     * @returns {T}\n     * @memberof Container\n     */\n    Container.prototype.syncInvoke = function (target, propertyKey, instance) {\n        var providers$$1 = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            providers$$1[_i - 3] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).syncInvoke.apply(_a, [target, propertyKey, instance].concat(providers$$1));\n    };\n    Container.prototype.createSyncParams = function (params) {\n        var providers$$1 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers$$1[_i - 1] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).createSyncParams.apply(_a, [params].concat(providers$$1));\n    };\n    Container.prototype.createParams = function (params) {\n        var providers$$1 = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            providers$$1[_i - 1] = arguments[_i];\n        }\n        var _a;\n        return (_a = this.resolveValue(IMethodAccessor.MethodAccessorToken)).createParams.apply(_a, [params].concat(providers$$1));\n    };\n    Container.prototype.cacheDecorator = function (map, action) {\n        if (!map.has(action.name)) {\n            map.set(action.name, action);\n        }\n    };\n    Container.prototype.init = function () {\n        var _this = this;\n        this.factories = new Map();\n        this.provideTypes = new Map();\n        this.bindProvider(IContainer.ContainerToken, function () { return _this; });\n        registerCores_1.registerCores(this);\n    };\n    Container.prototype.getSingleton = function () {\n        if (!this.hasRegister(SingletonRegToken)) {\n            this.bindProvider(SingletonRegToken, new Map());\n        }\n        return this.resolveValue(SingletonRegToken);\n    };\n    Container.prototype.registerFactory = function (token, value, singleton) {\n        var key = this.getTokenKey(token);\n        if (this.factories.has(key)) {\n            return;\n        }\n        var classFactory;\n        if (!utils.isUndefined(value)) {\n            if (utils.isFunction(value)) {\n                if (utils.isClass(value)) {\n                    this.bindTypeFactory(key, value, singleton);\n                }\n                else {\n                    classFactory = this.createCustomFactory(key, value, singleton);\n                }\n            }\n            else if (singleton && value !== undefined) {\n                classFactory = this.createCustomFactory(key, function () { return value; }, singleton);\n            }\n        }\n        else if (!utils.isString(token) && !utils.isSymbol(token)) {\n            var ClassT = (token instanceof Registration_1.Registration) ? token.getClass() : token;\n            if (utils.isClass(ClassT)) {\n                this.bindTypeFactory(key, ClassT, singleton);\n            }\n        }\n        if (classFactory) {\n            this.factories.set(key, classFactory);\n        }\n    };\n    Container.prototype.createCustomFactory = function (key, factory, singleton) {\n        var _this = this;\n        return singleton ?\n            function () {\n                var providers$$1 = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers$$1[_i] = arguments[_i];\n                }\n                if (_this.getSingleton().has(key)) {\n                    return _this.getSingleton().get(key);\n                }\n                var instance = factory.apply(void 0, [_this].concat(providers$$1));\n                _this.getSingleton().set(key, instance);\n                return instance;\n            }\n            : function () {\n                var providers$$1 = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    providers$$1[_i] = arguments[_i];\n                }\n                return factory.apply(void 0, [_this].concat(providers$$1));\n            };\n    };\n    Container.prototype.bindTypeFactory = function (key, ClassT, singleton) {\n        var _this = this;\n        if (!Reflect.isExtensible(ClassT)) {\n            return;\n        }\n        var lifeScope = this.getLifeScope();\n        var parameters = lifeScope.getConstructorParameters(ClassT);\n        if (!singleton) {\n            singleton = lifeScope.isSingletonType(ClassT);\n        }\n        var factory = function () {\n            var providers$$1 = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                providers$$1[_i] = arguments[_i];\n            }\n            var _a;\n            if (singleton && _this.getSingleton().has(key)) {\n                return _this.getSingleton().get(key);\n            }\n            if (providers$$1.length < 1) {\n                var lifecycleData = {\n                    tokenKey: key,\n                    targetType: ClassT,\n                    // raiseContainer: this,\n                    singleton: singleton\n                };\n                lifeScope.execute(lifecycleData, core.CoreActions.cache);\n                if (lifecycleData.execResult && lifecycleData.execResult instanceof ClassT) {\n                    return lifecycleData.execResult;\n                }\n            }\n            var providerMap = (_a = _this.getProviderParser()).parse.apply(_a, providers$$1);\n            lifeScope.execute({\n                tokenKey: key,\n                targetType: ClassT,\n                raiseContainer: _this,\n                params: parameters,\n                providers: providers$$1,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.beforeCreateArgs);\n            var args = _this.createSyncParams(parameters, providerMap);\n            lifeScope.routeExecute({\n                tokenKey: key,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers$$1,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.beforeConstructor);\n            var instance = new (ClassT.bind.apply(ClassT, [void 0].concat(args)))();\n            lifeScope.routeExecute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers$$1,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.afterConstructor);\n            lifeScope.execute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers$$1,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.onInit);\n            lifeScope.routeExecute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this,\n                args: args,\n                params: parameters,\n                providers: providers$$1,\n                providerMap: providerMap,\n                singleton: singleton\n            }, types.IocState.runtime, core.LifeState.AfterInit);\n            lifeScope.execute({\n                tokenKey: key,\n                target: instance,\n                targetType: ClassT,\n                raiseContainer: _this\n            }, core.CoreActions.cache);\n            return instance;\n        };\n        this.factories.set(key, factory);\n        lifeScope.routeExecute({\n            tokenKey: key,\n            targetType: ClassT,\n            raiseContainer: this\n        }, types.IocState.design);\n    };\n    Container.getClassAnnations = function () {\n        return { \"name\": \"Container\", \"params\": { \"constructor\": [], \"getRoot\": [], \"getProviderParser\": [], \"getBuilder\": [], \"getResolvers\": [], \"has\": [\"token\", \"aliasOrway\"], \"hasRegister\": [\"key\"], \"get\": [\"token\", \"alias\", \"providers\"], \"resolve\": [\"token\", \"resway\", \"providers\"], \"resolveFirst\": [\"tokens\", \"providers\"], \"resolveValue\": [\"token\", \"providers\"], \"getService\": [\"token\", \"target\", \"toRefToken\", \"defaultToken\", \"providers\"], \"getRefService\": [\"refToken\", \"target\", \"defaultToken\", \"providers\"], \"getServices\": [\"token\", \"target\", \"both\", \"resway\", \"providers\"], \"iteratorServices\": [\"express\", \"token\", \"target\", \"both\", \"resway\", \"providers\"], \"iterator\": [\"callbackfn\", \"resway\"], \"forEach\": [\"callbackfn\"], \"getRefToken\": [\"ref\", \"tk\"], \"resolveRef\": [\"refToken\", \"target\", \"providers\"], \"getTokenKey\": [\"token\", \"alias\"], \"register\": [\"token\", \"value\"], \"registerSingleton\": [\"token\", \"value\"], \"registerValue\": [\"token\", \"value\"], \"bindProvider\": [\"provide\", \"provider\"], \"bindProviders\": [\"target\", \"onceBinded\", \"providers\"], \"bindRefProvider\": [\"target\", \"provide\", \"provider\", \"alias\", \"onceBinded\"], \"unregisterValue\": [\"token\"], \"unregister\": [\"token\", \"resway\"], \"clearCache\": [\"targetType\"], \"getToken\": [\"token\", \"alias\"], \"getTokenProvider\": [\"token\"], \"getTokenImpl\": [\"token\", \"resway\"], \"forInRefTarget\": [\"target\", \"express\"], \"getTokenClassChain\": [\"token\", \"chain\"], \"getLifeScope\": [], \"use\": [\"modules\"], \"loadModule\": [\"modules\"], \"invoke\": [\"target\", \"propertyKey\", \"instance\", \"providers\"], \"syncInvoke\": [\"target\", \"propertyKey\", \"instance\", \"providers\"], \"createSyncParams\": [\"params\", \"providers\"], \"createParams\": [\"params\", \"providers\"], \"cacheDecorator\": [\"map\", \"action\"], \"init\": [], \"getSingleton\": [], \"registerFactory\": [\"token\", \"value\", \"singleton\"], \"createCustomFactory\": [\"key\", \"factory\", \"singleton\"], \"bindTypeFactory\": [\"key\", \"ClassT\", \"singleton\"] } };\n    };\n    return Container;\n}());\nexports.Container = Container;\n\n\n});\n\nunwrapExports(Container_1);\nvar Container_2 = Container_1.Container;\n\nvar IModuleLoader = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * module loader token.\n */\nexports.ModuleLoaderToken = new InjectToken_1.InjectToken('DI_ModuleLoader');\n\n\n});\n\nunwrapExports(IModuleLoader);\nvar IModuleLoader_1 = IModuleLoader.ModuleLoaderToken;\n\nvar DefaultModuleLoader_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * default module loader.\n *\n * @export\n * @class DefaultModuleLoader\n * @implements {IModuleLoader}\n */\nvar DefaultModuleLoader = /** @class */ (function () {\n    function DefaultModuleLoader() {\n    }\n    DefaultModuleLoader.prototype.getLoader = function () {\n        if (!this._loader) {\n            this._loader = this.createLoader();\n        }\n        return this._loader;\n    };\n    /**\n     * load module.\n     *\n     * @param {...LoadType[]} modules\n     * @returns {Promise<Modules[]>}\n     * @memberof DefaultModuleLoader\n     */\n    DefaultModuleLoader.prototype.load = function (modules) {\n        var _this = this;\n        if (modules.length) {\n            return Promise.all(modules.map(function (mdty) {\n                if (utils.isString(mdty)) {\n                    return _this.isFile(mdty) ? _this.loadFile(mdty) : _this.loadModule(mdty);\n                }\n                else if (utils.isObject(mdty) && (mdty['modules'] || mdty['files'])) {\n                    return _this.loadPathModule(mdty);\n                }\n                else {\n                    return mdty ? [mdty] : [];\n                }\n            }))\n                .then(function (allms) {\n                var rmodules = [];\n                allms.forEach(function (ms) {\n                    rmodules = rmodules.concat(ms);\n                });\n                return rmodules;\n            });\n        }\n        else {\n            return Promise.resolve([]);\n        }\n    };\n    /**\n     * load types from module.\n     *\n     * @param {...LoadType[]} modules\n     * @returns {Promise<Type<any>[]>}\n     * @memberof IContainerBuilder\n     */\n    DefaultModuleLoader.prototype.loadTypes = function (modules) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var mdls;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.load(modules)];\n                    case 1:\n                        mdls = _a.sent();\n                        return [2 /*return*/, this.getTypes(mdls)];\n                }\n            });\n        });\n    };\n    /**\n     * get all class type in modules.\n     *\n     * @param {Modules[]} modules\n     * @param {...Express<Type<any>, boolean>[]} filters\n     * @returns {Type<any>[]}\n     * @memberof DefaultModuleLoader\n     */\n    DefaultModuleLoader.prototype.getTypes = function (modules) {\n        var _this = this;\n        var regModules = [];\n        modules.forEach(function (m) {\n            var types = _this.getContentTypes(m);\n            regModules.push(types);\n        });\n        return regModules;\n    };\n    DefaultModuleLoader.prototype.loadFile = function (files, basePath) {\n        var loader = this.getLoader();\n        var fRes;\n        if (utils.isArray(files)) {\n            fRes = Promise.all(files.map(function (f) { return loader(f); }))\n                .then(function (allms) {\n                var rms = [];\n                allms.forEach(function (ms) {\n                    rms = rms.concat(ms);\n                });\n                return rms;\n            });\n        }\n        else {\n            fRes = loader(files);\n        }\n        return fRes.then(function (ms) { return ms.filter(function (it) { return !!it; }); });\n    };\n    DefaultModuleLoader.prototype.isFile = function (str) {\n        return str && /\\/((\\w|%|\\.))+\\.\\w+$/.test(str.replace(/\\\\\\\\/gi, '/'));\n    };\n    DefaultModuleLoader.prototype.loadModule = function (moduleName) {\n        var loader = this.getLoader();\n        return loader(moduleName).then(function (ms) { return ms.filter(function (it) { return !!it; }); });\n    };\n    DefaultModuleLoader.prototype.loadPathModule = function (pmd) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var modules;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        modules = [];\n                        if (!pmd.files) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.loadFile(pmd.files, pmd.basePath)\n                                .then(function (allmoduls) {\n                                allmoduls.forEach(function (ms) {\n                                    modules = modules.concat(ms);\n                                });\n                                return modules;\n                            })];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (!pmd.modules) return [3 /*break*/, 4];\n                        return [4 /*yield*/, Promise.all(pmd.modules.map(function (nmd) {\n                                return utils.isString(nmd) ? _this.loadModule(nmd) : nmd;\n                            })).then(function (ms) {\n                                modules = modules.concat(ms);\n                                return modules;\n                            })];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4: return [2 /*return*/, modules];\n                }\n            });\n        });\n    };\n    DefaultModuleLoader.prototype.createLoader = function () {\n        if (typeof commonjsRequire !== 'undefined') {\n            return function (modulepath) {\n                return new Promise(function (resolve, reject) {\n                    commonjsRequire(modulepath, function (mud) {\n                        resolve(mud);\n                    }, function (err) {\n                        reject(err);\n                    });\n                });\n            };\n        }\n        else {\n            throw new Error('has not module loader');\n        }\n    };\n    DefaultModuleLoader.prototype.getContentTypes = function (regModule) {\n        var regModules = [];\n        if (utils.isClass(regModule)) {\n            regModules.push(regModule);\n        }\n        else if (regModule) {\n            var rmodules = regModule['exports'] ? regModule['exports'] : regModule;\n            for (var p in rmodules) {\n                var type = rmodules[p];\n                if (utils.isClass(type)) {\n                    regModules.push(type);\n                }\n            }\n        }\n        return regModules;\n    };\n    DefaultModuleLoader.getClassAnnations = function () {\n        return { \"name\": \"DefaultModuleLoader\", \"params\": { \"constructor\": [], \"getLoader\": [], \"load\": [\"modules\"], \"loadTypes\": [\"modules\"], \"getTypes\": [\"modules\"], \"loadFile\": [\"files\", \"basePath\"], \"isFile\": [\"str\"], \"loadModule\": [\"moduleName\"], \"loadPathModule\": [\"pmd\"], \"createLoader\": [], \"getContentTypes\": [\"regModule\"] } };\n    };\n    return DefaultModuleLoader;\n}());\nexports.DefaultModuleLoader = DefaultModuleLoader;\n\n\n});\n\nunwrapExports(DefaultModuleLoader_1);\nvar DefaultModuleLoader_2 = DefaultModuleLoader_1.DefaultModuleLoader;\n\nvar IModuleValidate = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n * inject module validate token for decorator or class.\n *\n * @export\n * @class InjectMetadataManagerToken\n * @extends {RefRegistration<IMetadataManager>}\n * @template T\n */\nvar InjectModuleValidateToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectModuleValidateToken, _super);\n    function InjectModuleValidateToken(decorator) {\n        return _super.call(this, decorator, 'ModuleValidate') || this;\n    }\n    InjectModuleValidateToken.getClassAnnations = function () {\n        return { \"name\": \"InjectModuleValidateToken\", \"params\": { \"constructor\": [\"decorator\"] } };\n    };\n    return InjectModuleValidateToken;\n}(InjectReference_1.RefRegistration));\nexports.InjectModuleValidateToken = InjectModuleValidateToken;\n/**\n * Module Validate Token\n */\nexports.ModuleValidateToken = new InjectModuleValidateToken('');\n\n\n});\n\nunwrapExports(IModuleValidate);\nvar IModuleValidate_1 = IModuleValidate.InjectModuleValidateToken;\nvar IModuleValidate_2 = IModuleValidate.ModuleValidateToken;\n\nvar ModuleValidate = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n/**\n * base module validate.\n *\n * @export\n * @abstract\n * @class BaseModuelValidate\n * @implements {IModuleValidate}\n */\nvar ModuelValidate = /** @class */ (function () {\n    function ModuelValidate() {\n    }\n    ModuelValidate.prototype.valid = function (type) {\n        if (!utils.isClass(type)) {\n            return false;\n        }\n        var decorator = this.getDecorator();\n        if (utils.isString(decorator)) {\n            return core.hasOwnClassMetadata(decorator, type);\n        }\n        else if (utils.isArray(decorator)) {\n            return decorator.some(function (d) { return core.hasOwnClassMetadata(d, type); });\n        }\n        return true;\n    };\n    ModuelValidate.prototype.getDecorator = function () {\n        return null;\n    };\n    ModuelValidate.getClassAnnations = function () {\n        return { \"name\": \"ModuelValidate\", \"params\": { \"constructor\": [], \"valid\": [\"type\"], \"getDecorator\": [] } };\n    };\n    return ModuelValidate;\n}());\nexports.ModuelValidate = ModuelValidate;\n/**\n * IocExt module validate token.\n */\nexports.IocExtModuleValidateToken = new IModuleValidate.InjectModuleValidateToken(core.IocExt.toString());\n/**\n * IocExt module validate.\n *\n * @export\n * @class IocExtModuleValidate\n * @extends {ModuelValidate}\n * @implements {IModuleValidate}\n */\nvar IocExtModuleValidate = /** @class */ (function (_super) {\n    tslib_1.__extends(IocExtModuleValidate, _super);\n    function IocExtModuleValidate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IocExtModuleValidate.prototype.getDecorator = function () {\n        return core.IocExt.toString();\n    };\n    IocExtModuleValidate.getClassAnnations = function () {\n        return { \"name\": \"IocExtModuleValidate\", \"params\": { \"getDecorator\": [] } };\n    };\n    return IocExtModuleValidate;\n}(ModuelValidate));\nexports.IocExtModuleValidate = IocExtModuleValidate;\n\n\n});\n\nunwrapExports(ModuleValidate);\nvar ModuleValidate_1 = ModuleValidate.ModuelValidate;\nvar ModuleValidate_2 = ModuleValidate.IocExtModuleValidateToken;\nvar ModuleValidate_3 = ModuleValidate.IocExtModuleValidate;\n\nvar IModuleInjector = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n/**\n *  inject module injector token.\n */\nvar InjectModuleInjectorToken = /** @class */ (function (_super) {\n    tslib_1.__extends(InjectModuleInjectorToken, _super);\n    function InjectModuleInjectorToken(desc) {\n        return _super.call(this, 'DI_ModuleInjector', desc) || this;\n    }\n    InjectModuleInjectorToken.getClassAnnations = function () {\n        return { \"name\": \"InjectModuleInjectorToken\", \"params\": { \"constructor\": [\"desc\"] } };\n    };\n    return InjectModuleInjectorToken;\n}(Registration_1.Registration));\nexports.InjectModuleInjectorToken = InjectModuleInjectorToken;\n/**\n * async module injector token.\n */\nexports.ModuleInjectorToken = new InjectModuleInjectorToken('');\n\n\n});\n\nunwrapExports(IModuleInjector);\nvar IModuleInjector_1 = IModuleInjector.InjectModuleInjectorToken;\nvar IModuleInjector_2 = IModuleInjector.ModuleInjectorToken;\n\nvar ModuleInjector_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * base module injector. abstract class.\n *\n * @export\n * @abstract\n * @class BaseModuleInjector\n * @implements {IModuleInjector}\n */\nvar ModuleInjector = /** @class */ (function () {\n    /**\n     *Creates an instance of BaseModuleInjector.\n     * @param {IModuleValidate} [validate]\n     * @param {boolean} [skipNext] skip next when has match module to injector.\n     * @memberof BaseModuleInjector\n     */\n    function ModuleInjector(validate, skipNext) {\n        this.validate = validate;\n        this.skipNext = skipNext;\n    }\n    ModuleInjector.prototype.inject = function (container, modules) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var types, next;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        types = (modules || []).filter(function (ty) { return _this.valid(container, ty); });\n                        if (!types.length) return [3 /*break*/, 2];\n                        return [4 /*yield*/, utils.PromiseUtil.step(types.map(function (ty) { return function () { return _this.setup(container, ty); }; }))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        next = this.getNext(modules, types);\n                        return [2 /*return*/, { injected: types, next: next }];\n                }\n            });\n        });\n    };\n    ModuleInjector.prototype.syncInject = function (container, modules) {\n        var _this = this;\n        var types = (modules || []).filter(function (ty) { return _this.valid(container, ty); });\n        if (types.length) {\n            types.forEach(function (ty) {\n                _this.syncSetup(container, ty);\n            });\n        }\n        var next = this.getNext(modules, types);\n        return { injected: types, next: next };\n    };\n    ModuleInjector.prototype.valid = function (container, type) {\n        if (!this.validate) {\n            return true;\n        }\n        return this.validate.valid(type);\n    };\n    ModuleInjector.prototype.getNext = function (all, filtered) {\n        if (filtered.length === 0) {\n            return all;\n        }\n        if (this.skipNext) {\n            return null;\n        }\n        if (filtered.length === all.length) {\n            return null;\n        }\n        return all.filter(function (it) { return filtered.indexOf(it) < 0; });\n    };\n    ModuleInjector.prototype.setup = function (container, type) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                container.register(type);\n                return [2 /*return*/];\n            });\n        });\n    };\n    ModuleInjector.prototype.syncSetup = function (container, type) {\n        container.register(type);\n    };\n    ModuleInjector.getClassAnnations = function () {\n        return { \"name\": \"ModuleInjector\", \"params\": { \"constructor\": [\"validate\", \"skipNext\"], \"inject\": [\"container\", \"modules\"], \"syncInject\": [\"container\", \"modules\"], \"valid\": [\"container\", \"type\"], \"getNext\": [\"all\", \"filtered\"], \"setup\": [\"container\", \"type\"], \"syncSetup\": [\"container\", \"type\"] } };\n    };\n    ModuleInjector = tslib_1.__decorate([\n        core.Injectable(IModuleInjector.ModuleInjectorToken),\n        tslib_1.__param(0, core.Inject(IModuleValidate.ModuleValidateToken)),\n        tslib_1.__metadata(\"design:paramtypes\", [Object, Boolean])\n    ], ModuleInjector);\n    return ModuleInjector;\n}());\nexports.ModuleInjector = ModuleInjector;\n\n\n});\n\nunwrapExports(ModuleInjector_1);\nvar ModuleInjector_2 = ModuleInjector_1.ModuleInjector;\n\nvar IModuleInjectorChain = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n/**\n * module fileter token. mast use as singlton.\n */\nexports.ModuleInjectorChainToken = new InjectToken_1.InjectToken('DI_ModuleInjectorChain');\n\n\n});\n\nunwrapExports(IModuleInjectorChain);\nvar IModuleInjectorChain_1 = IModuleInjectorChain.ModuleInjectorChainToken;\n\nvar ModuleInjectorChain_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n/**\n * Module Injector chain, base injector chain.\n *\n * @export\n * @class ModuleInjectorChain\n * @implements {IModuleInjectorChain}\n */\nvar ModuleInjectorChain = /** @class */ (function () {\n    function ModuleInjectorChain() {\n        this._injectors = [];\n    }\n    Object.defineProperty(ModuleInjectorChain.prototype, \"injectors\", {\n        get: function () {\n            return this._injectors;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ModuleInjectorChain.prototype.first = function (injector) {\n        if (this.isInjector(injector)) {\n            this._injectors.unshift(injector);\n        }\n        return this;\n    };\n    ModuleInjectorChain.prototype.next = function (injector) {\n        if (this.isInjector(injector)) {\n            this._injectors.push(injector);\n        }\n        return this;\n    };\n    ModuleInjectorChain.prototype.isInjector = function (injector) {\n        return injector instanceof ModuleInjector_1.ModuleInjector;\n    };\n    ModuleInjectorChain.prototype.inject = function (container, modules) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var types;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        types = [];\n                        return [4 /*yield*/, utils.PromiseUtil.runInChain(this.injectors.map(function (jtor) {\n                                return function (mds, next) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                                    var ijRt;\n                                    return tslib_1.__generator(this, function (_a) {\n                                        switch (_a.label) {\n                                            case 0: return [4 /*yield*/, jtor.inject(container, mds)];\n                                            case 1:\n                                                ijRt = _a.sent();\n                                                if (ijRt.injected && ijRt.injected.length) {\n                                                    types = types.concat(ijRt.injected);\n                                                }\n                                                if (ijRt.next && ijRt.next.length > 0) {\n                                                    return [2 /*return*/, next()];\n                                                }\n                                                return [2 /*return*/];\n                                        }\n                                    });\n                                }); };\n                            }), modules)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, types];\n                }\n            });\n        });\n    };\n    ModuleInjectorChain.prototype.syncInject = function (container, modules) {\n        var types = [];\n        var completed = false;\n        this.injectors.some(function (jtor) {\n            if (jtor instanceof ModuleInjector_1.ModuleInjector) {\n                var result = jtor.syncInject(container, modules);\n                types = types.concat(result.injected);\n                completed = (!result.next || result.next.length < 1);\n            }\n            return completed;\n        });\n        return types;\n    };\n    ModuleInjectorChain.getClassAnnations = function () {\n        return { \"name\": \"ModuleInjectorChain\", \"params\": { \"constructor\": [], \"first\": [\"injector\"], \"next\": [\"injector\"], \"isInjector\": [\"injector\"], \"inject\": [\"container\", \"modules\"], \"syncInject\": [\"container\", \"modules\"] } };\n    };\n    return ModuleInjectorChain;\n}());\nexports.ModuleInjectorChain = ModuleInjectorChain;\n\n\n});\n\nunwrapExports(ModuleInjectorChain_1);\nvar ModuleInjectorChain_2 = ModuleInjectorChain_1.ModuleInjectorChain;\n\nvar injectors = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(IModuleLoader, exports);\ntslib_1.__exportStar(DefaultModuleLoader_1, exports);\ntslib_1.__exportStar(IModuleValidate, exports);\ntslib_1.__exportStar(ModuleValidate, exports);\ntslib_1.__exportStar(IModuleInjector, exports);\ntslib_1.__exportStar(ModuleInjector_1, exports);\ntslib_1.__exportStar(IModuleInjectorChain, exports);\ntslib_1.__exportStar(ModuleInjectorChain_1, exports);\n\n\n});\n\nunwrapExports(injectors);\n\nvar ContainerBuilder_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n\n\n\n\n/**\n * default container builder.\n *\n * @export\n * @class DefaultContainerBuilder\n * @implements {IContainerBuilder}\n */\nvar ContainerBuilder = /** @class */ (function () {\n    function ContainerBuilder(loader) {\n        this._loader = loader;\n    }\n    Object.defineProperty(ContainerBuilder.prototype, \"loader\", {\n        get: function () {\n            if (!this._loader) {\n                this._loader = new injectors.DefaultModuleLoader();\n            }\n            return this._loader;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ContainerBuilder.prototype.create = function () {\n        var _this = this;\n        var container = new Container_1.Container();\n        container.bindProvider(IContainerBuilder.ContainerBuilderToken, function () { return _this; });\n        container.bindProvider(injectors.ModuleLoaderToken, function () { return _this.loader; });\n        return container;\n    };\n    /**\n     * build container.\n     *\n     * @param {...LoadType[]} [modules]\n     * @returns\n     * @memberof DefaultContainerBuilder\n     */\n    ContainerBuilder.prototype.build = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var container;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        container = this.create();\n                        if (!modules.length) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.loadModule.apply(this, [container].concat(modules))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, container];\n                }\n            });\n        });\n    };\n    /**\n     * load modules for container.\n     *\n     * @param {IContainer} container\n     * @param {...LoadType[]} modules\n     * @returns {Promise<Type<any>[]>}\n     * @memberof DefaultContainerBuilder\n     */\n    ContainerBuilder.prototype.loadModule = function (container) {\n        var modules = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            modules[_i - 1] = arguments[_i];\n        }\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var regModules, injTypes, injChain_1;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loader.loadTypes(modules)];\n                    case 1:\n                        regModules = _a.sent();\n                        injTypes = [];\n                        if (!(regModules && regModules.length)) return [3 /*break*/, 3];\n                        injChain_1 = this.getInjectorChain(container);\n                        return [4 /*yield*/, utils.PromiseUtil.step(regModules.map(function (typs) { return function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                                var ityps;\n                                return tslib_1.__generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0: return [4 /*yield*/, injChain_1.inject(container, typs)];\n                                        case 1:\n                                            ityps = _a.sent();\n                                            injTypes = injTypes.concat(ityps);\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); }; }))];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [2 /*return*/, injTypes];\n                }\n            });\n        });\n    };\n    ContainerBuilder.prototype.syncBuild = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var container = this.create();\n        if (modules.length) {\n            this.syncLoadModule.apply(this, [container].concat(modules));\n        }\n        return container;\n    };\n    ContainerBuilder.prototype.syncLoadModule = function (container) {\n        var modules = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            modules[_i - 1] = arguments[_i];\n        }\n        var regModules = this.loader.getTypes(modules);\n        var injTypes = [];\n        if (regModules && regModules.length) {\n            var injChain_2 = this.getInjectorChain(container);\n            regModules.forEach(function (typs) {\n                var ityps = injChain_2.syncInject(container, typs);\n                injTypes = injTypes.concat(ityps);\n            });\n        }\n        return injTypes;\n    };\n    ContainerBuilder.prototype.getInjectorChain = function (container) {\n        if (!container.has(injectors.ModuleInjectorChainToken)) {\n            container.register(injectors.ModuleInjector)\n                .bindProvider(injectors.ModuleValidateToken, new injectors.ModuelValidate())\n                .bindProvider(injectors.IocExtModuleValidateToken, new injectors.IocExtModuleValidate())\n                .bindProvider(injectors.ModuleInjectorChainToken, new injectors.ModuleInjectorChain()\n                .next(container.resolve(injectors.ModuleInjectorToken, { provide: injectors.ModuleValidateToken, useValue: container.get(injectors.IocExtModuleValidateToken) }, { skipNext: true }))\n                .next(container.resolve(injectors.ModuleInjectorToken)));\n        }\n        return container.get(injectors.ModuleInjectorChainToken);\n    };\n    ContainerBuilder.getClassAnnations = function () {\n        return { \"name\": \"ContainerBuilder\", \"params\": { \"constructor\": [\"loader\"], \"create\": [], \"build\": [\"modules\"], \"loadModule\": [\"container\", \"modules\"], \"syncBuild\": [\"modules\"], \"syncLoadModule\": [\"container\", \"modules\"], \"getInjectorChain\": [\"container\"] } };\n    };\n    return ContainerBuilder;\n}());\nexports.ContainerBuilder = ContainerBuilder;\n\n\n});\n\nunwrapExports(ContainerBuilder_1);\nvar ContainerBuilder_2 = ContainerBuilder_1.ContainerBuilder;\n\nvar D__workspace_github_tsioc_packages_core_lib = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\ntslib_1.__exportStar(IContainer, exports);\ntslib_1.__exportStar(Container_1, exports);\ntslib_1.__exportStar(types, exports);\ntslib_1.__exportStar(Registration_1, exports);\ntslib_1.__exportStar(InjectReference_1, exports);\ntslib_1.__exportStar(InjectToken_1, exports);\ntslib_1.__exportStar(IContainerBuilder, exports);\ntslib_1.__exportStar(IMethodAccessor, exports);\ntslib_1.__exportStar(ICacheManager, exports);\ntslib_1.__exportStar(LifeScope, exports);\ntslib_1.__exportStar(ContainerBuilder_1, exports);\ntslib_1.__exportStar(utils, exports);\ntslib_1.__exportStar(components, exports);\ntslib_1.__exportStar(core, exports);\ntslib_1.__exportStar(injectors, exports);\ntslib_1.__exportStar(providers, exports);\ntslib_1.__exportStar(resolves, exports);\n\n\n});\n\nvar index$9 = unwrapExports(D__workspace_github_tsioc_packages_core_lib);\n\nreturn index$9;\n\n})));\n\n//# sourceMappingURL=sourcemaps/core.umd.js.map\n"]}