"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@ts-ioc/core");
function createAdviceDecorator(adviceName, adapter, afterPointcutAdapter, metadataExtends) {
    return core_1.createMethodDecorator('Advice', args => {
        if (adapter) {
            adapter(args);
        }
        args.next({
            match: (arg) => core_1.isString(arg) || core_1.isRegExp(arg),
            setMetadata: (metadata, arg) => {
                metadata.pointcut = arg;
            }
        });
        if (afterPointcutAdapter) {
            afterPointcutAdapter(args);
        }
        args.next({
            match: (arg) => core_1.isString(arg),
            setMetadata: (metadata, arg) => {
                metadata.annotationArgName = arg;
            }
        });
        args.next({
            match: (arg) => core_1.isString(arg),
            setMetadata: (metadata, arg) => {
                metadata.annotationName = arg;
            }
        });
    }, metadata => {
        if (metadataExtends) {
            metadataExtends(metadata);
        }
        metadata.adviceName = adviceName;
        return metadata;
    });
}
exports.createAdviceDecorator = createAdviceDecorator;
/**
 * aop advice decorator.
 *
 * @Advice
 */
exports.Advice = createAdviceDecorator('Advice');

//# sourceMappingURL=../sourcemaps/decorators/Advice.js.map
