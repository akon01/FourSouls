{"version":3,"sources":["core/actions/ComponentBeforeInitAction.ts"],"names":[],"mappings":";;;AAEA,qDAAoD;AAGpD,qCAAyC;AACzC,6CAA4C;AAC5C,0CAA6C;AAe7C;;;;;;GAMG;AACH;IAA+C,qDAAe;IAE1D;eACI,kBAAM,yBAAW,CAAC,mBAAmB,CAAC;IAC1C,CAAC;IAES,2CAAO,GAAjB,UAAkB,SAAqB,EAAE,IAAmC;QACxE,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS,EAAE;YAC1D,OAAO;SACV;QACD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,EAAE;YAChC,IAAI,SAAS,CAAC,YAAY,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,EAAE,yBAAa,CAAC,KAAK,EAAE,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,yBAAW,CAAC,mBAAmB,CAAC,EAAtD,CAAsD,CAAC,EAAE;gBAC7I,IAAI,SAAS,GAAG,IAAI,CAAC,MAAoB,CAAC;gBAC1C,IAAI,kBAAU,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE;oBAClC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,UAAU,EAAE,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;iBACnF;aACJ;SACJ;IACL,CAAC;IAE0B,2CAAiB,GAAxB;QACI,OAAO,EAAC,MAAM,EAAC,2BAA2B,EAAC,QAAQ,EAAC,EAAC,aAAa,EAAC,EAAE,EAAC,SAAS,EAAC,CAAC,WAAW,EAAC,MAAM,CAAC,EAAC,EAAC,CAAC;IAC3G,CAAC;IACN,gCAAC;AAAD,CAvBnB,AAuBoB,CAvB2B,iCAAe,GAuB1C;AAvBP,8DAAyB","file":"../../../core/actions/ComponentBeforeInitAction.js","sourcesContent":["import { ActionData } from '../ActionData';\r\nimport { ClassMetadata } from '../metadatas';\r\nimport { ActionComposite } from './ActionComposite';\r\nimport { IContainer } from '../../IContainer';\r\nimport { BeforeInit } from '../ComponentLifecycle';\r\nimport { isFunction } from '../../utils';\r\nimport { CoreActions } from './CoreActions';\r\nimport { DecoratorType } from '../factories';\r\n\r\n\r\n\r\n/**\r\n * component before init action data.\r\n *\r\n * @export\r\n * @interface ComponentBeforeInitActionData\r\n * @extends {ActionData<ClassMetadata>}\r\n */\r\nexport interface ComponentBeforeInitActionData extends ActionData<ClassMetadata> {\r\n\r\n}\r\n\r\n/**\r\n * component before init action, to run @Component decorator class before init hooks.\r\n *\r\n * @export\r\n * @class ComponentBeforeInitAction\r\n * @extends {ActionComposite}\r\n */\r\nexport class ComponentBeforeInitAction extends ActionComposite {\r\n\r\n    constructor() {\r\n        super(CoreActions.componentBeforeInit)\r\n    }\r\n\r\n    protected working(container: IContainer, data: ComponentBeforeInitActionData) {\r\n        if (data.raiseContainer && data.raiseContainer !== container) {\r\n            return;\r\n        }\r\n        if (data.targetType && data.target) {\r\n            if (container.getLifeScope().hasDecorator(data.targetType, DecoratorType.Class, surm => surm.actions.includes(CoreActions.componentBeforeInit))) {\r\n                let component = data.target as BeforeInit;\r\n                if (isFunction(component.beforeInit)) {\r\n                    container.syncInvoke(data.target || data.targetType, 'beforeInit', data.target);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\n                        static getClassAnnations():any  {\n                            return {\"name\":\"ComponentBeforeInitAction\",\"params\":{\"constructor\":[],\"working\":[\"container\",\"data\"]}};\n                        }\n                   }\r\n\r\n"]}