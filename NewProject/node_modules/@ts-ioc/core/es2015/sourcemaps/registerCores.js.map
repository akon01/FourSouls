{"version":3,"sources":["registerCores.ts"],"names":[],"mappings":";;AACA,2CAA6C;AAC7C,iCAIe;AACf,mDAAoD;AACpD,uDAAwD;AACxD,yCAA+D;AAC/D,2CAAiG;AAEjG;;;;;GAKG;AACH,SAAgB,aAAa,CAAC,SAAqB;IAC/C,SAAS,CAAC,iBAAiB,CAAC,0BAAc,EAAE,GAAG,EAAE,CAAC,IAAI,uBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC;IACnF,SAAS,CAAC,iBAAiB,CAAC,iCAAiB,EAAE,GAAG,EAAE,CAAC,IAAI,mBAAY,CAAC,SAAS,CAAC,CAAC,CAAC;IAClF,SAAS,CAAC,iBAAiB,CAAC,6BAAkB,EAAE,GAAG,EAAE,CAAC,IAAI,wBAAa,CAAC,SAAS,CAAC,CAAC,CAAC;IACpF,SAAS,CAAC,QAAQ,CAAC,4BAAgB,EAAE,GAAG,EAAE,CAAC,IAAI,uBAAW,CAAC,SAAS,CAAC,CAAC,CAAC;IACvE,SAAS,CAAC,YAAY,CAAC,uBAAW,EAAE,4BAAgB,CAAC,CAAC;IACtD,SAAS,CAAC,iBAAiB,CAAC,+BAAmB,EAAE,GAAG,EAAE,CAAC,IAAI,0BAAc,CAAC,SAAS,CAAC,CAAC,CAAC;IACtF,SAAS,CAAC,iBAAiB,CAAC,qCAAmB,EAAE,GAAG,EAAE,CAAC,IAAI,qBAAc,CAAC,SAAS,CAAC,CAAC,CAAC;IACtF,SAAS,CAAC,iBAAiB,CAAC,wBAAiB,EAAE,mBAAY,CAAC,CAAC;IAE7D,IAAI,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,0BAAc,CAAC,CAAC;IAE9C,SAAS,CAAC,iBAAiB,CAAC,iBAAU,EAAE,kBAAW,CAAC,YAAY,EAAE,kBAAW,CAAC,KAAK,CAAC,CAAC;IACrF,SAAS,CAAC,iBAAiB,CAAC,gBAAS,EAAE,kBAAW,CAAC,YAAY,EAAE,kBAAW,CAAC,KAAK,EAAE,kBAAW,CAAC,mBAAmB,EAAE,kBAAW,CAAC,aAAa,EAAE,kBAAW,CAAC,kBAAkB,CAAC,CAAC;IAChL,SAAS,CAAC,iBAAiB,CAAC,gBAAS,EAAE,kBAAW,CAAC,YAAY,CAAC,CAAC;IACjE,SAAS,CAAC,iBAAiB,CAAC,WAAI,EAAE,kBAAW,CAAC,YAAY,CAAC,CAAC;IAC5D,SAAS,CAAC,iBAAiB,CAAC,gBAAS,EAAE,kBAAW,CAAC,YAAY,CAAC,CAAC;IACjE,SAAS,CAAC,iBAAiB,CAAC,eAAQ,EAAE,kBAAW,CAAC,YAAY,EAAE,kBAAW,CAAC,KAAK,CAAC,CAAC;IACnF,SAAS,CAAC,iBAAiB,CAAC,gBAAS,EAAE,kBAAW,CAAC,iBAAiB,EAAE,kBAAW,CAAC,gBAAgB,CAAC,CAAC;IACpG,SAAS,CAAC,iBAAiB,CAAC,aAAM,EAAE,kBAAW,CAAC,iBAAiB,EAAE,kBAAW,CAAC,gBAAgB,CAAC,CAAC;IACjG,SAAS,CAAC,iBAAiB,CAAC,YAAK,EAAE,kBAAW,CAAC,iBAAiB,EAAE,kBAAW,CAAC,gBAAgB,CAAC,CAAC;IAChG,SAAS,CAAC,iBAAiB,CAAC,aAAM,EAAE,kBAAW,CAAC,sBAAsB,CAAC,CAAC;IAExE,SAAS,CAAC,iBAAiB,CAAC,cAAO,EAAE,kBAAW,CAAC,OAAO,EAAE,kBAAW,CAAC,aAAa,CAAC,CAAC;IACrF,SAAS,CAAC,iBAAiB,CAAC,aAAM,EAAE,kBAAW,CAAC,OAAO,EAAE,kBAAW,CAAC,mBAAmB,EAAE,kBAAW,CAAC,aAAa,EAAE,kBAAW,CAAC,kBAAkB,CAAC,CAAC;IAErJ,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;IAC3C,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;IACrC,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC7C,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC;IAC7C,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACxC,CAAC;AA/BD,sCA+BC","file":"../registerCores.js","sourcesContent":["import { IContainer } from './IContainer';\r\nimport { LifeScopeToken } from './LifeScope';\r\nimport {\r\n    CacheManager, Injectable, Component, AutoWired, Inject, Singleton, Param,\r\n    Method, Abstract, Autorun, IocExt, Refs, Providers, CoreActions, MethodAccessor,\r\n    MetaAccessor, MetaAccessorToken, DefaultLifeScope\r\n} from './core'\r\nimport { CacheManagerToken } from './ICacheManager';\r\nimport { MethodAccessorToken } from './IMethodAccessor';\r\nimport { ResolverChain, ResolverChainToken } from './resolves';\r\nimport { ProviderMap, ProviderMapToken, ProviderParser, ProviderParserToken } from './providers';\r\n\r\n/**\r\n * register core for container.\r\n *\r\n * @export\r\n * @param {IContainer} container\r\n */\r\nexport function registerCores(container: IContainer) {\r\n    container.registerSingleton(LifeScopeToken, () => new DefaultLifeScope(container));\r\n    container.registerSingleton(CacheManagerToken, () => new CacheManager(container));\r\n    container.registerSingleton(ResolverChainToken, () => new ResolverChain(container));\r\n    container.register(ProviderMapToken, () => new ProviderMap(container));\r\n    container.bindProvider(ProviderMap, ProviderMapToken);\r\n    container.registerSingleton(ProviderParserToken, () => new ProviderParser(container));\r\n    container.registerSingleton(MethodAccessorToken, () => new MethodAccessor(container));\r\n    container.registerSingleton(MetaAccessorToken, MetaAccessor);\r\n\r\n    let lifeScope = container.get(LifeScopeToken);\r\n\r\n    lifeScope.registerDecorator(Injectable, CoreActions.bindProvider, CoreActions.cache);\r\n    lifeScope.registerDecorator(Component, CoreActions.bindProvider, CoreActions.cache, CoreActions.componentBeforeInit, CoreActions.componentInit, CoreActions.componentAfterInit);\r\n    lifeScope.registerDecorator(Singleton, CoreActions.bindProvider);\r\n    lifeScope.registerDecorator(Refs, CoreActions.bindProvider);\r\n    lifeScope.registerDecorator(Providers, CoreActions.bindProvider);\r\n    lifeScope.registerDecorator(Abstract, CoreActions.bindProvider, CoreActions.cache);\r\n    lifeScope.registerDecorator(AutoWired, CoreActions.bindParameterType, CoreActions.bindPropertyType);\r\n    lifeScope.registerDecorator(Inject, CoreActions.bindParameterType, CoreActions.bindPropertyType);\r\n    lifeScope.registerDecorator(Param, CoreActions.bindParameterType, CoreActions.bindPropertyType);\r\n    lifeScope.registerDecorator(Method, CoreActions.bindParameterProviders);\r\n\r\n    lifeScope.registerDecorator(Autorun, CoreActions.autorun, CoreActions.methodAutorun);\r\n    lifeScope.registerDecorator(IocExt, CoreActions.autorun, CoreActions.componentBeforeInit, CoreActions.componentInit, CoreActions.componentAfterInit);\r\n\r\n    container.register(Date, () => new Date());\r\n    container.register(String, () => '');\r\n    container.register(Number, () => Number.NaN);\r\n    container.register(Boolean, () => undefined);\r\n    container.register(Array, () => []);\r\n}\r\n"]}